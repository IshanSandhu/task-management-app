/*! For license information please see main.7afcfac7.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),be(e.stateNode,e.type,t))}}function Te(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Se(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Se())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,bt,xt,It,Et,Tt=!1,St=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(Vt),Rt.forEach(Vt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return qt(t,e)}if(0<St.length){qt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==At&&qt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&_t(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Tn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Tr=Er("animationend"),Sr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Sr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,jr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=_e(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Tr:case Sr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=fn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Wn(u))if(Jn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(m=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[di]||null}var bi=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Ti(e,t){xi++,bi[xi]=e.current,e.current=t}var Si={},Ci=Ii(Si),Ni=Ii(!1),Ai=Si;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Si)throw Error(a(168));Ti(Ci,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ai=Ci.current,Ti(Ci,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Ti(Ci,e)):Ei(Ni),Ti(Ni,n)}var Ui=null,Vi=!1,ji=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,ji=!1}}return null}var zi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){zi[Wi++]=Hi,zi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Wi],zi[Wi]=null,Hi=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,wa=null;function _a(){wa=ka=ga=null}function ba(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Sa(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case b:return(t=Uc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),ia&&Xi(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Xi(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Ja=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ti(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,wo=0,_o=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cu,e=n(r,i)}while(ko)}if(ho.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function So(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,vo.lanes|=h,Ms|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=So(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return So().memoizedState}function qo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function zo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function eu(){return So().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Sa(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(So(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],So().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=So();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],So().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),fu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function _u(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,_u(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Su(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ds,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ds,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ds,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ds,Rs),Rs|=r;return _u(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,_u(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Aa=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Pi(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Wa(t,o,r,s),Aa=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):_u(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,_u(e,t,n,r),t.child}var Ru,Du,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_u(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Ri(t.type)&&Di(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Ru(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return ba(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,hs=!1;function fs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Zu(n,t);case 6:var r=ls,i=hs;ls=null,fs(e,t,n),hs=i,null!==(ls=r)&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=hs,ls=n.stateNode.containerInfo,hs=!0,fs(e,t,n),ls=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}fs(e,t,n);break;case 1:if(!$u&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}fs(e,t,n);break;case 21:fs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,fs(e,t,n),$u=r):fs(e,t,n);break;default:fs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,hs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ic(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Je())),4&r&&ps(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||h,vs(t,e),$u=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Xu=e,h=e.child;null!==h;){for(f=Xu=h;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){_s(f);continue}}null!==p?(p.return=d,Xu=p):_s(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Yu;var c=$u;if(Yu=o,($u=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?bs(i):null!==s?(s.return=o,Xu=s):bs(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,Yu=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):ws(e)}}function ws(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function _s(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function bs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var xs,Is=Math.ceil,Es=w.ReactCurrentDispatcher,Ts=w.ReactCurrentOwner,Ss=w.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Ps=0,Rs=0,Ds=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,qs=0,Bs=1/0,zs=null,Ws=!1,Ks=null,Hs=null,Gs=!1,Qs=null,Ys=0,$s=0,Js=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Je():-1!==Xs?Xs:Xs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Ps)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=Je()+500,Vi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===Ns?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var r=ft(e,e===Ns?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Ps===t||(zs=null,Bs=Je()+500,fc(e,t));;)try{gc();break}catch(s){dc(e,s)}_a(),Es.current=o,Cs=i,null!==As?t=0:(Ns=null,Ps=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,fc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,fc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,js,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qs+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,js,zs),t);break}_c(e,js,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,js,zs),r);break}_c(e,js,zs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));bc();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,fc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,js,zs),rc(e,Je()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=Je()+500,Vi&&Bi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&bc();var t=Cs;Cs|=1;var n=Ss.transition,r=kt;try{if(Ss.transition=null,kt=1,e)return e()}finally{kt=r,Ss.transition=n,0===(6&(Cs=t))&&Bi()}}function hc(){Rs=Ds.current,Ei(Ds)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:ba(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,As=e=Dc(e.current,null),Ps=Rs=t,Os=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function dc(e,t){for(;;){var n=As;try{if(_a(),ho.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,wo=0,Ts.current=null,null===n||null===n.return){Os=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Ps)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Ps===t||(zs=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(_a(),Cs=n,Es.current=r,null!==As)throw Error(a(261));return Ns=null,Ps=0,Os}function mc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!Ye();)kc(As)}function kc(e){var t=xs(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Rs)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function _c(e,t,n){var r=kt,i=Ss.transition;try{Ss.transition=null,kt=1,function(e,t,n,r){do{bc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return bc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ss.transition,Ss.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ts.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(_){Ic(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Cs=s,kt=u,Ss.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&bc(),0!==(1&(o=e.pendingLanes))?e===Js?$s++:($s=0,Js=e):$s=0,Bi()}(e,t,n,r)}finally{Ss.transition=i,kt=r}return null}function bc(){if(null!==Qs){var e=wt(Ys),t=Ss.transition,n=kt;try{if(Ss.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var h=Xu;switch(h.tag){case 0:case 11:case 15:ns(8,h,o)}var f=h.child;if(null!==f)f.return=h,Xu=f;else for(;null!==Xu;){var d=(h=Xu).sibling,p=h.return;if(as(h),h===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var w=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Xu=w;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(b){Ic(s,s.return,b)}if(s===u){Xu=null;break e}var _=s.sibling;if(null!==_){_.return=s.return,Xu=_;break e}Xu=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Ss.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ps&n)===n&&(4===Os||3===Os&&(130023424&Ps)===Ps&&500>Je()-qs?fc(e,0):Us|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case S:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Si;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Da(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Wu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_u(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Su(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}_u(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),_u(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):_u(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return _u(e,t,t.pendingProps,n),t.child;case 8:case 12:return _u(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}_u(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,_u(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),zu(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),za(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&Cs)&&(Bs=Je()+500,Bi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,_i,Te,Se,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var _=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,_(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,D(b);else{var t=r(l);null!==t&&O(_,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(_,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,T=-1,S=5,C=-1;function N(){return!(t.unstable_now()-C<S)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){m(A,0)};function D(e){E=e,I||(I=!0,x())}function O(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,O(_,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return K},SDK_VERSION:function(){return mt},_DEFAULT_ENTRY_NAME:function(){return it},_addComponent:function(){return st},_addOrOverwriteComponent:function(){return ct},_apps:function(){return ot},_clearComponents:function(){return dt},_components:function(){return ut},_getProvider:function(){return ht},_registerComponent:function(){return lt},_removeServiceInstance:function(){return ft},deleteApp:function(){return _t},getApp:function(){return kt},getApps:function(){return wt},initializeApp:function(){return gt},onLog:function(){return It},registerVersion:function(){return xt},setLogLevel:function(){return Et}});var t=n(791),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){if(t&&("object"===k(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function _(e){var t=g();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function b(e,t,n){return b=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},b.apply(null,arguments)}function x(e){var t="function"===typeof Map?new Map:void 0;return x=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return b(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},x(e)}var I=!1,E=!1,T="${JSCORE_VERSION}",S=function(e,t){if(!e)throw C(t)},C=function(e){return new Error("Firebase Database ("+T+") INTERNAL ASSERT FAILED: "+e)},N=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(N(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},P=function(e){var t=N(e);return A.encodeByteArray(t,!0)},R=function(e){return P(e).replace(/\./g,"")},D=function(e){try{return A.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function O(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=O(e[n],t[n]));return e}var L=function(){function e(){var t=this;l(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return f(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function M(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[R(JSON.stringify({alg:"none",type:"JWT"})),R(JSON.stringify(a)),""].join(".")}function F(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function U(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(F())}function V(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function j(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function q(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function B(){var e=F();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function z(){return!0===I||!0===E}function W(){return"object"===typeof indexedDB}var K=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(p(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(p(a),H.prototype.create),a}return f(n)}(x(Error)),H=function(){function e(t,n,r){l(this,e),this.service=t,this.serviceName=n,this.errors=r}return f(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?G(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new K(n,a,t);return o}}]),e}();function G(e,t){return e.replace(Q,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Q=/\{\$([^}]+)}/g;function Y(e){return JSON.parse(e)}function $(e){return JSON.stringify(e)}var J=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Y(D(a[0])||""),n=Y(D(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function X(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Z(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ee(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function te(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ne(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(re(u)&&re(s)){if(!ne(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function re(e){return null!==e&&"object"===typeof e}function ie(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ae(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function oe(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ue=function(){function e(){l(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return f(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function se(e,t){var n=new ce(e,t);return n.subscribe.bind(n)}var ce=function(){function e(t,n){var r=this;l(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return f(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=le),void 0===r.error&&(r.error=le),void 0===r.complete&&(r.complete=le);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function le(){}var he=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function fe(e,t){return"".concat(e," failed: ").concat(t," argument ")}function de(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(fe(e,t)+"must be a valid function.")}function pe(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(fe(e,t)+"must be a valid context object.")}var ve=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ye(e){return e&&e._delegate?e._delegate:e}function me(){me=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new I(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function h(){}function f(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=h.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==k(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=d,u(m,"constructor",d),u(d,"constructor",f),f.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function ge(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ke(e){return function(e){if(Array.isArray(e))return a(e)}(e)||ge(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(uS){return void n(uS)}u.done?t(s):Promise.resolve(s).then(r,i)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){we(a,r,i,o,u,"next",e)}function u(e){we(a,r,i,o,u,"throw",e)}o(void 0)}))}}var be=function(){function e(t,n,r){l(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return f(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),xe="[DEFAULT]",Ie=function(){function e(t,n){l(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return f(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new L;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xe})}catch(c){}var t,n=d(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ke(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ke(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=d(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],h=this.normalizeInstanceIdentifier(c);r===h&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Ax){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===xe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Ax){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;return this.component?this.component.multipleInstances?e:xe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ee,Te,Se=function(){function e(t){l(this,e),this.name=t,this.providers=new Map}return f(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ie(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ce=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Te||(Te={}));var Ne={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Ae=Te.INFO,Pe=(c(Ee={},Te.DEBUG,"log"),c(Ee,Te.VERBOSE,"log"),c(Ee,Te.INFO,"info"),c(Ee,Te.WARN,"warn"),c(Ee,Te.ERROR,"error"),Ee),Re=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Pe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},De=function(){function e(t){l(this,e),this.name=t,this._logLevel=Ae,this._logHandler=Re,this._userLogHandler=null,Ce.push(this)}return f(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Te))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ne[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.DEBUG].concat(t)),this._logHandler.apply(this,[this,Te.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Te.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.INFO].concat(t)),this._logHandler.apply(this,[this,Te.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.WARN].concat(t)),this._logHandler.apply(this,[this,Te.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Te.ERROR].concat(t)),this._logHandler.apply(this,[this,Te.ERROR].concat(t))}}]),e}();function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me,Fe;var Ue=new WeakMap,Ve=new WeakMap,je=new WeakMap,qe=new WeakMap,Be=new WeakMap;var ze={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ve.get(e);if("objectStoreNames"===t)return e.objectStoreNames||je.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return He(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function We(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ge(this),n),He(Ue.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return He(e.apply(Ge(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ge(this),t].concat(r));return je.set(a,t.sort?t.sort():[t]),He(a)}}function Ke(e){return"function"===typeof e?We(e):(e instanceof IDBTransaction&&function(e){if(!Ve.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ve.set(e,t)}}(e),t=e,(Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,ze):e);var t}function He(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(He(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ue.set(t,e)})).catch((function(){})),Be.set(t,e),t}(e);if(qe.has(e))return qe.get(e);var t=Ke(e);return t!==e&&(qe.set(e,t),Be.set(t,e)),t}var Ge=function(e){return Be.get(e)};var Qe,Ye,$e=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],Xe=new Map;function Ze(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Xe.get(t))return Xe.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Je.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||$e.includes(n))){var a=function(){var e=_e(me().mark((function e(t){var a,o,u,s,c,l,h=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Xe.set(t,a),a}}}ze=function(e){return Le(Le({},e),{},{get:function(t,n,r){return Ze(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ze(t,n)||e.has(t,n)}})}(ze);var et=function(){function e(t){l(this,e),this.container=t}return f(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var tt="@firebase/app",nt="0.7.28",rt=new De("@firebase/app"),it="[DEFAULT]",at=(c(Qe={},tt,"fire-core"),c(Qe,"@firebase/app-compat","fire-core-compat"),c(Qe,"@firebase/analytics","fire-analytics"),c(Qe,"@firebase/analytics-compat","fire-analytics-compat"),c(Qe,"@firebase/app-check","fire-app-check"),c(Qe,"@firebase/app-check-compat","fire-app-check-compat"),c(Qe,"@firebase/auth","fire-auth"),c(Qe,"@firebase/auth-compat","fire-auth-compat"),c(Qe,"@firebase/database","fire-rtdb"),c(Qe,"@firebase/database-compat","fire-rtdb-compat"),c(Qe,"@firebase/functions","fire-fn"),c(Qe,"@firebase/functions-compat","fire-fn-compat"),c(Qe,"@firebase/installations","fire-iid"),c(Qe,"@firebase/installations-compat","fire-iid-compat"),c(Qe,"@firebase/messaging","fire-fcm"),c(Qe,"@firebase/messaging-compat","fire-fcm-compat"),c(Qe,"@firebase/performance","fire-perf"),c(Qe,"@firebase/performance-compat","fire-perf-compat"),c(Qe,"@firebase/remote-config","fire-rc"),c(Qe,"@firebase/remote-config-compat","fire-rc-compat"),c(Qe,"@firebase/storage","fire-gcs"),c(Qe,"@firebase/storage-compat","fire-gcs-compat"),c(Qe,"@firebase/firestore","fire-fst"),c(Qe,"@firebase/firestore-compat","fire-fst-compat"),c(Qe,"fire-js","fire-js"),c(Qe,"firebase","fire-js-all"),Qe),ot=new Map,ut=new Map;function st(e,t){try{e.container.addComponent(t)}catch(n){rt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ct(e,t){e.container.addOrOverwriteComponent(t)}function lt(e){var t=e.name;if(ut.has(t))return rt.debug("There were multiple attempts to register component ".concat(t,".")),!1;ut.set(t,e);var n,r=d(ot.values());try{for(r.s();!(n=r.n()).done;){st(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ht(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ft(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it;ht(e,t).clearInstance(n)}function dt(){ut.clear()}var pt=(c(Ye={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),c(Ye,"bad-app-name","Illegal App name: '{$appName}"),c(Ye,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),c(Ye,"app-deleted","Firebase App named '{$appName}' already deleted"),c(Ye,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),c(Ye,"invalid-log-argument","First argument to `onLog` must be null or a function."),c(Ye,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),c(Ye,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),c(Ye,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),c(Ye,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Ye),vt=new H("app","Firebase",pt),yt=function(){function e(t,n,r){var i=this;l(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new be("app",(function(){return i}),"PUBLIC"))}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw vt.create("app-deleted",{appName:this._name})}}]),e}(),mt="9.9.0";function gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:it,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw vt.create("bad-app-name",{appName:String(i)});var a=ot.get(i);if(a){if(ne(e,a.options)&&ne(r,a.config))return a;throw vt.create("duplicate-app",{appName:i})}var o,u=new Se(i),s=d(ut.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new yt(e,r,u);return ot.set(i,l),l}function kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=ot.get(e);if(!t)throw vt.create("no-app",{appName:e});return t}function wt(){return Array.from(ot.values())}function _t(e){return bt.apply(this,arguments)}function bt(){return(bt=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ot.has(n)){e.next=6;break}return ot.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e,t,n){var r,i=null!==(r=at[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void rt.warn(u.join(" "))}lt(new be("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function It(e,t){if(null!==e&&"function"!==typeof e)throw vt.create("invalid-log-argument");!function(e,t){var n,r=d(Ce);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ne[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Te[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Et(e){var t;t=e,Ce.forEach((function(e){e.setLogLevel(t)}))}var Tt="firebase-heartbeat-store",St=null;function Ct(){return St||(St=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=He(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(He(u.result),e.oldVersion,e.newVersion,He(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Tt)}}).catch((function(e){throw vt.create("storage-open",{originalErrorMessage:e.message})}))),St}function Nt(e){return At.apply(this,arguments)}function At(){return At=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct();case 3:return r=e.sent,e.abrupt("return",r.transaction(Tt).objectStore(Tt).get(Dt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),vt.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),At.apply(this,arguments)}function Pt(e,t){return Rt.apply(this,arguments)}function Rt(){return Rt=_e(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct();case 3:return i=e.sent,a=i.transaction(Tt,"readwrite"),o=a.objectStore(Tt),e.next=8,o.put(n,Dt(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),vt.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Rt.apply(this,arguments)}function Dt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ot=function(){function e(t){var n=this;l(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Vt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return f(e,[{key:"triggerHeartbeat",value:function(){var e=_e(me().mark((function e(){var t,n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Lt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=_e(me().mark((function e(){var t,n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Lt(),n=Mt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=R(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Lt(){return(new Date).toISOString().substring(0,10)}function Mt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=d(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),jt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),jt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ft,Ut,Vt=function(){function e(t){l(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return f(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(uS){t(uS)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Nt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Pt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Pt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ke(r.heartbeats),ke(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function jt(e){return R(JSON.stringify({version:2,heartbeats:e})).length}Ft="",lt(new be("platform-logger",(function(e){return new et(e)}),"PRIVATE")),lt(new be("heartbeat",(function(e){return new Ot(e)}),"PRIVATE")),xt(tt,nt,Ft),xt(tt,nt,"esm2017"),xt("fire-js","");var qt=function(){function e(t,n){var r=this;l(this,e),this._delegate=t,this.firebase=n,st(t,new be("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),_t(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){st(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ct(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Bt=(c(Ut={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),c(Ut,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ut),zt=new H("app-compat","Firebase",Bt);var Wt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=gt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(X(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:xt,setLogLevel:Et,onLog:It,apps:null,SDK_VERSION:mt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(lt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw zt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&O(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!X(n,e=e||it))throw zt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(qt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){O(n,e)},createSubscribe:se,ErrorFactory:H,deepExtend:O}),n}(),Kt=new De("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Kt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ht=self.firebase.SDK_VERSION;Ht&&Ht.indexOf("LITE")>=0&&Kt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Gt=Wt;!function(e){xt("@firebase/app-compat","0.1.29",e)}();function Qt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function Yt(){return Yt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Qt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Yt.apply(this,arguments)}Gt.registerVersion("firebase","9.9.0","app-compat");function $t(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Jt;Object.create;var Xt="facebook.com",Zt="github.com",en="google.com",tn="password",nn="twitter.com",rn="EMAIL_SIGNIN",an="PASSWORD_RESET",on="RECOVER_EMAIL",un="REVERT_SECOND_FACTOR_ADDITION",sn="VERIFY_AND_CHANGE_EMAIL",cn="VERIFY_EMAIL";function ln(){return c({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var hn=function(){var e;return c(e={},"admin-restricted-operation","This operation is restricted to administrators only."),c(e,"argument-error",""),c(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),c(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),c(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),c(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),c(e,"cordova-not-ready","Cordova framework is not ready."),c(e,"cors-unsupported","This browser is not supported."),c(e,"credential-already-in-use","This credential is already associated with a different user account."),c(e,"custom-token-mismatch","The custom token corresponds to a different audience."),c(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),c(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),c(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),c(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),c(e,"email-already-in-use","The email address is already in use by another account."),c(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),c(e,"expired-action-code","The action code has expired."),c(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),c(e,"internal-error","An internal AuthError has occurred."),c(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),c(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),c(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),c(e,"invalid-auth-event","An internal AuthError has occurred."),c(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),c(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),c(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),c(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),c(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),c(e,"invalid-email","The email address is badly formatted."),c(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),c(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),c(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),c(e,"invalid-credential","The supplied auth credential is malformed or has expired."),c(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),c(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),c(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),c(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),c(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),c(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),c(e,"wrong-password","The password is invalid or the user does not have a password."),c(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),c(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),c(e,"invalid-provider-id","The specified provider ID is invalid."),c(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),c(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),c(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),c(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),c(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),c(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),c(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),c(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),c(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),c(e,"missing-continue-uri","A continue URL must be provided in the request."),c(e,"missing-iframe-start","An internal AuthError has occurred."),c(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),c(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),c(e,"missing-multi-factor-info","No second factor identifier is provided."),c(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),c(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),c(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),c(e,"app-deleted","This instance of FirebaseApp has been deleted."),c(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),c(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),c(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),c(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),c(e,"no-auth-event","An internal AuthError has occurred."),c(e,"no-such-provider","User was not linked to an account with the given provider."),c(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),c(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),c(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),c(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),c(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),c(e,"provider-already-linked","User can only be linked to one identity for the given provider."),c(e,"quota-exceeded","The project's quota for this operation has been exceeded."),c(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),c(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),c(e,"rejected-credential","The request contains malformed or mismatching credentials."),c(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),c(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),c(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),c(e,"timeout","The operation has timed out."),c(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),c(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),c(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),c(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),c(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),c(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),c(e,"unverified-email","The operation requires a verified email."),c(e,"user-cancelled","The user did not grant your application the permissions it requested."),c(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),c(e,"user-disabled","The user account has been disabled by an administrator."),c(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),c(e,"user-signed-out",""),c(e,"weak-password","The password must be 6 characters long or more."),c(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),c(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},fn=ln,dn=new H("auth","Firebase",ln()),pn=new De("@firebase/auth");function vn(e){if(pn.logLevel<=Te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];pn.error.apply(pn,["Auth (".concat(mt,"): ").concat(e)].concat(n))}}function yn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw wn.apply(void 0,[e].concat(n))}function mn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return wn.apply(void 0,[e].concat(n))}function gn(e,t,n){var r=Object.assign(Object.assign({},fn()),c({},t,n));return new H("auth","Firebase",r).create(t,{appName:e.name})}function kn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&yn(e,"argument-error"),gn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function wn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ke(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ke(o)))}return dn.create.apply(dn,[e].concat(n))}function _n(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw wn.apply(void 0,[t].concat(r))}}function bn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw vn(t),new Error(t)}function xn(e,t){e||bn(t)}var In=new Map;function En(e){xn(e instanceof Function,"Expected a class definition");var t=In.get(e);return t?(xn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,In.set(e,t),t)}function Tn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Sn(){return"http:"===Cn()||"https:"===Cn()}function Cn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Nn=function(){function e(t,n){l(this,e),this.shortDelay=t,this.longDelay=n,xn(n>t,"Short delay should be less than long delay!"),this.isMobile=U()||q()}return f(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Sn()||j()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function An(e,t){xn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Pn=function(){function e(){l(this,e)}return f(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Rn=(c(Jt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),c(Jt,"MISSING_CUSTOM_TOKEN","internal-error"),c(Jt,"INVALID_IDENTIFIER","invalid-email"),c(Jt,"MISSING_CONTINUE_URI","internal-error"),c(Jt,"INVALID_PASSWORD","wrong-password"),c(Jt,"MISSING_PASSWORD","internal-error"),c(Jt,"EMAIL_EXISTS","email-already-in-use"),c(Jt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),c(Jt,"INVALID_IDP_RESPONSE","invalid-credential"),c(Jt,"INVALID_PENDING_TOKEN","invalid-credential"),c(Jt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),c(Jt,"MISSING_REQ_TYPE","internal-error"),c(Jt,"EMAIL_NOT_FOUND","user-not-found"),c(Jt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),c(Jt,"EXPIRED_OOB_CODE","expired-action-code"),c(Jt,"INVALID_OOB_CODE","invalid-action-code"),c(Jt,"MISSING_OOB_CODE","internal-error"),c(Jt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),c(Jt,"INVALID_ID_TOKEN","invalid-user-token"),c(Jt,"TOKEN_EXPIRED","user-token-expired"),c(Jt,"USER_NOT_FOUND","user-token-expired"),c(Jt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),c(Jt,"INVALID_CODE","invalid-verification-code"),c(Jt,"INVALID_SESSION_INFO","invalid-verification-id"),c(Jt,"INVALID_TEMPORARY_PROOF","invalid-credential"),c(Jt,"MISSING_SESSION_INFO","missing-verification-id"),c(Jt,"SESSION_EXPIRED","code-expired"),c(Jt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),c(Jt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),c(Jt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),c(Jt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),c(Jt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),c(Jt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),c(Jt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),c(Jt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),c(Jt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),c(Jt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),c(Jt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Jt),Dn=new Nn(3e4,6e4);function On(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ln(e,t,n,r){return Mn.apply(this,arguments)}function Mn(){return Mn=_e(me().mark((function e(t,n,r,i){var a,o=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Fn(t,a,_e(me().mark((function e(){var a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=ie(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Pn.fetch()(qn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Mn.apply(this,arguments)}function Fn(e,t,n){return Un.apply(this,arguments)}function Un(){return(Un=_e(me().mark((function e(t,n,r){var i,a,o,u,c,l,h,f,d,p;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Rn),n),e.prev=2,a=new Bn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw zn(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),h=s(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw zn(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw zn(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw zn(t,"user-disabled",u);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw gn(t,p,d);case 34:yn(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof K)){e.next=41;break}throw e.t0;case 41:yn(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Vn(e,t,n,r){return jn.apply(this,arguments)}function jn(){return jn=_e(me().mark((function e(t,n,r,i){var a,o,u=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ln(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&yn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),jn.apply(this,arguments)}function qn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?An(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Bn=function(){function e(t){var n=this;l(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(mn(n.auth,"network-request-failed"))}),Dn.get())}))}return f(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function zn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=mn(e,t,r);return i.customData._tokenResponse=n,i}function Wn(e,t){return Kn.apply(this,arguments)}function Kn(){return(Kn=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hn(e,t){return Gn.apply(this,arguments)}function Gn(){return(Gn=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qn(e,t){return Yn.apply(this,arguments)}function Yn(){return(Yn=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Jn(){return Jn=_e(me().mark((function e(t){var n,r,i,a,o,u,s=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ye(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,_n((a=Zn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:$n(Xn(a.auth_time)),issuedAtTime:$n(Xn(a.iat)),expirationTime:$n(Xn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Jn.apply(this,arguments)}function Xn(e){return 1e3*Number(e)}function Zn(e){var t,n=s(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return vn("JWT malformed, contained fewer than 3 sections"),null;try{var o=D(i);return o?JSON.parse(o):(vn("Failed to decode base64 JWT payload"),null)}catch(u){return vn("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function er(e,t){return tr.apply(this,arguments)}function tr(){return tr=_e(me().mark((function e(t,n){var r=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof K&&nr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),tr.apply(this,arguments)}function nr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var rr=function(){function e(t){l(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return f(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(_e(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ir=function(){function e(t,n){l(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return f(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=$n(this.lastLoginAt),this.creationTime=$n(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ar(e){return or.apply(this,arguments)}function or(){return or=_e(me().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,er(t,Qn(r,{idToken:i}));case 6:_n(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?cr(o.providerUserInfo):[],s=sr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ir(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),or.apply(this,arguments)}function ur(){return(ur=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ye(t),e.next=3,ar(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ke(n),ke(t))}function cr(e){return e.map((function(e){var t=e.providerId,n=$t(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function lr(e,t){return hr.apply(this,arguments)}function hr(){return(hr=_e(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn(t,{},_e(me().mark((function e(){var r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=qn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Pn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fr=function(){function e(){l(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return f(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){_n(e.idToken,"internal-error"),_n("undefined"!==typeof e.idToken,"internal-error"),_n("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Zn(e);return _n(t,"internal-error"),_n("undefined"!==typeof t.exp,"internal-error"),_n("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=_e(me().mark((function e(t){var n,r=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],_n(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=_e(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return bn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(_n("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(_n("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(_n("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function dr(e,t){_n("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var pr=function(){function e(t){l(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=$t(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ke(a.providerData):[],this.metadata=new ir(a.createdAt||void 0,a.lastLoginAt||void 0)}return f(e,[{key:"getIdToken",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(_n(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Jn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ur.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(_n(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){_n(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=_e(me().mark((function e(t){var n,r,i=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ar(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,er(this,Wn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,_=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;_n(k&&x,t,"internal-error");var I=fr.fromJSON(this.name,x);_n("string"===typeof k,t,"internal-error"),dr(h,t.name),dr(f,t.name),_n("boolean"===typeof w,t,"internal-error"),_n("boolean"===typeof _,t,"internal-error"),dr(d,t.name),dr(p,t.name),dr(v,t.name),dr(y,t.name),dr(m,t.name),dr(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:w,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(E.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=_e(me().mark((function t(n,r){var i,a,o,u=arguments;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new fr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ar(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),vr=function(){function e(){l(this,e),this.type="NONE",this.storage={}}return f(e,[{key:"_isAvailable",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();vr.type="NONE";var yr=vr;function mr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var gr=function(){function e(t,n,r){l(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=mr(this.userKey,a.apiKey,o),this.fullPersistenceKey=mr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return f(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?pr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=_e(me().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,p,v,y=arguments;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(En(yr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||En(yr),u=mr(i,n.config.apiKey,n.name),s=null,c=d(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return p=pr._fromJSON(n,f),h!==o&&(s=p),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function kr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Er(t))return"Blackberry";if(Tr(t))return"Webos";if(_r(t))return"Safari";if((t.includes("chrome/")||br(t))&&!t.includes("edge/"))return"Chrome";if(Ir(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/firefox\//i.test(e)}function _r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function br(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/crios\//i.test(e)}function xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/iemobile/i.test(e)}function Ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/android/i.test(e)}function Er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/blackberry/i.test(e)}function Tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/webos/i.test(e)}function Sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Cr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return Sr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Nr(){return B()&&10===document.documentMode}function Ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return Sr(e)||Ir(e)||Tr(e)||Er(e)||/windows phone/i.test(e)||xr(e)}function Pr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=kr(F());break;case"Worker":t="".concat(kr(F()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(mt,"/").concat(r)}var Rr=function(){function e(t){l(this,e),this.auth=t,this.queue=[]}return f(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=_e(me().mark((function e(t){var n,r,i,a,o,u,s,c;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=d(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=d(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(uO){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Dr=function(){function e(t,n,r){l(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lr(this),this.idTokenSubscription=new Lr(this),this.beforeStateQueue=new Rr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return f(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=En(t)),this._initializationPromise=this.queue(_e(me().mark((function r(){var i,a;return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,gr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=_e(me().mark((function e(t){var n,r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return _n(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ar(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ye(t):null)&&_n(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=_e(me().mark((function e(t){var n,r=this,i=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&_n(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(_e(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(En(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new H("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=_e(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return _n(n=t&&En(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,gr.create(this,[En(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=_e(me().mark((function e(t){var n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return _n(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return _n(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=_e(me().mark((function e(){var t,n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Or(e){return ye(e)}var Lr=function(){function e(t){var n=this;l(this,e),this.auth=t,this.observer=null,this.addObserver=se((function(e){return n.observer=e}))}return f(e,[{key:"next",get:function(){return _n(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Mr(e,t,n){var r=Or(e);_n(r._canInitEmulator,r,"emulator-config-failed"),_n(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Fr(t),o=function(e){var t=Fr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ur(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:Ur(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Fr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ur(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Vr=function(){function e(t,n){l(this,e),this.providerId=t,this.signInMethod=n}return f(e,[{key:"toJSON",value:function(){return bn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return bn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return bn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return bn("not implemented")}}]),e}();function jr(e,t){return qr.apply(this,arguments)}function qr(){return(qr=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:resetPassword",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Br(e,t){return zr.apply(this,arguments)}function zr(){return(zr=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wr(e,t){return Kr.apply(this,arguments)}function Kr(){return(Kr=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:update",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hr(e,t){return Gr.apply(this,arguments)}function Gr(){return(Gr=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vn(t,"POST","/v1/accounts:signInWithPassword",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qr(e,t){return Yr.apply(this,arguments)}function Yr(){return(Yr=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:sendOobCode",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(e,t){return Jr.apply(this,arguments)}function Jr(){return(Jr=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ei(e,t){return ti.apply(this,arguments)}function ti(){return(ti=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return(ri=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ii(e,t){return ai.apply(this,arguments)}function ai(){return(ai=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vn(t,"POST","/v1/accounts:signInWithEmailLink",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oi(e,t){return ui.apply(this,arguments)}function ui(){return(ui=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vn(t,"POST","/v1/accounts:signInWithEmailLink",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var si=function(e){y(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return l(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return f(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Hr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ii(t,{email:this._email,oobCode:this._password}));case 5:yn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Br(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",oi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:yn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Vr);function ci(e,t){return li.apply(this,arguments)}function li(){return(li=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vn(t,"POST","/v1/accounts:signInWithIdp",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hi=function(e){y(n,e);var t=_(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return f(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ci(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ci(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ci(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ie(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=$t(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Vr);function fi(e,t){return di.apply(this,arguments)}function di(){return(di=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:sendVerificationCode",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pi(){return(pi=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vn(t,"POST","/v1/accounts:signInWithPhoneNumber",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vi(){return(vi=_e(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vn(t,"POST","/v1/accounts:signInWithPhoneNumber",On(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw zn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yi=c({},"USER_NOT_FOUND","user-not-found");function mi(){return(mi=_e(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Vn(t,"POST","/v1/accounts:signInWithPhoneNumber",On(t,r),yi));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gi=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone","phone")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return pi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return vi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return mi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Vr);var ki=function(){function e(t){var n,r,i,a,o,u;l(this,e);var s=ae(oe(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,h=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);_n(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return f(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ae(oe(e)).link,n=t?ae(oe(t)).deep_link_id:null,r=ae(oe(e)).deep_link_id;return(r?ae(oe(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Ax){return null}}}]),e}();var wi=function(){function e(){l(this,e),this.providerId=e.PROVIDER_ID}return f(e,null,[{key:"credential",value:function(e,t){return si._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ki.parseLink(t);return _n(n,"argument-error"),si._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();wi.PROVIDER_ID="password",wi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var _i=function(){function e(t){l(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return f(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),bi=function(e){y(n,e);var t=_(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).scopes=[],e}return f(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ke(this.scopes)}}]),n}(_i),xi=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return _n(e.idToken||e.accessToken,"argument-error"),hi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return _n("providerId"in t&&"signInMethod"in t,"argument-error"),hi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(bi),Ii=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.call(this,"facebook.com")}return f(n,null,[{key:"credential",value:function(e){return hi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ax){return null}}}]),n}(bi);Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ii.PROVIDER_ID="facebook.com";var Ei=function(e){y(n,e);var t=_(n);function n(){var e;return l(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return f(n,null,[{key:"credential",value:function(e,t){return hi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Ax){return null}}}]),n}(bi);Ei.GOOGLE_SIGN_IN_METHOD="google.com",Ei.PROVIDER_ID="google.com";var Ti=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.call(this,"github.com")}return f(n,null,[{key:"credential",value:function(e){return hi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ax){return null}}}]),n}(bi);Ti.GITHUB_SIGN_IN_METHOD="github.com",Ti.PROVIDER_ID="github.com";var Si=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return f(n,[{key:"_getIdTokenResponse",value:function(e){return ci(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ci(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ci(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Vr),Ci=function(e){y(n,e);var t=_(n);function n(e){return l(this,n),_n(e.startsWith("saml."),"argument-error"),t.call(this,e)}return f(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Si.fromJSON(e);return _n(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Si._create(r,n)}catch(i){return null}}}]),n}(_i),Ni=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.call(this,"twitter.com")}return f(n,null,[{key:"credential",value:function(e,t){return hi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Ax){return null}}}]),n}(bi);function Ai(e,t){return Pi.apply(this,arguments)}function Pi(){return(Pi=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vn(t,"POST","/v1/accounts:signUp",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ni.TWITTER_SIGN_IN_METHOD="twitter.com",Ni.PROVIDER_ID="twitter.com";var Ri=function(){function e(t){l(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return f(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=_e(me().mark((function t(n,r,i){var a,o,u,s,c=arguments;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,pr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Di(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=_e(me().mark((function t(n,r,i){var a;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Di(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Di(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Oi(){return Oi=_e(me().mark((function e(t){var n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Or(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Ri({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ai(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Ri._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Oi.apply(this,arguments)}var Li=function(e){y(n,e);var t=_(n);function n(e,r,i,a){var o,u;return l(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(p(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return f(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(K);function Mi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Li._fromErrorAndOperation(e,n,t,r);throw n}))}function Fi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Ui(e,t){return Vi.apply(this,arguments)}function Vi(){return Vi=_e(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ye(t),e.next=3,Bi(!0,r,n);case 3:return e.t0=Hn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Fi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function ji(e,t){return qi.apply(this,arguments)}function qi(){return qi=_e(me().mark((function e(t,n){var r,i,a=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=er,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Ri._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function Bi(e,t,n){return zi.apply(this,arguments)}function zi(){return(zi=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(n);case 2:i=Fi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",_n(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wi(e,t){return Ki.apply(this,arguments)}function Ki(){return Ki=_e(me().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,er(t,Mi(a,o,n,t),r);case 6:return _n((u=e.sent).idToken,a,"internal-error"),_n(s=Zn(u.idToken),a,"internal-error"),c=s.sub,_n(t.uid===c,a,"user-mismatch"),e.abrupt("return",Ri._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&yn(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ki.apply(this,arguments)}function Hi(e,t){return Gi.apply(this,arguments)}function Gi(){return Gi=_e(me().mark((function e(t,n){var r,i,a,o,u=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Mi(t,i,n);case 4:return a=e.sent,e.next=7,Ri._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}function Qi(e,t){return Yi.apply(this,arguments)}function Yi(){return(Yi=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hi(Or(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $i(e,t){return Ji.apply(this,arguments)}function Ji(){return(Ji=_e(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ye(t),e.next=3,Bi(!1,r,n.providerId);case 3:return e.abrupt("return",ji(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(e,t){return Zi.apply(this,arguments)}function Zi(){return(Zi=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wi(ye(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return(ta=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vn(t,"POST","/v1/accounts:signInWithCustomToken",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(){return(na=_e(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Or(t),e.next=3,ea(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Ri._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ra=function(){function e(t,n){l(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return f(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ia._fromServerResponse(e,t):yn(e,"internal-error")}}]),e}(),ia=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return f(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ra);function aa(e,t,n){var r;_n((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),_n("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_n(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(_n(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function oa(){return(oa=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ye(t),a={requestType:"PASSWORD_RESET",email:n},r&&aa(i,a,r),e.next=5,Xr(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(){return(ua=_e(me().mark((function e(t,n,r){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(ye(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(){return(sa=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wr(ye(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ca(e,t){return la.apply(this,arguments)}function la(){return(la=_e(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ye(t),e.next=3,jr(r,{oobCode:n});case 3:i=e.sent,_n(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return _n(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:_n(i.mfaInfo,r,"internal-error");case 13:_n(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ra._fromServerResponse(Or(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ha(){return(ha=_e(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(ye(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(e,t,n){return da.apply(this,arguments)}function da(){return(da=_e(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Or(t),e.next=3,Ai(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Ri._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(){return(pa=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ye(t),a={requestType:"EMAIL_SIGNIN",email:n},_n(r.handleCodeInApp,i,"argument-error"),r&&aa(i,a,r),e.next=6,ei(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(){return(va=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ye(t),_n((a=wi.credentialWithLink(n,r||Tn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Qi(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ya(e,t){return ma.apply(this,arguments)}function ma(){return(ma=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:createAuthUri",On(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ga(){return(ga=_e(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sn()?Tn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,ya(ye(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(){return(ka=_e(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ye(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&aa(r.auth,a,n),e.next=8,$r(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wa(){return(wa=_e(me().mark((function e(t,n,r){var i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ye(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&aa(i.auth,o,r),e.next=8,ni(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _a(e,t){return ba.apply(this,arguments)}function ba(){return(ba=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ln(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(){return(xa=_e(me().mark((function e(t,n){var r,i,a,o,u,s,c;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ye(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,er(a,_a(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(e,t,n){return Ea.apply(this,arguments)}function Ea(){return(Ea=_e(me().mark((function e(t,n,r){var i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,er(t,Br(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ta=f((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};l(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Sa=function(e){y(n,e);var t=_(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this,e,r,i)).username=a,o}return f(n)}(Ta),Ca=function(e){y(n,e);var t=_(n);function n(e,r){return l(this,n),t.call(this,e,"facebook.com",r)}return f(n)}(Ta),Na=function(e){y(n,e);var t=_(n);function n(e,r){return l(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return f(n)}(Sa),Aa=function(e){y(n,e);var t=_(n);function n(e,r){return l(this,n),t.call(this,e,"google.com",r)}return f(n)}(Ta),Pa=function(e){y(n,e);var t=_(n);function n(e,r,i){return l(this,n),t.call(this,e,"twitter.com",r,i)}return f(n)}(Sa);function Ra(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Zn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ta(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ca(a,i);case"github.com":return new Na(a,i);case"google.com":return new Aa(a,i);case"twitter.com":return new Pa(a,i,e.screenName||null);case"custom":case"anonymous":return new Ta(a,null);default:return new Ta(a,r,i)}}(n)}var Da=function(){function e(t,n){l(this,e),this.type=t,this.credential=n}return f(e,[{key:"toJSON",value:function(){return{multiFactorSession:c({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Oa=function(){function e(t,n,r){l(this,e),this.session=t,this.hints=n,this.signInResolver=r}return f(e,[{key:"resolveSignIn",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Or(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ra._fromServerResponse(r,e)}));_n(i.mfaPendingCredential,r,"internal-error");var o=Da._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=_e(me().mark((function e(t){var a,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Ri._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return _n(n.user,r,"internal-error"),e.abrupt("return",Ri._forOperation(n.user,n.operationType,u));case 17:yn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function La(e,t){return Ln(e,"POST","/v2/accounts/mfaEnrollment:start",On(e,t))}var Ma=function(){function e(t){var n=this;l(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ra._fromServerResponse(t.auth,e)})))}))}return f(e,[{key:"getSession",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Da,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=_e(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,er(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=_e(me().mark((function e(t){var n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,er(this.user,Ln(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",On(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Fa=new WeakMap;var Ua="__sak",Va=function(){function e(t,n){l(this,e),this.storageRetriever=t,this.type=n}return f(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ua,"1"),this.storage.removeItem(Ua),Promise.resolve(!0)):Promise.resolve(!1)}catch(Ax){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ja=function(e){y(n,e);var t=_(n);function n(){var e;return l(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=F();return _r(e)||Sr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ar(),e._shouldAllowMigration=!0,e}return f(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Nr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=_e(me().mark((function e(t,r){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt(m(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=_e(me().mark((function e(t){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt(m(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt(m(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Va);ja.type="LOCAL";var qa=ja,Ba=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return f(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Va);Ba.type="SESSION";var za=Ba;function Wa(e){return Promise.all(e.map(function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ka=function(){function e(t){l(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return f(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=_e(me().mark((function e(t){var n,r,i,a,o,u,s,c;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Wa(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ha(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ka.receivers=[];var Ga=function(){function e(t){l(this,e),this.target=t,this.handlers=new Set}return f(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=_e(me().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ha("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Qa(){return window}function Ya(){return"undefined"!==typeof Qa().WorkerGlobalScope&&"function"===typeof Qa().importScripts}function $a(){return Ja.apply(this,arguments)}function Ja(){return(Ja=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Xa(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Za="firebaseLocalStorageDb",eo="firebaseLocalStorage",to="fbase_key",no=function(){function e(t){l(this,e),this.request=t}return f(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function ro(e,t){return e.transaction([eo],t?"readwrite":"readonly").objectStore(eo)}function io(){var e=indexedDB.deleteDatabase(Za);return new no(e).toPromise()}function ao(){var e=indexedDB.open(Za,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(eo,{keyPath:to})}catch(r){n(r)}})),e.addEventListener("success",_e(me().mark((function n(){var r;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(eo)){n.next=12;break}return r.close(),n.next=5,io();case 5:return n.t0=t,n.next=8,ao();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function oo(e,t,n){return uo.apply(this,arguments)}function uo(){return uo=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ro(t,!0).put((c(i={},to,n),c(i,"value",r),i)),e.abrupt("return",new no(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),uo.apply(this,arguments)}function so(e,t){return co.apply(this,arguments)}function co(){return co=_e(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ro(t,!1).get(n),e.next=3,new no(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),co.apply(this,arguments)}function lo(e,t){var n=ro(e,!0).delete(t);return new no(n).toPromise()}var ho=function(){function e(){l(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return f(e,[{key:"_openDb",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,ao();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ya()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=_e(me().mark((function e(){var t=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ka._getInstance(Ya()?self:null),this.receiver._subscribe("keyChanged",function(){var e=_e(me().mark((function e(n,r){var i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=_e(me().mark((function e(){var t,n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$a();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ga(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Xa()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,ao();case 5:return t=e.sent,e.next=8,oo(t,Ua,"1");case 8:return e.next=10,lo(t,Ua);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=_e(me().mark((function e(t,n){var r=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return oo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return so(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=_e(me().mark((function e(t){var n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return lo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=_e(me().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=ro(e,!1).getAll();return new no(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=d(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(_e(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();ho.type="LOCAL";var fo=ho;function po(e,t){return Ln(e,"POST","/v2/accounts/mfaSignIn:start",On(e,t))}function vo(e){return yo.apply(this,arguments)}function yo(){return(yo=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ln(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=mn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function go(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ko=1e12,wo=function(){function e(t){l(this,e),this.auth=t,this.counter=ko,this._widgets=new Map}return f(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new _o(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ko;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ko;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ko,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_o=function(){function e(t,n,r){var i=this;l(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;_n(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return f(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var bo=go("rcb"),xo=new Nn(3e4,6e4),Io="https://www.google.com/recaptcha/api.js?",Eo=function(){function e(){var t;l(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Qa().grecaptcha)||void 0===t?void 0:t.render)}return f(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _n(To(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Qa().grecaptcha):new Promise((function(r,i){var a=Qa().setTimeout((function(){i(mn(e,"network-request-failed"))}),xo.get());Qa()[bo]=function(){Qa().clearTimeout(a),delete Qa()[bo];var o=Qa().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(mn(e,"internal-error"))},mo("".concat(Io,"?").concat(ie({onload:bo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(mn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Qa().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function To(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var So=function(){function e(){l(this,e)}return f(e,[{key:"load",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new wo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Co="recaptcha",No={theme:"light",type:"image"},Ao=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},No),r=arguments.length>2?arguments[2]:void 0;l(this,e),this.parameters=n,this.type=Co,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Or(r),this.isInvisible="invisible"===this.parameters.size,_n("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;_n(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new So:new Eo,this.validateStartingState()}return f(e,[{key:"verify",value:function(){var e=_e(me().mark((function e(){var t,n,r,i=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){_n(!this.parameters.sitekey,this.auth,"argument-error"),_n(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_n("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Qa()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){_n(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=_e(me().mark((function e(){var t,n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _n(Sn()&&!Ya(),this.auth,"internal-error"),e.next=3,Po();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,vo(this.auth);case 8:_n(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return _n(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Po(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Ro=function(){function e(t,n){l(this,e),this.verificationId=t,this.onConfirmation=n}return f(e,[{key:"confirm",value:function(e){var t=gi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Do(){return(Do=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Or(t),e.next=3,Fo(i,n,ye(r));case 3:return a=e.sent,e.abrupt("return",new Ro(a,(function(e){return Qi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e,t,n){return Lo.apply(this,arguments)}function Lo(){return(Lo=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ye(t),e.next=3,Bi(!1,i,"phone");case 3:return e.next=5,Fo(i.auth,n,ye(r));case 5:return a=e.sent,e.abrupt("return",new Ro(a,(function(e){return $i(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mo(){return(Mo=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ye(t),e.next=3,Fo(i.auth,n,ye(r));case 3:return a=e.sent,e.abrupt("return",new Ro(a,(function(e){return Xi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(e,t,n){return Uo.apply(this,arguments)}function Uo(){return Uo=_e(me().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,_n("string"===typeof a,t,"argument-error"),_n(r.type===Co,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return _n("enroll"===u.type,t,"internal-error"),e.next=13,La(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return _n("signin"===u.type,t,"internal-error"),_n(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,po(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,fi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Uo.apply(this,arguments)}function Vo(){return(Vo=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji(ye(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jo=function(){function e(t){l(this,e),this.providerId=e.PROVIDER_ID,this.auth=Or(t)}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return Fo(this.auth,e,ye(t))}}],[{key:"credential",value:function(e,t){return gi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?gi._fromTokenResponse(n,r):null}}]),e}();function qo(e,t){return t?En(t):(_n(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}jo.PROVIDER_ID="phone",jo.PHONE_SIGN_IN_METHOD="phone";var Bo=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this,"custom","custom")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return ci(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ci(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ci(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Vr);function zo(e){return Hi(e.auth,new Bo(e),e.bypassAuthState)}function Wo(e){var t=e.auth,n=e.user;return _n(n,t,"internal-error"),Wi(n,new Bo(e),e.bypassAuthState)}function Ko(e){return Ho.apply(this,arguments)}function Ho(){return(Ho=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,_n(r=t.user,n,"internal-error"),e.abrupt("return",ji(r,new Bo(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Go=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return f(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=_e(me().mark((function t(n,r){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=_e(me().mark((function e(t){var n,r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zo;case"linkViaPopup":case"linkViaRedirect":return Ko;case"reauthViaPopup":case"reauthViaRedirect":return Wo;default:yn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Qo=new Nn(2e3,1e4);function Yo(e,t,n){return $o.apply(this,arguments)}function $o(){return($o=_e(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Or(t),kn(t,n,_i),a=qo(i,r),o=new eu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(){return(Jo=_e(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kn((i=ye(t)).auth,n,_i),a=qo(i.auth,r),o=new eu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(e,t,n){return Zo.apply(this,arguments)}function Zo(){return(Zo=_e(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kn((i=ye(t)).auth,n,_i),a=qo(i.auth,r),o=new eu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eu=function(e){y(n,e);var t=_(n);function n(e,r,i,a,o){var u;return l(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=p(u),u}return f(n,[{key:"executeNotNull",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return _n(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=_e(me().mark((function e(){var t,n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xn(1===this.filter.length,"Popup operations only handle one event"),t=Ha(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(mn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(mn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(mn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Qo.get())}()}}]),n}(Go);eu.currentPopupAction=null;var tu=new Map,nu=function(e){y(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return f(n,[{key:"execute",value:function(){var e=_e(me().mark((function e(){var t,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=tu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ru(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Yt(m(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:tu.set(this.auth._key(),t);case 21:return this.bypassAuthState||tu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=_e(me().mark((function e(t){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Yt(m(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Yt(m(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Go);function ru(e,t){return iu.apply(this,arguments)}function iu(){return(iu=_e(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cu(n),i=su(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function au(e,t){return ou.apply(this,arguments)}function ou(){return(ou=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",su(t)._set(cu(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uu(e,t){tu.set(e._key(),t)}function su(e){return En(e._redirectPersistence)}function cu(e){return mr("pendingRedirect",e.config.apiKey,e.name)}function lu(e,t,n){return function(e,t,n){return hu.apply(this,arguments)}(e,t,n)}function hu(){return(hu=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Or(t),kn(t,n,_i),a=qo(i,r),e.next=5,au(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fu(e,t,n){return function(e,t,n){return du.apply(this,arguments)}(e,t,n)}function du(){return(du=_e(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kn((i=ye(t)).auth,n,_i),a=qo(i.auth,r),e.next=5,au(a,i.auth);case 5:return e.next=7,wu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pu(e,t,n){return function(e,t,n){return vu.apply(this,arguments)}(e,t,n)}function vu(){return(vu=_e(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kn((i=ye(t)).auth,n,_i),a=qo(i.auth,r),e.next=5,Bi(!1,i,n.providerId);case 5:return e.next=7,au(a,i.auth);case 7:return e.next=9,wu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yu(e,t){return mu.apply(this,arguments)}function mu(){return(mu=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(t)._initializationPromise;case 2:return e.abrupt("return",gu(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gu(e,t){return ku.apply(this,arguments)}function ku(){return ku=_e(me().mark((function e(t,n){var r,i,a,o,u,s=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Or(t),a=qo(i,n),o=new nu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}function wu(e){return _u.apply(this,arguments)}function _u(){return(_u=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ha("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bu=function(){function e(t){l(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return f(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Iu(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(mn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(xu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function xu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Iu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Eu(e){return Tu.apply(this,arguments)}function Tu(){return Tu=_e(me().mark((function e(t){var n,r=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ln(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Tu.apply(this,arguments)}var Su=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cu=/^https?/;function Nu(){return(Nu=_e(me().mark((function e(t){var n,r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Eu(t);case 4:n=e.sent,r=n.authorizedDomains,i=d(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Au(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:yn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Au(e){var t=Tn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Cu.test(r))return!1;if(Su.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Pu=new Nn(3e4,6e4);function Ru(){var e=Qa().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ke(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Du=null;function Ou(e){return Du=Du||function(e){return new Promise((function(t,n){var r,i,a;function o(){Ru(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ru(),n(mn(e,"network-request-failed"))},timeout:Pu.get()})}if(null===(i=null===(r=Qa().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Qa().gapi)||void 0===a?void 0:a.load)){var u=go("iframefcb");return Qa()[u]=function(){gapi.load?o():n(mn(e,"network-request-failed"))},mo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Du=null,e}))}(e),Du}var Lu=new Nn(5e3,15e3),Mu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uu(e){var t=e.config;_n(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?An(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:mt},i=Fu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ie(r).slice(1))}function Vu(e){return ju.apply(this,arguments)}function ju(){return ju=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ou(t);case 2:return n=e.sent,_n(r=Qa().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Uu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mu,dontclear:!0},(function(e){return new Promise(function(){var n=_e(me().mark((function n(r,i){var a,o,u;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Qa().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=mn(t,"network-request-failed"),o=Qa().setTimeout((function(){i(a)}),Lu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}var qu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bu="_blank",zu="http://localhost",Wu=function(){function e(t){l(this,e),this.window=t,this.associatedEvent=null}return f(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ku(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},qu),{width:r.toString(),height:i.toString(),top:a,left:o}),l=F().toLowerCase();n&&(u=br(l)?Bu:n),wr(l)&&(t=t||zu,c.scrollbars="yes");var h=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Cr(l)&&"_self"!==u)return Hu(t||"",u),new Wu(null);var f=window.open(t||"",u,h);_n(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Wu(f)}function Hu(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Gu="__/auth/handler",Qu="emulator/auth/handler";function Yu(e,t,n,r,i,a){_n(e.config.authDomain,e,"auth-domain-config-required"),_n(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:mt,eventId:i};if(t instanceof _i){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ee(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),h=l[0],f=l[1];o[h]=f}}if(t instanceof bi){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Gu);return An(t,Qu)}(e),"?").concat(ie(p).slice(1))}var $u="webStorageSupport",Ju=function(){function e(){l(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=za,this._completeRedirectFn=gu,this._overrideRedirectResult=uu}return f(e,[{key:"_openPopup",value:function(){var e=_e(me().mark((function e(t,n,r,i){var a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Yu(t,n,r,Tn(),i),e.abrupt("return",Ku(t,o,Ha()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=_e(me().mark((function e(t,n,r,i){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Yu(t,n,r,Tn(),i),Qa().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(xn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vu(t);case 2:return n=e.sent,r=new bu(t),n.register("authEvent",(function(e){return _n(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send($u,{type:$u},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),yn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Nu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ar()||_r()||Sr()}}]),e}(),Xu=Ju,Zu=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone")).credential=e,r}return f(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ln(e,"POST","/v2/accounts/mfaEnrollment:finalize",On(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ln(e,"POST","/v2/accounts/mfaSignIn:finalize",On(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){l(this,e),this.factorId=t}return f(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return bn("unexpected MultiFactorSessionType")}}}]),e}()),es=function(){function e(){l(this,e)}return f(e,null,[{key:"assertion",value:function(e){return Zu._fromCredential(e)}}]),e}();es.FACTOR_ID="phone";var ts,ns="@firebase/auth",rs="0.20.5",is=function(){function e(t){l(this,e),this.auth=t,this.internalListeners=new Map}return f(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){_n(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function as(){return window}ts="Browser",lt(new be("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){_n(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),_n(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:ts,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pr(ts)},i=new Dr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(En);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),lt(new be("auth-internal",(function(e){return function(e){return new is(e)}(Or(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),xt(ns,rs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ts)),xt(ns,rs,"esm2017");function os(e,t,n){return us.apply(this,arguments)}function us(){return us=_e(me().mark((function e(t,n,r){var i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=as(),o=a.BuildInfo,xn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,ds(n.sessionId);case 4:return u=e.sent,s={},Sr()?s.ibi=o.packageName:Ir()?s.apn=o.packageName:yn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Yu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}function ss(){return(ss=_e(me().mark((function e(t){var n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=as(),r=n.BuildInfo,i={},Sr()?i.iosBundleId=r.packageName:Ir()?i.androidPackageName=r.packageName:yn(t,"operation-not-supported-in-this-environment"),e.next=5,Eu(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cs(e){var t=as().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function ls(e,t,n){return hs.apply(this,arguments)}function hs(){return hs=_e(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=as(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(mn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Ir()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),hs.apply(this,arguments)}function fs(e){var t,n,r,i,a,o,u,s,c,l,h=as();_n("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_n("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_n("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_n("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_n("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function ds(e){return ps.apply(this,arguments)}function ps(){return(ps=_e(me().mark((function e(t){var n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vs(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(e){if(xn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var ys=function(e){y(n,e);var t=_(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return f(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Yt(m(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(bu);function ms(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:bs(),postBody:null,tenantId:e.tenantId,error:mn(e,"no-auth-event")}}function gs(e,t){return xs()._set(Is(e),t)}function ks(e){return ws.apply(this,arguments)}function ws(){return(ws=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xs()._get(Is(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,xs()._remove(Is(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _s(e,t){var n,r,i=function(e){var t=Es(e),n=t.link?decodeURIComponent(t.link):void 0,r=Es(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Es(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Es(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?mn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function bs(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function xs(){return En(qa)}function Is(e){return mr("authEvent",e.config.apiKey,e.name)}function Es(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||ge(t)||o(t)||u();r[0];return ae(r.slice(1).join("?"))}var Ts=function(){function e(){l(this,e),this._redirectPersistence=za,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gu,this._overrideRedirectResult=uu}return f(e,[{key:"_initialize",value:function(){var e=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new ys(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){yn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=_e(me().mark((function e(t,n,r,i){var a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fs(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),tu.clear(),e.next=10,this._originValidation(t);case 10:return o=ms(t,r,i),e.next=13,gs(t,o);case 13:return e.next=15,os(t,o,n);case 15:return u=e.sent,e.next=18,cs(u);case 18:return s=e.sent,e.abrupt("return",ls(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ss.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=as(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(_e(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ks(e);case 2:t.onEvent(Cs());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=_e(me().mark((function n(r){var i,a;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,ks(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=_s(i,r.url)),t.onEvent(a||Cs());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");as().handleOpenURL=function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Ss=Ts;function Cs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mn("no-auth-event")}}function Ns(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function As(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return!("file:"!==Ns()&&"ionic:"!==Ns()&&"capacitor:"!==Ns()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ps(){return B()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/Edge\/\d+/.test(e)}function Ds(){try{var e=self.localStorage,t=Ha();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return Ps()||Rs(e)}()||W()}catch(n){return Os()&&W()}return!1}function Os(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Ls(){return("http:"===Ns()||"https:"===Ns()||j()||As())&&!(q()||V())&&Ds()&&!Os()}function Ms(){return As()&&"undefined"!==typeof document}function Fs(){return Us.apply(this,arguments)}function Us(){return(Us=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ms()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vs={LOCAL:"local",NONE:"none",SESSION:"session"},js=_n,qs="persistence";function Bs(e,t){js(Object.values(Vs).includes(t),e,"invalid-persistence-type"),q()?js(t!==Vs.SESSION,e,"unsupported-persistence-type"):V()?js(t===Vs.NONE,e,"unsupported-persistence-type"):Os()?js(t===Vs.NONE||t===Vs.LOCAL&&W(),e,"unsupported-persistence-type"):js(t===Vs.NONE||Ds(),e,"unsupported-persistence-type")}function zs(e){return Ws.apply(this,arguments)}function Ws(){return(Ws=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ks(),r=mr(qs,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ks(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Hs=_n,Gs=function(){function e(){l(this,e),this.browserResolver=En(Xu),this.cordovaResolver=En(Ss),this.underlyingResolver=null,this._redirectPersistence=za,this._completeRedirectFn=gu,this._overrideRedirectResult=uu}return f(e,[{key:"_initialize",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=_e(me().mark((function e(t,n,r,i){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=_e(me().mark((function e(t,n,r,i){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Ms()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Hs(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Fs();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qs(e){return e.unwrap()}function Ys(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new ec(e,function(e,t){var n,r=ye(e),i=t;return _n(t.customData.operationType,r,"argument-error"),_n(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Oa._fromError(r,i)}(e,t));else if(i){var a=$s(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function $s(e){var t=(e instanceof K?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof K)&&"temporaryProof"in t&&"phoneNumber"in t)return jo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===tn)return null;switch(r){case en:n=Ei;break;case Xt:n=Ii;break;case Zt:n=Ti;break;case nn:n=Ni;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Si._create(r,u):hi._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new xi(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof K?n.credentialFromError(e):n.credentialFromResult(e)}function Js(e,t){return t.catch((function(t){throw t instanceof K&&Ys(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,$s(t)),additionalUserInfo:Ra(e),user:tc.getOrCreate(r)}}))}function Xs(e,t){return Zs.apply(this,arguments)}function Zs(){return(Zs=_e(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Js(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ec=function(){function e(t,n){l(this,e),this.resolver=n,this.auth=t.wrapped()}return f(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Js(Qs(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),tc=function(){function e(t){l(this,e),this._delegate=t,this.multiFactor=function(e){var t=ye(e);return Fa.has(t)||Fa.set(t,Ma._fromUser(t)),Fa.get(t)}(t)}return f(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(this.auth,$i(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xs(this.auth,Oo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(this.auth,Xo(this._delegate,t,Gs)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zs(Or(this.auth));case 2:return e.abrupt("return",pu(this._delegate,t,Gs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(this.auth,Xi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Xs(this.auth,function(e,t,n){return Mo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Js(this.auth,function(e,t,n){return Jo.apply(this,arguments)}(this._delegate,e,Gs))}},{key:"reauthenticateWithRedirect",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zs(Or(this.auth));case 2:return e.abrupt("return",fu(this._delegate,t,Gs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ka.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ui(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Ia(ye(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Ia(ye(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Vo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return xa.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return wa.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();tc.USER_MAP=new WeakMap;var nc=_n,rc=function(){function e(t,n){if(l(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;nc(r,"invalid-api-key",{appName:t.name}),nc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Gs:void 0;this._delegate=n.initialize({options:{persistence:ac(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(hn),this.linkUnderlyingAuth()}return f(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?tc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Mr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return sa.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ca(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ua.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Js(this._delegate,fa(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return ga.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ki.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nc(Ls(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,yu(this._delegate,Gs);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Js(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Or(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ic(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ic(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return pa.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return oa.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Bs(this._delegate,t),e.t0=t,e.next=e.t0===Vs.SESSION?4:e.t0===Vs.LOCAL?6:e.t0===Vs.NONE?11:13;break;case 4:return n=za,e.abrupt("break",14);case 6:return e.next=8,En(fo)._isAvailable();case 8:return r=e.sent,n=r?fo:qa,e.abrupt("break",14);case 11:return n=yr,e.abrupt("break",14);case 13:return e.abrupt("return",yn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Js(this._delegate,function(e){return Oi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Js(this._delegate,Qi(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Js(this._delegate,function(e,t){return na.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Js(this._delegate,function(e,t,n){return Qi(ye(e),wi.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Js(this._delegate,function(e,t,n){return va.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Xs(this._delegate,function(e,t,n){return Do.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nc(Ls(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Js(this._delegate,Yo(this._delegate,t,Gs)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nc(Ls(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,zs(this._delegate);case 3:return e.abrupt("return",lu(this._delegate,t,Gs));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return ha.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function ic(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&tc.getOrCreate(e))},error:t,complete:n}}function ac(e,t){var n=function(e,t){var n=Ks();if(!n)return[];var r=mr(qs,e,t);switch(n.getItem(r)){case Vs.NONE:return[yr];case Vs.LOCAL:return[fo,za];case Vs.SESSION:return[za];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(fo)||n.push(fo),"undefined"!==typeof window)for(var r=0,i=[qa,za];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(yr)||n.push(yr),n}rc.Persistence=Vs;var oc=function(){function e(){l(this,e),this.providerId="phone",this._delegate=new jo(Qs(Gt.auth()))}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return jo.credential(e,t)}}]),e}();oc.PHONE_SIGN_IN_METHOD=jo.PHONE_SIGN_IN_METHOD,oc.PROVIDER_ID=jo.PROVIDER_ID;var uc,sc=_n,cc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gt.app();l(this,e),sc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ao(t,n,i.auth()),this.type=this._delegate.type}return f(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(uc=Gt).INTERNAL.registerComponent(new be("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new rc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:rn,PASSWORD_RESET:an,RECOVER_EMAIL:on,REVERT_SECOND_FACTOR_ADDITION:un,VERIFY_AND_CHANGE_EMAIL:sn,VERIFY_EMAIL:cn}},EmailAuthProvider:wi,FacebookAuthProvider:Ii,GithubAuthProvider:Ti,GoogleAuthProvider:Ei,OAuthProvider:xi,SAMLAuthProvider:Ci,PhoneAuthProvider:oc,PhoneMultiFactorGenerator:es,RecaptchaVerifier:cc,TwitterAuthProvider:Ni,Auth:rc,AuthCredential:Vr,Error:K}).setInstantiationMode("LAZY").setMultipleInstances(!1)),uc.registerVersion("@firebase/auth-compat","0.2.18");var lc,hc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},fc={},dc=dc||{},pc=hc||self;function vc(){}function yc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function mc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var gc="closure_uid_"+(1e9*Math.random()>>>0),kc=0;function wc(e,t,n){return e.call.apply(e.bind,arguments)}function _c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function bc(e,t,n){return(bc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wc:_c).apply(null,arguments)}function xc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ic(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ec(){this.s=this.s,this.o=this.o}var Tc={};Ec.prototype.s=!1,Ec.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,gc)&&e[gc]||(e[gc]=++kc)}(this);delete Tc[e]}},Ec.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Sc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Cc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Nc(e){return Array.prototype.concat.apply([],arguments)}function Ac(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Pc(e){return/^[\s\xa0]*$/.test(e)}var Rc,Dc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Oc(e,t){return-1!=e.indexOf(t)}function Lc(e,t){return e<t?-1:e>t?1:0}e:{var Mc=pc.navigator;if(Mc){var Fc=Mc.userAgent;if(Fc){Rc=Fc;break e}}Rc=""}function Uc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Vc(e){var t={};for(var n in e)t[n]=e[n];return t}var jc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<jc.length;a++)n=jc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Bc(e){return Bc[" "](e),e}Bc[" "]=vc;var zc,Wc=Oc(Rc,"Opera"),Kc=Oc(Rc,"Trident")||Oc(Rc,"MSIE"),Hc=Oc(Rc,"Edge"),Gc=Hc||Kc,Qc=Oc(Rc,"Gecko")&&!(Oc(Rc.toLowerCase(),"webkit")&&!Oc(Rc,"Edge"))&&!(Oc(Rc,"Trident")||Oc(Rc,"MSIE"))&&!Oc(Rc,"Edge"),Yc=Oc(Rc.toLowerCase(),"webkit")&&!Oc(Rc,"Edge");function $c(){var e=pc.document;return e?e.documentMode:void 0}e:{var Jc="",Xc=function(){var e=Rc;return Qc?/rv:([^\);]+)(\)|;)/.exec(e):Hc?/Edge\/([\d\.]+)/.exec(e):Kc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Yc?/WebKit\/(\S+)/.exec(e):Wc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Xc&&(Jc=Xc?Xc[1]:""),Kc){var Zc=$c();if(null!=Zc&&Zc>parseFloat(Jc)){zc=String(Zc);break e}}zc=Jc}var el,tl={};function nl(){return function(e){var t=tl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Dc(String(zc)).split("."),n=Dc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Lc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Lc(0==a[2].length,0==o[2].length)||Lc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(pc.document&&Kc){var rl=$c();el=rl||(parseInt(zc,10)||void 0)}else el=void 0;var il=el,al=function(){if(!pc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{pc.addEventListener("test",vc,t),pc.removeEventListener("test",vc,t)}catch(n){}return e}();function ol(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ul(e,t){if(ol.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Qc){e:{try{Bc(t.nodeName);var i=!0;break e}catch(ZD){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:sl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ul.Z.h.call(this)}}ol.prototype.h=function(){this.defaultPrevented=!0},Ic(ul,ol);var sl={2:"touch",3:"pen",4:"mouse"};ul.prototype.h=function(){ul.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var cl="closure_listenable_"+(1e6*Math.random()|0),ll=0;function hl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ll,this.ca=this.fa=!1}function fl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function dl(e){this.src=e,this.g={},this.h=0}function pl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Sc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(fl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function vl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}dl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=vl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new hl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var yl="closure_lm_"+(1e6*Math.random()|0),ml={};function gl(e,t,n,r,i){if(r&&r.once)return wl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)gl(e,t[a],n,r,i);return null}return n=Sl(n),e&&e[cl]?e.N(t,n,mc(r)?!!r.capture:!!r,i):kl(e,t,n,!1,r,i)}function kl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=mc(i)?!!i.capture:!!i,u=El(e);if(u||(e[yl]=u=new dl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Il;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)al||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(xl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function wl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)wl(e,t[a],n,r,i);return null}return n=Sl(n),e&&e[cl]?e.O(t,n,mc(r)?!!r.capture:!!r,i):kl(e,t,n,!0,r,i)}function _l(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)_l(e,t[a],n,r,i);else r=mc(r)?!!r.capture:!!r,n=Sl(n),e&&e[cl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=vl(a=e.g[t],n,r,i))&&(fl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=El(e))&&(t=e.g[t.toString()],e=-1,t&&(e=vl(t,n,r,i)),(n=-1<e?t[e]:null)&&bl(n))}function bl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[cl])pl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=El(t))?(pl(n,e),0==n.h&&(n.src=null,t[yl]=null)):fl(e)}}}function xl(e){return e in ml?ml[e]:ml[e]="on"+e}function Il(e,t){if(e.ca)e=!0;else{t=new ul(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&bl(e),e=n.call(r,t)}return e}function El(e){return(e=e[yl])instanceof dl?e:null}var Tl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sl(e){return"function"===typeof e?e:(e[Tl]||(e[Tl]=function(t){return e.handleEvent(t)}),e[Tl])}function Cl(){Ec.call(this),this.i=new dl(this),this.P=this,this.I=null}function Nl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ol(t,e);else if(t instanceof ol)t.target=t.target||e;else{var i=t;qc(t=new ol(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Al(o,r,!0,t)&&i}if(i=Al(o=t.g=e,r,!0,t)&&i,i=Al(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Al(o=t.g=n[a],r,!1,t)&&i}function Al(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&pl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ic(Cl,Ec),Cl.prototype[cl]=!0,Cl.prototype.removeEventListener=function(e,t,n,r){_l(this,e,t,n,r)},Cl.prototype.M=function(){if(Cl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)fl(n[r]);delete t.g[e],t.h--}}this.I=null},Cl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Cl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Pl=pc.JSON.stringify;function Rl(){var e=jl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Dl,Ol=function(){function e(){l(this,e),this.h=this.g=null}return f(e,[{key:"add",value:function(e,t){var n=Ll.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ll=new(function(){function e(t,n){l(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return f(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ml}),(function(e){return e.reset()})),Ml=function(){function e(){l(this,e),this.next=this.g=this.h=null}return f(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Fl(e){pc.setTimeout((function(){throw e}),0)}function Ul(e,t){Dl||function(){var e=pc.Promise.resolve(void 0);Dl=function(){e.then(ql)}}(),Vl||(Dl(),Vl=!0),jl.add(e,t)}var Vl=!1,jl=new Ol;function ql(){for(var e;e=Rl();){try{e.h.call(e.g)}catch(n){Fl(n)}var t=Ll;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Vl=!1}function Bl(e,t){Cl.call(this),this.h=e||1,this.g=t||pc,this.j=bc(this.kb,this),this.l=Date.now()}function zl(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Wl(e,t,n){if("function"===typeof e)n&&(e=bc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=bc(e.handleEvent,e)}return 2147483647<Number(t)?-1:pc.setTimeout(e,t||0)}function Kl(e){e.g=Wl((function(){e.g=null,e.i&&(e.i=!1,Kl(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ic(Bl,Cl),(lc=Bl.prototype).da=!1,lc.S=null,lc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nl(this,"tick"),this.da&&(zl(this),this.start()))}},lc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lc.M=function(){Bl.Z.M.call(this),zl(this),delete this.g};var Hl=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return f(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Kl(this)}},{key:"M",value:function(){Yt(m(n.prototype),"M",this).call(this),this.g&&(pc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ec);function Gl(e){Ec.call(this),this.h=e,this.g={}}Ic(Gl,Ec);var Ql=[];function Yl(e,t,n,r){Array.isArray(n)||(n&&(Ql[0]=n.toString()),n=Ql);for(var i=0;i<n.length;i++){var a=gl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function $l(e){Uc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&bl(e)}),e),e.g={}}function Jl(){this.g=!0}function Xl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Pl(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Gl.prototype.M=function(){Gl.Z.M.call(this),$l(this)},Gl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jl.prototype.Aa=function(){this.g=!1},Jl.prototype.info=function(){};var Zl={},eh=null;function th(){return eh=eh||new Cl}function nh(e){ol.call(this,Zl.Ma,e)}function rh(e){var t=th();Nl(t,new nh(t,e))}function ih(e,t){ol.call(this,Zl.STAT_EVENT,e),this.stat=t}function ah(e){var t=th();Nl(t,new ih(t,e))}function oh(e,t){ol.call(this,Zl.Na,e),this.size=t}function uh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return pc.setTimeout((function(){e()}),t)}Zl.Ma="serverreachability",Ic(nh,ol),Zl.STAT_EVENT="statevent",Ic(ih,ol),Zl.Na="timingevent",Ic(oh,ol);var sh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ch={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function lh(){}function hh(e){return e.h||(e.h=e.i())}function fh(){}lh.prototype.h=null;var dh,ph={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vh(){ol.call(this,"d")}function yh(){ol.call(this,"c")}function mh(){}function gh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Gl(this),this.P=wh,e=Gc?125:void 0,this.W=new Bl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new kh}function kh(){this.i=null,this.g="",this.h=!1}Ic(vh,ol),Ic(yh,ol),Ic(mh,lh),mh.prototype.g=function(){return new XMLHttpRequest},mh.prototype.i=function(){return{}},dh=new mh;var wh=45e3,_h={},bh={};function xh(e,t,n){e.K=1,e.v=Hh(jh(t)),e.s=n,e.U=!0,Ih(e,null)}function Ih(e,t){e.F=Date.now(),Ch(e),e.A=jh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),of(n.h,"t",r),e.C=0,n=e.l.H,e.h=new kh,e.g=sd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Hl(bc(e.Ia,e,e.g),e.O)),Yl(e.V,e.g,"readystatechange",e.gb),t=e.H?Vc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),rh(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Eh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Th(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Sh(e,n))==bh){4==t&&(e.o=4,ah(14),i=!1),Xl(e.j,e.m,null,"[Incomplete Response]");break}if(r==_h){e.o=4,ah(15),Xl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Xl(e.j,e.m,r,null),Dh(e,r)}Eh(e)&&r!=bh&&r!=_h&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ah(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ed(t),t.L=!0,ah(11))):(Xl(e.j,e.m,n,"[Invalid Chunked Response]"),Rh(e),Ph(e))}function Sh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?bh:(n=Number(t.substring(n,r)),isNaN(n)?_h:(r+=1)+n>t.length?bh:(t=t.substr(r,n),e.C=r+n,t))}function Ch(e){e.Y=Date.now()+e.P,Nh(e,e.P)}function Nh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=uh(bc(e.eb,e),t)}function Ah(e){e.B&&(pc.clearTimeout(e.B),e.B=null)}function Ph(e){0==e.l.G||e.I||rd(e.l,e)}function Rh(e){Ah(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,zl(e.W),$l(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Dh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||pf(n.i,e)))if(n.I=e.N,!e.J&&pf(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;nd(n),Kf(n)}Zf(n),ah(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=uh(bc(n.ab,n),6e3));if(1>=df(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else ad(n,11)}else if((e.J||n.g==e)&&nd(n),!Pc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Oc(l,"spdy")||Oc(l,"quic")||Oc(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(vf(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Kh(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=ud(r,r.H?r.la:null,r.W),d.J){yf(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Ah(p),Ch(p)),r.g=d}else Xf(r);0<n.l.length&&Qf(n)}else"stop"!=a[0]&&"close"!=a[0]||ad(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ad(n,7):Wf(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}rh(4)}catch(a){}}function Oh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(yc(e)||"string"===typeof e)Cc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(yc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(yc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Lh(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Lh)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Mh(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Fh(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Fh(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Fh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(lc=gh.prototype).setTimeout=function(e){this.P=e},lc.gb=function(e){e=e.target;var t=this.L;t&&3==Vf(e)?t.l():this.Ia(e)},lc.Ia=function(e){try{if(e==this.g)e:{var t=Vf(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Gc||this.g&&(this.h.h||this.g.ga()||jf(this.g)))){this.I||4!=t||7==n||rh(8==n||0>=r?3:2),Ah(this);var i=this.g.ba();this.N=i;t:if(Eh(this)){var a=jf(this.g);e="";var o=a.length,u=4==Vf(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Rh(this),Ph(this);var s="";break t}this.h.i=new pc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pc(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,ah(12),Rh(this),Ph(this);break e}Xl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Dh(this,i)}this.U?(Th(this,t,s),Gc&&this.i&&3==t&&(Yl(this.V,this.W,"tick",this.fb),this.W.start())):(Xl(this.j,this.m,s,null),Dh(this,s)),4==t&&Rh(this),this.i&&!this.I&&(4==t?rd(this.l,this):(this.i=!1,Ch(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,ah(12)):(this.o=0,ah(13)),Rh(this),Ph(this)}}}catch(t){}},lc.fb=function(){if(this.g){var e=Vf(this.g),t=this.g.ga();this.C<t.length&&(Ah(this),Th(this,e,t),this.i&&4!=e&&Ch(this))}},lc.cancel=function(){this.I=!0,Rh(this)},lc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(rh(3),ah(17)),Rh(this),this.o=2,Ph(this)):Nh(this,this.Y-e)},(lc=Lh.prototype).R=function(){Mh(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},lc.T=function(){return Mh(this),this.g.concat()},lc.get=function(e,t){return Fh(this.h,e)?this.h[e]:t},lc.set=function(e,t){Fh(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},lc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Uh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vh(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Vh){this.g=void 0!==t?t:e.g,qh(this,e.j),this.s=e.s,Bh(this,e.i),zh(this,e.m),this.l=e.l,t=e.h;var n=new tf;n.i=t.i,t.g&&(n.g=new Lh(t.g),n.h=t.h),Wh(this,n),this.o=e.o}else e&&(n=String(e).match(Uh))?(this.g=!!t,qh(this,n[1]||"",!0),this.s=Gh(n[2]||""),Bh(this,n[3]||"",!0),zh(this,n[4]),this.l=Gh(n[5]||"",!0),Wh(this,n[6]||"",!0),this.o=Gh(n[7]||"")):(this.g=!!t,this.h=new tf(null,this.g))}function jh(e){return new Vh(e)}function qh(e,t,n){e.j=n?Gh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Bh(e,t,n){e.i=n?Gh(t,!0):t}function zh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Wh(e,t,n){t instanceof tf?(e.h=t,function(e,t){t&&!e.j&&(nf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(rf(this,t),of(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Qh(t,Zh)),e.h=new tf(t,e.g))}function Kh(e,t,n){e.h.set(t,n)}function Hh(e){return Kh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Gh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Qh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Yh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Vh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Qh(t,$h,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Qh(t,$h,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Qh(n,"/"==n.charAt(0)?Xh:Jh,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Qh(n,ef)),e.join("")};var $h=/[#\/\?@]/g,Jh=/[#\?:]/g,Xh=/[#\?]/g,Zh=/[#\?@]/g,ef=/#/g;function tf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function nf(e){e.g||(e.g=new Lh,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function rf(e,t){nf(e),t=uf(e,t),Fh(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Fh((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Mh(e)))}function af(e,t){return nf(e),t=uf(e,t),Fh(e.g.h,t)}function of(e,t,n){rf(e,t),0<n.length&&(e.i=null,e.g.set(uf(e,t),Ac(n)),e.h+=n.length)}function uf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(lc=tf.prototype).add=function(e,t){nf(this),this.i=null,e=uf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},lc.forEach=function(e,t){nf(this),this.g.forEach((function(n,r){Cc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},lc.T=function(){nf(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},lc.R=function(e){nf(this);var t=[];if("string"===typeof e)af(this,e)&&(t=Nc(t,this.g.get(uf(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Nc(t,e[n])}return t},lc.set=function(e,t){return nf(this),this.i=null,af(this,e=uf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},lc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},lc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var sf=f((function e(t,n){l(this,e),this.h=t,this.g=n}));function cf(e){this.l=e||hf,pc.PerformanceNavigationTiming?e=0<(e=pc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(pc.g&&pc.g.Ea&&pc.g.Ea()&&pc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lf,hf=10;function ff(e){return!!e.h||!!e.g&&e.g.size>=e.j}function df(e){return e.h?1:e.g?e.g.size:0}function pf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function vf(e,t){e.g?e.g.add(t):e.h=t}function yf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function mf(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=d(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Ac(e.i)}function gf(){}function kf(){this.g=new gf}function wf(e,t,n){var r=n||"";try{Oh(e,(function(e,n){var i=e;mc(e)&&(i=Pl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function _f(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(ZD){}}function bf(e){this.l=e.$b||null,this.j=e.ib||!1}function xf(e,t){Cl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=If,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cf.prototype.cancel=function(){if(this.i=mf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=d(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},gf.prototype.stringify=function(e){return pc.JSON.stringify(e,void 0)},gf.prototype.parse=function(e){return pc.JSON.parse(e,void 0)},Ic(bf,lh),bf.prototype.g=function(){return new xf(this.l,this.j)},bf.prototype.i=(lf={},function(){return lf}),Ic(xf,Cl);var If=0;function Ef(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Tf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Sf(e)}function Sf(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(lc=xf.prototype).open=function(e,t){if(this.readyState!=If)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Sf(this)},lc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||pc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},lc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tf(this)),this.readyState=If},lc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Sf(this)),this.g&&(this.readyState=3,Sf(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof pc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ef(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},lc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tf(this):Sf(this),3==this.readyState&&Ef(this)}},lc.Ua=function(e){this.g&&(this.response=this.responseText=e,Tf(this))},lc.Ta=function(e){this.g&&(this.response=e,Tf(this))},lc.ha=function(){this.g&&Tf(this)},lc.setRequestHeader=function(e,t){this.v.append(e,t)},lc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},lc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(xf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Cf=pc.JSON.parse;function Nf(e){Cl.call(this),this.headers=new Lh,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Af,this.K=this.L=!1}Ic(Nf,Cl);var Af="",Pf=/^https?$/i,Rf=["POST","PUT"];function Df(e){return"content-type"==e.toLowerCase()}function Of(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Lf(e),Ff(e)}function Lf(e){e.D||(e.D=!0,Nl(e,"complete"),Nl(e,"error"))}function Mf(e){if(e.h&&"undefined"!=typeof dc&&(!e.C[1]||4!=Vf(e)||2!=e.ba()))if(e.v&&4==Vf(e))Wl(e.Fa,0,e);else if(Nl(e,"readystatechange"),4==Vf(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Uh)[1]||null;if(!a&&pc.self&&pc.self.location){var o=pc.self.location.protocol;a=o.substr(0,o.length-1)}i=!Pf.test(a?a.toLowerCase():"")}t=i}if(t)Nl(e,"complete"),Nl(e,"success");else{e.m=6;try{var u=2<Vf(e)?e.g.statusText:""}catch(YD){u=""}e.j=u+" ["+e.ba()+"]",Lf(e)}}finally{Ff(e)}}}function Ff(e,t){if(e.g){Uf(e);var n=e.g,r=e.C[0]?vc:null;e.g=null,e.C=null,t||Nl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Uf(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(pc.clearTimeout(e.A),e.A=null)}function Vf(e){return e.g?e.g.readyState:0}function jf(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Af:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(aO){return null}}function qf(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Uc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Kh(e,t,n))}function Bf(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zf(e){this.za=0,this.l=[],this.h=new Jl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bf("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bf("baseRetryDelayMs",5e3,e),this.$a=Bf("retryDelaySeedMs",1e4,e),this.Ya=Bf("forwardChannelMaxRetries",2,e),this.ra=Bf("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new cf(e&&e.concurrentRequestLimit),this.Ca=new kf,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Wf(e){if(Hf(e),3==e.G){var t=e.V++,n=jh(e.F);Kh(n,"SID",e.J),Kh(n,"RID",t),Kh(n,"TYPE","terminate"),$f(e,n),(t=new gh(e,e.h,t,void 0)).K=2,t.v=Hh(jh(n)),n=!1,pc.navigator&&pc.navigator.sendBeacon&&(n=pc.navigator.sendBeacon(t.v.toString(),"")),!n&&pc.Image&&((new Image).src=t.v,n=!0),n||(t.g=sd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ch(t)}od(e)}function Kf(e){e.g&&(ed(e),e.g.cancel(),e.g=null)}function Hf(e){Kf(e),e.u&&(pc.clearTimeout(e.u),e.u=null),nd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&pc.clearTimeout(e.m),e.m=null)}function Gf(e,t){e.l.push(new sf(e.Za++,t)),3==e.G&&Qf(e)}function Qf(e){ff(e.i)||e.m||(e.m=!0,Ul(e.Ha,e),e.C=0)}function Yf(e,t){var n;n=t?t.m:e.V++;var r=jh(e.F);Kh(r,"SID",e.J),Kh(r,"RID",n),Kh(r,"AID",e.U),$f(e,r),e.o&&e.s&&qf(r,e.o,e.s),n=new gh(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Jf(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),vf(e.i,n),xh(n,r,t)}function $f(e,t){e.j&&Oh({},(function(e,n){Kh(t,n,e)}))}function Jf(e,t,n){n=Math.min(e.l.length,n);var r=e.j?bc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{wf(l,o,"req"+c+"_")}catch(Md){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Xf(e){e.g||e.u||(e.Y=1,Ul(e.Ga,e),e.A=0)}function Zf(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=uh(bc(e.Ga,e),id(e,e.A)),e.A++,!0)}function ed(e){null!=e.B&&(pc.clearTimeout(e.B),e.B=null)}function td(e){e.g=new gh(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=jh(e.oa);Kh(t,"RID","rpc"),Kh(t,"SID",e.J),Kh(t,"CI",e.N?"0":"1"),Kh(t,"AID",e.U),$f(e,t),Kh(t,"TYPE","xmlhttp"),e.o&&e.s&&qf(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Hh(jh(t)),n.s=null,n.U=!0,Ih(n,e)}function nd(e){null!=e.v&&(pc.clearTimeout(e.v),e.v=null)}function rd(e,t){var n=null;if(e.g==t){nd(e),ed(e),e.g=null;var r=2}else{if(!pf(e.i,t))return;n=t.D,yf(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Nl(r=th(),new oh(r,n,t,i)),Qf(e)}else Xf(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(df(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=uh(bc(e.Ha,e,t),id(e,e.C)),e.C++,!0))}(e,t)||2==r&&Zf(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ad(e,5);break;case 4:ad(e,10);break;case 3:ad(e,6);break;default:ad(e,2)}}function id(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ad(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=bc(e.jb,e);n||(n=new Vh("//www.google.com/images/cleardot.gif"),pc.location&&"http"==pc.location.protocol||qh(n,"https"),Hh(n)),function(e,t){var n=new Jl;if(pc.Image){var r=new Image;r.onload=xc(_f,n,r,"TestLoadImage: loaded",!0,t),r.onerror=xc(_f,n,r,"TestLoadImage: error",!1,t),r.onabort=xc(_f,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=xc(_f,n,r,"TestLoadImage: timeout",!1,t),pc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ah(2);e.G=0,e.j&&e.j.va(t),od(e),Hf(e)}function od(e){e.G=0,e.I=-1,e.j&&(0==mf(e.i).length&&0==e.l.length||(e.i.i.length=0,Ac(e.l),e.l.length=0),e.j.ua())}function ud(e,t,n){var r=function(e){return e instanceof Vh?jh(e):new Vh(e,void 0)}(n);if(""!=r.i)t&&Bh(r,t+"."+r.i),zh(r,r.m);else{var i=pc.location;r=function(e,t,n,r){var i=new Vh(null,void 0);return e&&qh(i,e),t&&Bh(i,t),n&&zh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Uc(e.aa,(function(e,t){Kh(r,t,e)})),t=e.D,n=e.sa,t&&n&&Kh(r,t,n),Kh(r,"VER",e.ma),$f(e,r),r}function sd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Nf(new bf({ib:!0})):new Nf(e.qa)).L=e.H,t}function cd(){}function ld(){if(Kc&&!(10<=Number(il)))throw Error("Environmental error: no available transport.")}function hd(e,t){Cl.call(this),this.g=new zf(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Pc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Pc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new pd(this)}function fd(e){vh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dd(){yh.call(this),this.status=1}function pd(e){this.g=e}(lc=Nf.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():dh.g(),this.C=this.u?hh(this.u):hh(dh),this.g.onreadystatechange=bc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(ZD){return void Of(this,ZD)}e=n||"";var i=new Lh(this.headers);r&&Oh(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Df,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=pc.FormData&&e instanceof pc.FormData,!(0<=Sc(Rf,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Uf(this),0<this.B&&((this.K=function(e){return Kc&&nl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bc(this.pa,this)):this.A=Wl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(ZD){Of(this,ZD)}},lc.pa=function(){"undefined"!=typeof dc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nl(this,"timeout"),this.abort(8))},lc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Nl(this,"complete"),Nl(this,"abort"),Ff(this))},lc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ff(this,!0)),Nf.Z.M.call(this)},lc.Fa=function(){this.s||(this.F||this.v||this.l?Mf(this):this.cb())},lc.cb=function(){Mf(this)},lc.ba=function(){try{return 2<Vf(this)?this.g.status:-1}catch(lf){return-1}},lc.ga=function(){try{return this.g?this.g.responseText:""}catch(lf){return""}},lc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Cf(t)}},lc.Da=function(){return this.m},lc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(lc=zf.prototype).ma=8,lc.G=1,lc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(aO){}},lc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new gh(this,this.h,e,void 0),n=this.s;if(this.P&&(n?qc(n=Vc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Jf(this,t,r),Kh(i=jh(this.F),"RID",e),Kh(i,"CVER",22),this.D&&Kh(i,"X-HTTP-Session-Id",this.D),$f(this,i),this.o&&n&&qf(i,this.o,n),vf(this.i,t),this.Ra&&Kh(i,"TYPE","init"),this.ja?(Kh(i,"$req",r),Kh(i,"SID","null"),t.$=!0,xh(t,i,null)):xh(t,i,r),this.G=2}}else 3==this.G&&(e?Yf(this,e):0==this.l.length||ff(this.i)||Yf(this))},lc.Ga=function(){if(this.u=null,td(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=uh(bc(this.bb,this),e)}},lc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ah(10),Kf(this),td(this))},lc.ab=function(){null!=this.v&&(this.v=null,Kf(this),Zf(this),ah(19))},lc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),ah(2)):(this.h.info("Failed to ping google.com"),ah(1))},(lc=cd.prototype).xa=function(){},lc.wa=function(){},lc.va=function(){},lc.ua=function(){},lc.Oa=function(){},ld.prototype.g=function(e,t){return new hd(e,t)},Ic(hd,Cl),hd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ul(bc(e.hb,e,t))),ah(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ud(e,null,e.W),Qf(e)},hd.prototype.close=function(){Wf(this.g)},hd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Gf(this.g,t)}else this.v?((t={}).__data__=Pl(e),Gf(this.g,t)):Gf(this.g,e)},hd.prototype.M=function(){this.g.j=null,delete this.j,Wf(this.g),delete this.g,hd.Z.M.call(this)},Ic(fd,vh),Ic(dd,yh),Ic(pd,cd),pd.prototype.xa=function(){Nl(this.g,"a")},pd.prototype.wa=function(e){Nl(this.g,new fd(e))},pd.prototype.va=function(e){Nl(this.g,new dd(e))},pd.prototype.ua=function(){Nl(this.g,"b")},ld.prototype.createWebChannel=ld.prototype.g,hd.prototype.send=hd.prototype.u,hd.prototype.open=hd.prototype.m,hd.prototype.close=hd.prototype.close,sh.NO_ERROR=0,sh.TIMEOUT=8,sh.HTTP_ERROR=6,ch.COMPLETE="complete",fh.EventType=ph,ph.OPEN="a",ph.CLOSE="b",ph.ERROR="c",ph.MESSAGE="d",Cl.prototype.listen=Cl.prototype.N,Nf.prototype.listenOnce=Nf.prototype.O,Nf.prototype.getLastError=Nf.prototype.La,Nf.prototype.getLastErrorCode=Nf.prototype.Da,Nf.prototype.getStatus=Nf.prototype.ba,Nf.prototype.getResponseJson=Nf.prototype.Qa,Nf.prototype.getResponseText=Nf.prototype.ga,Nf.prototype.send=Nf.prototype.ea;var vd=fc.createWebChannelTransport=function(){return new ld},yd=fc.getStatEventTarget=function(){return th()},md=fc.ErrorCode=sh,gd=fc.EventType=ch,kd=fc.Event=Zl,wd=fc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_d=fc.FetchXmlHttpFactory=bf,bd=fc.WebChannel=fh,xd=fc.XhrIo=Nf,Id="@firebase/firestore",Ed=function(){function e(t){l(this,e),this.uid=t}return f(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ed.UNAUTHENTICATED=new Ed(null),Ed.GOOGLE_CREDENTIALS=new Ed("google-credentials-uid"),Ed.FIRST_PARTY=new Ed("first-party-uid"),Ed.MOCK_USER=new Ed("mock-user");var Td="9.9.0",Sd=new De("@firebase/firestore");function Cd(){return Sd.logLevel}function Nd(e){if(Sd.logLevel<=Te.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Rd);Sd.debug.apply(Sd,["Firestore (".concat(Td,"): ").concat(e)].concat(ke(i)))}}function Ad(e){if(Sd.logLevel<=Te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Rd);Sd.error.apply(Sd,["Firestore (".concat(Td,"): ").concat(e)].concat(ke(i)))}}function Pd(e){if(Sd.logLevel<=Te.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Rd);Sd.warn.apply(Sd,["Firestore (".concat(Td,"): ").concat(e)].concat(ke(i)))}}function Rd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Dd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Td,") INTERNAL ASSERTION FAILED: ")+e;throw Ad(t),new Error(t)}function Od(e,t){e||Dd()}function Ld(e,t){return e}var Md={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Fd=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return f(n)}(K),Ud=f((function e(){var t=this;l(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Vd=f((function e(t,n){l(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),jd=function(){function e(){l(this,e)}return f(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ed.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),qd=function(){function e(t){l(this,e),this.token=t,this.changeListener=null}return f(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Bd=function(){function e(t){l(this,e),this.t=t,this.currentUser=Ed.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ud;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ud,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Nd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Nd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ud)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Nd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Od("string"==typeof n.accessToken),new Vd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Od(null===e||"string"==typeof e),new Ed(e)}}]),e}(),zd=f((function e(t,n,r){l(this,e),this.type="FirstParty",this.user=Ed.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Wd=function(){function e(t,n,r){l(this,e),this.h=t,this.l=n,this.m=r}return f(e,[{key:"getToken",value:function(){return Promise.resolve(new zd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ed.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Kd=f((function e(t){l(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Hd=function(){function e(t){l(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Nd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Nd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Nd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Nd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Od("string"==typeof t.token),e.p=t.token,new Kd(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Gd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Qd=function(){function e(){l(this,e)}return f(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Gd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Yd(e,t){return e<t?-1:e>t?1:0}function $d(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Jd(e){return e+"\0"}var Xd=function(){function e(t,n){if(l(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Fd(Md.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Fd(Md.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Fd(Md.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Fd(Md.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return f(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Yd(this.nanoseconds,e.nanoseconds):Yd(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Zd=function(){function e(t){l(this,e),this.timestamp=t}return f(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Xd(0,0))}},{key:"max",value:function(){return new e(new Xd(253402300799,999999999))}}]),e}(),ep=function(){function e(t,n,r){l(this,e),void 0===n?n=0:n>t.length&&Dd(),void 0===r?r=t.length-n:r>t.length-n&&Dd(),this.segments=t,this.offset=n,this.len=r}return f(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),tp=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Fd(Md.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ke(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ep),np=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rp=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return np.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Fd(Md.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Fd(Md.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Fd(Md.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Fd(Md.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ep),ip=function(){function e(t){l(this,e),this.path=t}return f(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===tp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(tp.fromString(t))}},{key:"fromName",value:function(t){return new e(tp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(tp.emptyPath())}},{key:"comparator",value:function(e,t){return tp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new tp(t.slice()))}}]),e}(),ap=f((function e(t,n,r,i){l(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function op(e){return e.fields.find((function(e){return 2===e.kind}))}function up(e){return e.fields.filter((function(e){return 2!==e.kind}))}ap.UNKNOWN_ID=-1;var sp=f((function e(t,n){l(this,e),this.fieldPath=t,this.kind=n})),cp=function(){function e(t,n){l(this,e),this.sequenceNumber=t,this.offset=n}return f(e,null,[{key:"empty",value:function(){return new e(0,fp.min())}}]),e}();function lp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zd.fromTimestamp(1e9===r?new Xd(n+1,0):new Xd(n,r));return new fp(i,ip.empty(),t)}function hp(e){return new fp(e.readTime,e.key,-1)}var fp=function(){function e(t,n,r){l(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return f(e,null,[{key:"min",value:function(){return new e(Zd.min(),ip.empty(),-1)}},{key:"max",value:function(){return new e(Zd.max(),ip.empty(),-1)}}]),e}();function dp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ip.comparator(e.documentKey,t.documentKey))?n:Yd(e.largestBatchId,t.largestBatchId)}var pp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vp=function(){function e(){l(this,e),this.onCommittedListeners=[]}return f(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function yp(e){return mp.apply(this,arguments)}function mp(){return mp=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Md.FAILED_PRECONDITION&&t.message===pp){e.next=2;break}throw t;case 2:Nd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),mp.apply(this,arguments)}var gp=function(){function e(t){var n=this;l(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return f(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Dd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=d(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),kp=function(){function e(t,n){var r=this;l(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new Ud,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new bp(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=Sp(e.target.error);r.T.reject(new bp(t,n))}}return f(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(Nd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Ip(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new bp(n,t)}}}]),e}(),wp=function(){function e(t,n,r){l(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(F())&&Ad("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return f(e,[{key:"k",value:function(){var e=_e(me().mark((function e(t){var n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Nd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new bp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Fd(Md.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Fd(Md.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new bp(t,n))},i.onupgradeneeded=function(e){Nd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){Nd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=_e(me().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(me().mark((function e(){var n,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=kp.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),gp.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Nd("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Nd("SimpleDb","Removing database:",e),Ep(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!W())return!1;if(e.S())return!0;var t=F(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/task-management-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),_p=function(){function e(t){l(this,e),this.$=t,this.B=!1,this.L=null}return f(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Ep(this.$.delete())}}]),e}(),bp=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,Md.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return f(n)}(Fd);function xp(e){return"IndexedDbTransactionError"===e.name}var Ip=function(){function e(t){l(this,e),this.store=t}return f(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Nd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Nd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ep(n)}},{key:"add",value:function(e){return Nd("SimpleDb","ADD",this.store.name,e,e),Ep(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ep(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Nd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Nd("SimpleDb","DELETE",this.store.name,e),Ep(this.store.delete(e))}},{key:"count",value:function(){return Nd("SimpleDb","COUNT",this.store.name),Ep(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new gp((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new gp((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){Nd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new gp((function(n,r){t.onerror=function(e){var t=Sp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new gp((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new _p(i),o=t(i.primaryKey,i.value,a);if(o instanceof gp){var u=o.catch((function(e){return a.done(),gp.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return gp.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ep(e){return new gp((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Sp(e.target.error);n(t)}}))}var Tp=!1;function Sp(e){var t=wp.v(F());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Fd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Tp||(Tp=!0,setTimeout((function(){throw r}),0)),r}}return e}var Cp=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.X=n,this.task=null}return f(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;Nd("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Nd,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!xp(e.t4)){e.next=17;break}Nd("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,yp(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Np=function(){function e(t,n){l(this,e),this.localStore=t,this.persistence=n}return f(e,[{key:"tt",value:function(){var e=_e(me().mark((function e(){var t,n=this,r=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return gp.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Nd("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return Nd("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=hp(t);dp(r,n)>0&&(n=r)})),new fp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Ap=function(){function e(t,n){var r=this;l(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return f(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function Pp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Dp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Ap.ot=-1;var Op=function(){function e(t,n){l(this,e),this.comparator=t,this.root=n||Mp.EMPTY}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Mp.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Mp.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Lp(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Lp(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Lp(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Lp(this.root,e,this.comparator,!0)}}]),e}(),Lp=function(){function e(t,n,r,i){l(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return f(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Mp=function(){function e(t,n,r,i,a){l(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Dd();if(this.right.isRed())throw Dd();var e=this.left.check();if(e!==this.right.check())throw Dd();return e+(this.isRed()?0:1)}}]),e}();Mp.EMPTY=null,Mp.RED=!0,Mp.BLACK=!1,Mp.EMPTY=new(function(){function e(){l(this,e),this.size=0}return f(e,[{key:"key",get:function(){throw Dd()}},{key:"value",get:function(){throw Dd()}},{key:"color",get:function(){throw Dd()}},{key:"left",get:function(){throw Dd()}},{key:"right",get:function(){throw Dd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Mp(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Fp=function(){function e(t){l(this,e),this.comparator=t,this.data=new Op(this.comparator)}return f(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Up(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Up(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Up=function(){function e(t){l(this,e),this.iter=t}return f(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Vp(e){return e.hasNext()?e.getNext():void 0}var jp=function(){function e(t){l(this,e),this.fields=t,t.sort(rp.comparator)}return f(e,[{key:"unionWith",value:function(t){var n,r=new Fp(rp.comparator),i=d(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=d(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=d(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return $d(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var qp=function(e){function t(e){l(this,t),this.binaryString=e}return f(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Yd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();qp.EMPTY_BYTE_STRING=new qp("");var Bp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zp(e){if(Od(!!e),"string"==typeof e){var t=0,n=Bp.exec(e);if(Od(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Wp(e.seconds),nanos:Wp(e.nanos)}}function Wp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Kp(e){return"string"==typeof e?qp.fromBase64String(e):qp.fromUint8Array(e)}function Hp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gp(e){var t=e.mapValue.fields.__previous_value__;return Hp(t)?Gp(t):t}function Qp(e){var t=zp(e.mapValue.fields.__local_write_time__.timestampValue);return new Xd(t.seconds,t.nanos)}var Yp=f((function e(t,n,r,i,a,o,u,s){l(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),$p=function(){function e(t,n){l(this,e),this.projectId=t,this.database=n||"(default)"}return f(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Jp(e){return null==e}function Xp(e){return 0===e&&1/e==-1/0}function Zp(e){return"number"==typeof e&&Number.isInteger(e)&&!Xp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ev={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tv={nullValue:"NULL_VALUE"};function nv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Hp(e)?4:yv(e)?9007199254740991:10:Dd()}function rv(e,t){if(e===t)return!0;var n=nv(e);if(n!==nv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qp(e).isEqual(Qp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=zp(e.timestampValue),r=zp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Kp(e.bytesValue).isEqual(Kp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Wp(e.geoPointValue.latitude)===Wp(t.geoPointValue.latitude)&&Wp(e.geoPointValue.longitude)===Wp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Wp(e.integerValue)===Wp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Wp(e.doubleValue),r=Wp(t.doubleValue);return n===r?Xp(n)===Xp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $d(e.arrayValue.values||[],t.arrayValue.values||[],rv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Pp(n)!==Pp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rv(n[i],r[i])))return!1;return!0}(e,t);default:return Dd()}}function iv(e,t){return void 0!==(e.values||[]).find((function(e){return rv(e,t)}))}function av(e,t){if(e===t)return 0;var n=nv(e),r=nv(t);if(n!==r)return Yd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yd(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Wp(e.integerValue||e.doubleValue),r=Wp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ov(e.timestampValue,t.timestampValue);case 4:return ov(Qp(e),Qp(t));case 5:return Yd(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Kp(e),r=Kp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Yd(n[i],r[i]);if(0!==a)return a}return Yd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Yd(Wp(e.latitude),Wp(t.latitude));return 0!==n?n:Yd(Wp(e.longitude),Wp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=av(n[i],r[i]);if(a)return a}return Yd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ev.mapValue&&t===ev.mapValue)return 0;if(e===ev.mapValue)return 1;if(t===ev.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Yd(r[o],a[o]);if(0!==u)return u;var s=av(n[r[o]],i[a[o]]);if(0!==s)return s}return Yd(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Dd()}}function ov(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Yd(e,t);var n=zp(e),r=zp(t),i=Yd(n.seconds,r.seconds);return 0!==i?i:Yd(n.nanos,r.nanos)}function uv(e){return sv(e)}function sv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=zp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Kp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ip.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=d(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=sv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=d(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(sv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Dd();var t,n}function cv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function lv(e){return!!e&&"integerValue"in e}function hv(e){return!!e&&"arrayValue"in e}function fv(e){return!!e&&"nullValue"in e}function dv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pv(e){return!!e&&"mapValue"in e}function vv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Rp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=vv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=vv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function yv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function mv(e){return"nullValue"in e?tv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?cv($p.empty(),ip.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Dd()}function gv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?cv($p.empty(),ip.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ev:Dd()}function kv(e,t){var n=av(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function wv(e,t){var n=av(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var _v=function(){function e(t){l(this,e),this.value=t}return f(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!pv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vv(t)}},{key:"setAll",value:function(e){var t=this,n=rp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=vv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());pv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return rv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];pv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Rp(t,(function(t,n){return e[t]=n}));var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(vv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function bv(e){var t=[];return Rp(e.fields,(function(e,n){var r=new rp([e]);if(pv(n)){var i=bv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=d(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new jp(t)}var xv=function(){function e(t,n,r,i,a,o){l(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return f(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=_v.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=_v.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Zd.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Zd.min(),Zd.min(),_v.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Zd.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Zd.min(),_v.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Zd.min(),_v.empty(),2)}}]),e}(),Iv=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;l(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function Ev(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Iv(e,t,n,r,i,a,o)}function Tv(e){var t=Ld(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+uv(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Jp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return uv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return uv(e)})).join(",")),t.ut=n}return t.ut}function Sv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!zv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!rv(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kv(e.startAt,t.startAt)&&Kv(e.endAt,t.endAt)}function Cv(e){return ip.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Nv(e,t){return e.filters.filter((function(e){return e instanceof Rv&&e.field.isEqual(t)}))}function Av(e,t,n){var r,i=tv,a=!0,o=d(Nv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=tv,c=!0;switch(u.op){case"<":case"<=":s=mv(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=tv}kv({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];kv({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Pv(e,t,n){var r,i=ev,a=!0,o=d(Nv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ev,c=!0;switch(u.op){case">=":case">":s=gv(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=ev}wv({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];wv({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Rv=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(av(t,this.value)):null!==t&&nv(this.value)===nv(t)&&this.at(av(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dd()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Dv(e,t,r):"array-contains"===t?new Fv(e,r):"in"===t?new Uv(e,r):"not-in"===t?new Vv(e,r):"array-contains-any"===t?new jv(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new Ov(e,n):new Lv(e,n)}}]),n}(function(){return f((function e(){l(this,e)}))}()),Dv=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,i)).key=ip.fromName(i.referenceValue),a}return f(n,[{key:"matches",value:function(e){var t=ip.comparator(e.key,this.key);return this.at(t)}}]),n}(Rv),Ov=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"in",r)).keys=Mv("in",r),i}return f(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Rv),Lv=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"not-in",r)).keys=Mv("not-in",r),i}return f(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Rv);function Mv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ip.fromName(e.referenceValue)}))}var Fv=function(e){y(n,e);var t=_(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return hv(t)&&iv(t.arrayValue,this.value)}}]),n}(Rv),Uv=function(e){y(n,e);var t=_(n);function n(e,r){return l(this,n),t.call(this,e,"in",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&iv(this.value.arrayValue,t)}}]),n}(Rv),Vv=function(e){y(n,e);var t=_(n);function n(e,r){return l(this,n),t.call(this,e,"not-in",r)}return f(n,[{key:"matches",value:function(e){if(iv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!iv(this.value.arrayValue,t)}}]),n}(Rv),jv=function(e){y(n,e);var t=_(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains-any",r)}return f(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!hv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return iv(t.value.arrayValue,e)}))}}]),n}(Rv),qv=f((function e(t,n){l(this,e),this.position=t,this.inclusive=n})),Bv=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";l(this,e),this.field=t,this.dir=n}));function zv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Wv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ip.comparator(ip.fromName(o.referenceValue),n.key):av(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Kv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!rv(e.position[n],t.position[n]))return!1;return!0}var Hv=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Gv(e,t,n,r,i,a,o,u){return new Hv(e,t,n,r,i,a,o,u)}function Qv(e){return new Hv(e)}function Yv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function $v(e){var t,n=d(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Jv(e){return null!==e.collectionGroup}function Xv(e){var t=Ld(e);if(null===t.lt){t.lt=[];var n=$v(t),r=Yv(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Bv(n)),t.lt.push(new Bv(rp.keyField(),"asc"));else{var i,a=!1,o=d(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Bv(rp.keyField(),s))}}}return t.lt}function Zv(e){var t=Ld(e);if(!t.ft)if("F"===t.limitType)t.ft=Ev(t.path,t.collectionGroup,Xv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=d(Xv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Bv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new qv(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new qv(t.startAt.position,t.startAt.inclusive):null;t.ft=Ev(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function ey(e,t,n){return new Hv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ty(e,t){return Sv(Zv(e),Zv(t))&&e.limitType===t.limitType}function ny(e){return"".concat(Tv(Zv(e)),"|lt:").concat(e.limitType)}function ry(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(uv(t.value));var t})).join(", "),"]")),Jp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return uv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return uv(e)})).join(",")),"Target(".concat(t,")")}(Zv(e)),"; limitType=").concat(e.limitType,")")}function iy(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ip.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=d(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=d(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Wv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Xv(e),t))&&!(e.endAt&&!function(e,t,n){var r=Wv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Xv(e),t))}(e,t)}function ay(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function oy(e){return function(t,n){var r,i=!1,a=d(Xv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=uy(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function uy(e,t,n){var r=e.field.isKeyField()?ip.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?av(r,i):Dd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dd()}}function sy(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xp(t)?"-0":t}}function cy(e){return{integerValue:""+e}}function ly(e,t){return Zp(t)?cy(t):sy(e,t)}var hy=f((function e(){l(this,e),this._=void 0}));function fy(e,t,n){return e instanceof vy?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yy?my(e,t):e instanceof gy?ky(e,t):function(e,t){var n=py(e,t),r=_y(n)+_y(e._t);return lv(n)&&lv(e._t)?cy(r):sy(e.wt,r)}(e,t)}function dy(e,t,n){return e instanceof yy?my(e,t):e instanceof gy?ky(e,t):n}function py(e,t){return e instanceof wy?lv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var vy=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n)}(hy),yy=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return f(n)}(hy);function my(e,t){var n,r=by(t),i=d(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return rv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var gy=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return f(n)}(hy);function ky(e,t){var n,r=by(t),i=d(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!rv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var wy=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).wt=e,i._t=r,i}return f(n)}(hy);function _y(e){return Wp(e.integerValue||e.doubleValue)}function by(e){return hv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var xy=f((function e(t,n){l(this,e),this.field=t,this.transform=n}));var Iy=f((function e(t,n){l(this,e),this.version=t,this.transformResults=n})),Ey=function(){function e(t,n){l(this,e),this.updateTime=t,this.exists=n}return f(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Ty(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Sy=f((function e(){l(this,e)}));function Cy(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new jy(e.key,Ey.none()):new Dy(e.key,e.data,Ey.none());var n,r=e.data,i=_v.empty(),a=new Fp(rp.comparator),o=d(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Oy(e.key,i,new jp(a.toArray()),Ey.none())}function Ny(e,t,n){e instanceof Dy?function(e,t,n){var r=e.value.clone(),i=My(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Oy?function(e,t,n){if(Ty(e.precondition,t)){var r=My(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ly(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ay(e,t,n,r){return e instanceof Dy?function(e,t,n,r){if(!Ty(e.precondition,t))return n;var i=e.value.clone(),a=Fy(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Oy?function(e,t,n,r){if(!Ty(e.precondition,t))return n;var i=Fy(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ly(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Ty(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Py(e,t){var n,r=null,i=d(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=py(a.transform,o||null);null!=u&&(null===r&&(r=_v.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Ry(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$d(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yy&&t instanceof yy||e instanceof gy&&t instanceof gy?$d(e.elements,t.elements,rv):e instanceof wy&&t instanceof wy?rv(e._t,t._t):e instanceof vy&&t instanceof vy}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Dy=function(e){y(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return l(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Sy),Oy=function(e){y(n,e);var t=_(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return l(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return f(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Sy);function Ly(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function My(e,t,n){var r=new Map;Od(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,dy(o,u,n[i]))}return r}function Fy(e,t,n){var r,i=new Map,a=d(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,fy(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Uy,Vy,jy=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Sy),qy=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Sy),By=f((function e(t){l(this,e),this.count=t}));function zy(e){switch(e){default:return Dd();case Md.CANCELLED:case Md.UNKNOWN:case Md.DEADLINE_EXCEEDED:case Md.RESOURCE_EXHAUSTED:case Md.INTERNAL:case Md.UNAVAILABLE:case Md.UNAUTHENTICATED:return!1;case Md.INVALID_ARGUMENT:case Md.NOT_FOUND:case Md.ALREADY_EXISTS:case Md.PERMISSION_DENIED:case Md.FAILED_PRECONDITION:case Md.ABORTED:case Md.OUT_OF_RANGE:case Md.UNIMPLEMENTED:case Md.DATA_LOSS:return!0}}function Wy(e){if(void 0===e)return Ad("GRPC error has no .code"),Md.UNKNOWN;switch(e){case Uy.OK:return Md.OK;case Uy.CANCELLED:return Md.CANCELLED;case Uy.UNKNOWN:return Md.UNKNOWN;case Uy.DEADLINE_EXCEEDED:return Md.DEADLINE_EXCEEDED;case Uy.RESOURCE_EXHAUSTED:return Md.RESOURCE_EXHAUSTED;case Uy.INTERNAL:return Md.INTERNAL;case Uy.UNAVAILABLE:return Md.UNAVAILABLE;case Uy.UNAUTHENTICATED:return Md.UNAUTHENTICATED;case Uy.INVALID_ARGUMENT:return Md.INVALID_ARGUMENT;case Uy.NOT_FOUND:return Md.NOT_FOUND;case Uy.ALREADY_EXISTS:return Md.ALREADY_EXISTS;case Uy.PERMISSION_DENIED:return Md.PERMISSION_DENIED;case Uy.FAILED_PRECONDITION:return Md.FAILED_PRECONDITION;case Uy.ABORTED:return Md.ABORTED;case Uy.OUT_OF_RANGE:return Md.OUT_OF_RANGE;case Uy.UNIMPLEMENTED:return Md.UNIMPLEMENTED;case Uy.DATA_LOSS:return Md.DATA_LOSS;default:return Dd()}}(Vy=Uy||(Uy={}))[Vy.OK=0]="OK",Vy[Vy.CANCELLED=1]="CANCELLED",Vy[Vy.UNKNOWN=2]="UNKNOWN",Vy[Vy.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vy[Vy.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vy[Vy.NOT_FOUND=5]="NOT_FOUND",Vy[Vy.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vy[Vy.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vy[Vy.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vy[Vy.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vy[Vy.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vy[Vy.ABORTED=10]="ABORTED",Vy[Vy.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vy[Vy.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vy[Vy.INTERNAL=13]="INTERNAL",Vy[Vy.UNAVAILABLE=14]="UNAVAILABLE",Vy[Vy.DATA_LOSS=15]="DATA_LOSS";var Ky=function(){function e(t,n){l(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return f(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Rp(this.inner,(function(t,n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Dp(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Hy=new Op(ip.comparator);function Gy(){return Hy}var Qy=new Op(ip.comparator);function Yy(){for(var e=Qy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function $y(e){var t=Qy;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Jy(){return Zy()}function Xy(){return Zy()}function Zy(){return new Ky((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var em=new Op(ip.comparator),tm=new Fp(ip.comparator);function nm(){for(var e=tm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var rm=new Fp(Yd);function im(){return rm}var am=function(){function e(t,n,r,i,a){l(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return f(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,om.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Zd.min(),r,im(),Gy(),nm())}}]),e}(),om=function(){function e(t,n,r,i,a){l(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return f(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(qp.EMPTY_BYTE_STRING,n,nm(),nm(),nm())}}]),e}(),um=f((function e(t,n,r,i){l(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),sm=f((function e(t,n){l(this,e),this.targetId=t,this.It=n})),cm=f((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),lm=function(){function e(){l(this,e),this.Tt=0,this.Et=dm(),this.At=qp.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return f(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=nm(),t=nm(),n=nm();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Dd()}})),new om(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=dm()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),hm=function(){function e(t){l(this,e),this.Mt=t,this.Ft=new Map,this.$t=Gy(),this.Bt=fm(),this.Lt=new Fp(Yd)}return f(e,[{key:"Ut",value:function(e){var t,n=d(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=d(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:Dd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Cv(i))if(0===n){var a=new ip(i.path);this.Kt(t,a,xv.newNoDocument(a,Zd.min()))}else Od(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Cv(a.target)){var o=new ip(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,xv.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=nm();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new am(e,n,this.Lt,this.$t,r);return this.$t=Gy(),this.Bt=fm(),this.Lt=new Fp(Yd),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new lm,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new Fp(Yd),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||Nd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new lm),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function fm(){return new Op(ip.comparator)}function dm(){return new Op(ip.comparator)}var pm={asc:"ASCENDING",desc:"DESCENDING"},vm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ym=f((function e(t,n){l(this,e),this.databaseId=t,this.dt=n}));function mm(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function gm(e,t){return e.dt?t.toBase64():t.toUint8Array()}function km(e,t){return mm(e,t.toTimestamp())}function wm(e){return Od(!!e),Zd.fromTimestamp(function(e){var t=zp(e);return new Xd(t.seconds,t.nanos)}(e))}function _m(e,t){return function(e){return new tp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function bm(e){var t=tp.fromString(e);return Od(Km(t)),t}function xm(e,t){return _m(e.databaseId,t.path)}function Im(e,t){var n=bm(t);if(n.get(1)!==e.databaseId.projectId)throw new Fd(Md.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Fd(Md.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ip(Cm(n))}function Em(e,t){return _m(e.databaseId,t)}function Tm(e){var t=bm(e);return 4===t.length?tp.emptyPath():Cm(t)}function Sm(e){return new tp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Cm(e){return Od(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Nm(e,t,n){return{name:xm(e,t),fields:n.value.mapValue.fields}}function Am(e,t,n){var r=Im(e,t.name),i=wm(t.updateTime),a=new _v({mapValue:{fields:t.fields}}),o=xv.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Pm(e,t){return"found"in t?function(e,t){Od(!!t.found),t.found.name,t.found.updateTime;var n=Im(e,t.found.name),r=wm(t.found.updateTime),i=new _v({mapValue:{fields:t.found.fields}});return xv.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Od(!!t.missing),Od(!!t.readTime);var n=Im(e,t.missing),r=wm(t.readTime);return xv.newNoDocument(n,r)}(e,t):Dd()}function Rm(e,t){var n;if(t instanceof Dy)n={update:Nm(e,t.key,t.value)};else if(t instanceof jy)n={delete:xm(e,t.key)};else if(t instanceof Oy)n={update:Nm(e,t.key,t.data),updateMask:Wm(t.fieldMask)};else{if(!(t instanceof qy))return Dd();n={verify:xm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof vy)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wy)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Dd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:km(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Dd()}(e,t.precondition)),n}function Dm(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ey.updateTime(wm(e.updateTime)):void 0!==e.exists?Ey.exists(e.exists):Ey.none()}(t.currentDocument):Ey.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Od("REQUEST_TIME"===t.setToServerValue),n=new vy;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new yy(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new gy(i)}else"increment"in t?n=new wy(e,t.increment):Dd();var a=rp.fromServerFormat(t.fieldPath);return new xy(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Im(e,t.update.name),a=new _v({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new jp(t.map((function(e){return rp.fromServerFormat(e)})))}(t.updateMask);return new Oy(i,a,o,n,r)}return new Dy(i,a,n,r)}if(t.delete){var u=Im(e,t.delete);return new jy(u,n)}if(t.verify){var s=Im(e,t.verify);return new qy(s,n)}return Dd()}function Om(e,t){return{documents:[Em(e,t.path)]}}function Lm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Em(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Em(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(dv(e.value))return{unaryFilter:{field:jm(e.field),op:"IS_NAN"}};if(fv(e.value))return{unaryFilter:{field:jm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dv(e.value))return{unaryFilter:{field:jm(e.field),op:"IS_NOT_NAN"}};if(fv(e.value))return{unaryFilter:{field:jm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jm(e.field),op:Vm(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:jm(e.field),direction:Um(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||Jp(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Mm(e){var t=Tm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Od(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Fm(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Bv(qm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Jp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new qv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new qv(n,t)}(n.endAt)),Gv(t,i,u,o,s,"F",c,l)}function Fm(e){return e?void 0!==e.unaryFilter?[zm(e)]:void 0!==e.fieldFilter?[Bm(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Fm(e)})).reduce((function(e,t){return e.concat(t)})):Dd():[]}function Um(e){return pm[e]}function Vm(e){return vm[e]}function jm(e){return{fieldPath:e.canonicalString()}}function qm(e){return rp.fromServerFormat(e.fieldPath)}function Bm(e){return Rv.create(qm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dd()}}(e.fieldFilter.op),e.fieldFilter.value)}function zm(e){switch(e.unaryFilter.op){case"IS_NAN":var t=qm(e.unaryFilter.field);return Rv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=qm(e.unaryFilter.field);return Rv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qm(e.unaryFilter.field);return Rv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qm(e.unaryFilter.field);return Rv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Dd()}}function Wm(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Km(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Hm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Qm(t)),t=Gm(e.get(n),t);return Qm(t)}function Gm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Qm(e){return e+"\x01\x01"}function Ym(e){var t=e.length;if(Od(t>=2),2===t)return Od("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),tp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Dd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Dd()}a=o+2}return new tp(r)}var $m=["userId","batchId"];function Jm(e,t){return[e,Hm(t)]}function Xm(e,t,n){return[e,Hm(t),n]}var Zm={},eg=["prefixPath","collectionGroup","readTime","documentId"],tg=["prefixPath","collectionGroup","documentId"],ng=["collectionGroup","readTime","prefixPath","documentId"],rg=["canonicalId","targetId"],ig=["targetId","path"],ag=["path","targetId"],og=["collectionId","parent"],ug=["indexId","uid"],sg=["uid","sequenceNumber"],cg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lg=["indexId","uid","orderedDocumentKey"],hg=["userId","collectionPath","documentId"],fg=["userId","collectionPath","largestBatchId"],dg=["userId","collectionGroup","largestBatchId"],pg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),vg=[].concat(ke(pg),["documentOverlays"]),yg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mg=yg,gg=[].concat(mg,["indexConfiguration","indexState","indexEntries"]),kg=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return f(n)}(vp);function wg(e,t){var n=Ld(e);return wp.N(n.ee,t)}var _g=function(){function e(t,n,r,i){l(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return f(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ny(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=d(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ay(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=d(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Ay(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Xy();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Cy(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Zd.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),nm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&$d(this.mutations,e.mutations,(function(e,t){return Ry(e,t)}))&&$d(this.baseMutations,e.baseMutations,(function(e,t){return Ry(e,t)}))}}]),e}(),bg=function(){function e(t,n,r,i){l(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return f(e,null,[{key:"from",value:function(t,n,r){Od(t.mutations.length===r.length);for(var i=em,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),xg=function(){function e(t,n){l(this,e),this.largestBatchId=t,this.mutation=n}return f(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Ig=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zd.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zd.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:qp.EMPTY_BYTE_STRING;l(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return f(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Eg=f((function e(t){l(this,e),this.ne=t}));function Tg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Sg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:xm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:mm(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Cg(t.version)};else{if(!t.isUnknownDocument())return Dd();r.unknownDocument={path:n.path.toArray(),version:Cg(t.version)}}return r}function Sg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Cg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ng(e){var t=new Xd(e.seconds,e.nanoseconds);return Zd.fromTimestamp(t)}function Ag(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Dm(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Dm(e.ne,t)})),u=Xd.fromMillis(t.localWriteTimeMs);return new _g(t.batchId,u,n,o)}function Pg(e){var t,n,r=Ng(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Ng(e.lastLimboFreeSnapshotVersion):Zd.min();return void 0!==e.query.documents?(Od(1===(n=e.query).documents.length),t=Zv(Qv(Tm(n.documents[0])))):t=function(e){return Zv(Mm(e))}(e.query),new Ig(t,e.targetId,0,e.lastListenSequenceNumber,r,i,qp.fromBase64String(e.resumeToken))}function Rg(e,t){var n,r=Cg(t.snapshotVersion),i=Cg(t.lastLimboFreeSnapshotVersion);n=Cv(t.target)?Om(e.ne,t.target):Lm(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Tv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Dg(e){var t=Mm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ey(t,t.limit,"L"):t}function Og(e,t){return new xg(t.largestBatchId,Dm(e.ne,t.overlayMutation))}function Lg(e,t){var n=t.path.lastSegment();return[e,Hm(t.path.popLast()),n]}function Mg(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Cg(r.readTime),documentKey:Hm(r.documentKey.path),largestBatchId:r.largestBatchId}}var Fg=function(){function e(){l(this,e)}return f(e,[{key:"getBundleMetadata",value:function(e,t){return Ug(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Ng(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Ug(e).put({bundleId:(n=t).id,createTime:Cg(wm(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Vg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Dg(t.bundledQuery),readTime:Ng(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Vg(e).put(function(e){return{name:e.name,readTime:Cg(wm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Ug(e){return wg(e,"bundles")}function Vg(e){return wg(e,"namedQueries")}var jg=function(){function e(t,n){l(this,e),this.wt=t,this.userId=n}return f(e,[{key:"getOverlay",value:function(e,t){var n=this;return qg(e).get(Lg(this.userId,t)).next((function(e){return e?Og(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Jy();return gp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new xg(t,a);i.push(r.ie(e,o))})),gp.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Hm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(qg(e).W("collectionPathOverlayIndex",i))})),gp.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Jy(),a=Hm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return qg(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Og(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Jy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qg(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Og(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return qg(e).put(function(e,t,n){var r=s(Lg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Rm(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function qg(e){return wg(e,"documentOverlays")}var Bg=function(){function e(){l(this,e)}return f(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Wp(e.integerValue));else if("doubleValue"in e){var n=Wp(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Xp(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Kp(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?yv(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Dd()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),ip.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function zg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Wg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=zg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Bg.ye=new Bg;var Kg=function(){function e(){l(this,e),this.buffer=new Uint8Array(1024),this.position=0}return f(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=Wg(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=Wg(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Hg=function(){function e(t){l(this,e),this.Me=t}return f(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),Gg=function(){function e(t){l(this,e),this.Me=t}return f(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),Qg=function(){function e(){l(this,e),this.Me=new Kg,this.Fe=new Hg(this.Me),this.$e=new Gg(this.Me)}return f(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),Yg=function(){function e(t,n,r,i){l(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return f(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function $g(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Jg(e.arrayValue,t.arrayValue))?n:0!==(n=Jg(e.directionalValue,t.directionalValue))?n:ip.comparator(e.documentKey,t.documentKey)}function Jg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Xg=function(){function e(t){l(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=d(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return f(e,[{key:"Ge",value:function(e){var t=op(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=up(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=d(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Zg=function(){function e(){l(this,e),this.ze=new ek}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),gp.resolve()}},{key:"getCollectionParents",value:function(e,t){return gp.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return gp.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return gp.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return gp.resolve(null)}},{key:"getIndexType",value:function(e,t){return gp.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return gp.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return gp.resolve(null)}},{key:"getMinOffset",value:function(e,t){return gp.resolve(fp.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return gp.resolve(fp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return gp.resolve()}},{key:"updateIndexEntries",value:function(e,t){return gp.resolve()}}]),e}(),ek=function(){function e(){l(this,e),this.index={}}return f(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Fp(tp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Fp(tp.comparator)).toArray()}}]),e}(),tk=new Uint8Array(0),nk=function(){function e(t,n){l(this,e),this.user=t,this.databaseId=n,this.He=new ek,this.Je=new Ky((function(e){return Tv(e)}),(function(e,t){return Sv(e,t)})),this.uid=t.uid||""}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:Hm(i)};return rk(e).put(a)}return gp.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Jd(t),""],!1,!0);return rk(e).K(r).next((function(e){var r,i=d(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Ym(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ak(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=ok(e);return a.next((function(e){o.put(Mg(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ak(e),r=ok(e),i=ik(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=ik(e),i=!0,a=new Map;return gp.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=nm(),o=[];return gp.forEach(a,(function(i,a){var u;Nd("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Tv(t)));var s=function(e,t){var n=op(t);if(void 0===n)return null;var r,i=d(Nv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=d(up(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=d(Nv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=d(up(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Av(e,o.fieldPath,e.startAt):Pv(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new qv(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=d(up(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Pv(e,o.fieldPath,e.endAt):Av(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new qv(r,i)}(a,i),f=n.Ze(i,a,l),p=n.Ze(i,a,h),v=n.tn(i,a,c),y=n.en(i.indexId,s,f,l.inclusive,p,h.inclusive,v);return gp.forEach(y,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=ip.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return gp.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(s){var h=t?u.nn(t[s/c]):tk,f=u.sn(e,h,n[s%c],r),d=u.rn(e,h,i[s%c],a),p=o.map((function(t){return u.sn(e,h,t,!0)}));l.push.apply(l,ke(u.createRange(f,d,p)))},f=0;f<s;++f)h(f);return l}},{key:"sn",value:function(e,t,n,r){var i=new Yg(e,ip.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new Yg(e,ip.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Xg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return gp.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Fp(rp.comparator),r=!1,i=d(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=d(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new Qg,i=d(up(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);Bg.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new Qg;return Bg.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new Qg;return Bg.ye.re(cv(this.databaseId,t),n.Be(function(e){var t=up(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Qg);var i,a=0,o=d(up(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=d(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.cn(t,s.fieldPath)&&hv(c))r=this.an(r,s,c);else{var f=h.Be(s.kind);Bg.ye.re(c,f)}}}catch(p){l.e(p)}finally{l.f()}}}catch(p){o.e(p)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=ke(e),a=[],o=d(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=d(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new Qg;h.seed(l.Oe()),Bg.ye.re(s,h.Be(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Rv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ak(e),i=ok(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return gp.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new cp(t.sequenceNumber,new fp(Ng(t.readTime),new ip(Ym(t.documentKey)),t.largestBatchId)):cp.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new sp(rp.fromServerFormat(n),r)}));return new ap(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Yd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ak(e),a=ok(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return gp.forEach(t,(function(t){return a.put(Mg(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return gp.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?gp.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),gp.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?gp.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return ik(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return ik(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=ik(e),i=new Fp($g);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new Yg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new Fp($g),r=this.on(t,e);if(null==r)return n;var i=op(t);if(null!=i){var a=e.data.field(i.fieldPath);if(hv(a)){var o,u=d(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Yg(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Yg(t.indexId,e.key,tk,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Nd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Vp(a),s=Vp(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Vp(o)):l?(i(u),u=Vp(a)):(u=Vp(a),s=Vp(o))}}(r,i,$g,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),gp.waitFor(o)}},{key:"ln",value:function(e){var t=1;return ok(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return $g(e,t)})).filter((function(e,t,n){return!t||0!==$g(e,n[t-1])}));var r=[];r.push(e);var i,a=d(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=$g(o,e),s=$g(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,tk,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,tk,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(uk)}},{key:"getMinOffset",value:function(e,t){var n=this;return gp.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||Dd()}))})).next(uk)}}]),e}();function rk(e){return wg(e,"collectionParents")}function ik(e){return wg(e,"indexEntries")}function ak(e){return wg(e,"indexConfiguration")}function ok(e){return wg(e,"indexState")}function uk(e){Od(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;dp(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fp(t.readTime,t.documentKey,n)}var sk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ck=function(){function e(t,n,r){l(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return f(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function lk(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Od(1===u)})));var c,l=[],h=d(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,p=Xm(t,f.key.path,n.batchId);a.push(i.delete(p)),l.push(f.key)}}catch(v){h.e(v)}finally{h.f()}return gp.waitFor(a).next((function(){return l}))}function hk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Dd();t=e.noDocument}return JSON.stringify(t).length}ck.DEFAULT_COLLECTION_PERCENTILE=10,ck.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ck.DEFAULT=new ck(41943040,ck.DEFAULT_COLLECTION_PERCENTILE,ck.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ck.DISABLED=new ck(-1,0,0);var fk=function(){function e(t,n,r,i){l(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return f(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pk(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=vk(e),o=pk(e);return o.add({}).next((function(u){Od("number"==typeof u);var s,c=new _g(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Rm(e.ne,t)})),i=n.mutations.map((function(t){return Rm(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),h=[],f=new Fp((function(e,t){return Yd(e.canonicalString(),t.canonicalString())})),p=d(r);try{for(p.s();!(s=p.n()).done;){var v=s.value,y=Xm(i.userId,v.key.path,u);f=f.add(v.key.path.popLast()),h.push(o.put(l)),h.push(a.put(y,Zm))}}catch(m){p.e(m)}finally{p.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),gp.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return pk(e).get(t).next((function(e){return e?(Od(e.userId===n.userId),Ag(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?gp.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return pk(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Od(t.batchId>=r),a=Ag(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return pk(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pk(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return Ag(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Jm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return vk(e).J({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],h=u[2],f=Ym(l);if(c===n.userId&&t.path.isEqual(f))return pk(e).get(h).next((function(e){if(!e)throw Dd();Od(e.userId===n.userId),a.push(Ag(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Fp(Yd),i=[];return t.forEach((function(t){var a=Jm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=vk(e).J({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],h=Ym(c);u===n.userId&&t.path.isEqual(h)?r=r.add(l):a.done()}));i.push(u)})),gp.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Jm(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Fp(Yd);return vk(e).J({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],h=o[2],f=Ym(l);c===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(pk(e).get(t).next((function(e){if(null===e)throw Dd();Od(e.userId===n.userId),r.push(Ag(n.wt,e))})))})),gp.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return lk(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),gp.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return gp.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return vk(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Ym(e[1]);i.push(a)}else r.done()})).next((function(){Od(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return dk(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return yk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return Od(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function dk(e,t,n){var r=Jm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return vk(e).J({range:a,H:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function pk(e){return wg(e,"mutations")}function vk(e){return wg(e,"documentMutations")}function yk(e){return wg(e,"mutationQueues")}var mk=function(){function e(t){l(this,e),this.En=t}return f(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),gk=function(){function e(t,n){l(this,e),this.referenceDelegate=t,this.wt=n}return f(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new mk(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Zd.fromTimestamp(new Xd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return kk(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return Od(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return kk(e).J((function(o,u){var s=Pg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return gp.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return kk(e).J((function(e,n){var r=Pg(n);t(r)}))}},{key:"bn",value:function(e){return wk(e).get("targetGlobalKey").next((function(e){return Od(null!==e),e}))}},{key:"Pn",value:function(e,t){return wk(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return kk(e).put(Rg(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Tv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return kk(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Pg(n);Sv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=_k(e);return t.forEach((function(t){var o=Hm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),gp.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=_k(e);return gp.forEach(t,(function(t){var a=Hm(t.path);return gp.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=_k(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=_k(e),i=nm();return r.J({range:n,H:!0},(function(e,t,n){var r=Ym(e[1]),a=new ip(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Hm(t.path),r=IDBKeyRange.bound([n],[Jd(n)],!1,!0),i=0;return _k(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return kk(e).get(t).next((function(e){return e?Pg(e):null}))}}]),e}();function kk(e){return wg(e,"targets")}function wk(e){return wg(e,"targetGlobal")}function _k(e){return wg(e,"targetDocuments")}function bk(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=Yd(r,o);return 0===c?Yd(i,u):c}var xk=function(){function e(t){l(this,e),this.Sn=t,this.buffer=new Fp(bk),this.Dn=0}return f(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();bk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ik=function(){function e(t,n,r){l(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return f(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;Nd("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!xp(e.t0)){e.next=12;break}Nd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,yp(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Ek=function(){function e(t,n){l(this,e),this.On=t,this.params=n}return f(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return gp.resolve(Ap.ot);var r=new xk(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Nd("LruGarbageCollector","Garbage collection skipped; disabled"),gp.resolve(sk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Nd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),sk):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Nd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Cd()<=Te.DEBUG&&Nd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),gp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Tk=function(){function e(t,n){l(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ek(e,t)}(this,n)}return f(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Sk(e,n)}},{key:"removeReference",value:function(e,t,n){return Sk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Sk(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return yk(e).Y((function(r){return dk(e,r,t).next((function(e){return e&&(n=!0),gp.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Zd.min()),_k(e).delete([0,Hm(o.path)])}))}));i.push(s)}})).next((function(){return gp.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Sk(e,t)}},{key:"Ln",value:function(e,t){var n,r=_k(e),i=Ap.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Ap.ot&&t(new ip(Ym(n)),i),i=c,n=u):i=Ap.ot})).next((function(){i!==Ap.ot&&t(new ip(Ym(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Sk(e,t){return _k(e).put(function(e,t){return{targetId:0,path:Hm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Ck=function(){function e(){l(this,e),this.changes=new Ky((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return f(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,xv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?gp.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Nk=function(){function e(t){l(this,e),this.wt=t}return f(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Dk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Dk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Sg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=xv.newInvalidDocument(t);return Dk(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ok(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:xv.newInvalidDocument(t)};return Dk(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ok(t))},(function(e,i){r={document:n.Kn(t,i),size:hk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Gy();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=Gy(),i=new Op(ip.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,hk(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return gp.resolve();var r=new Fp(Mk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Ok(r.first()),Ok(r.last())),a=r.getIterator(),o=a.getNext();return Dk(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ip.fromSegments([].concat(ke(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Mk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(Ok(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Sg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dk(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Gy(),i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(ip.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Gy(),o=Lk(t,n),u=Lk(t,fp.max());return Dk(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(ip.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Pk(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Rk(e).get("remoteDocumentGlobalKey").next((function(e){return Od(!!e),e}))}},{key:"qn",value:function(e,t){return Rk(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Am(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ip.fromSegments(t.noDocument.path),i=Ng(t.noDocument.readTime);n=xv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Dd();var a=ip.fromSegments(t.unknownDocument.path),o=Ng(t.unknownDocument.version);n=xv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Xd(e[0],e[1]);return Zd.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Zd.min()))return n}return xv.newInvalidDocument(e)}}]),e}();function Ak(e){return new Nk(e)}var Pk=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new Ky((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Fp((function(e,t){return Yd(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Tg(t.zn.wt,o);i=i.add(a.path.popLast());var c=hk(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Tg(t.zn.wt,o.convertToNoDocument(Zd.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),gp.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Ck);function Rk(e){return wg(e,"remoteDocumentGlobal")}function Dk(e){return wg(e,"remoteDocumentsV14")}function Ok(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Lk(e,t){var n=t.documentKey.path.toArray();return[e,Sg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Mk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Yd(n[a],r[a]))return i;return(i=Yd(n.length,r.length))||((i=Yd(n[n.length-2],r[r.length-2]))||Yd(n[n.length-1],r[r.length-1]))}var Fk=f((function e(t,n){l(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Uk=function(){function e(t,n,r,i){l(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return f(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Ay(r.mutation,e,jp.empty(),Xd.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,nm()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nm(),i=Jy();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Yy();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Jy();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,nm())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Gy(),a=Zy(),o=Zy();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Oy)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Ay(o.mutation,t,o.mutation.getFieldMask(),Xd.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Fk(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Zy(),i=new Op((function(e,t){return e-t})),a=nm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=d(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||jp.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||nm()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Xy();c.forEach((function(e){if(!a.has(e)){var n=Cy(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return gp.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ip.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):gp.resolve(Jy()),u=-1,s=a;return o.next((function(t){return gp.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?gp.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,nm())})).next((function(e){return{batchId:u,changes:$y(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ip(t)).next((function(e){var t=Yy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Yy();return this.indexManager.getCollectionParents(e,i).next((function(o){return gp.forEach(o,(function(o){var u=function(e,t){return new Hv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,xv.newInvalidDocument(n)))}));var n=Yy();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Ay(a.mutation,i,jp.empty(),Xd.now()),iy(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):gp.resolve(xv.newInvalidDocument(t))}}]),e}(),Vk=function(){function e(t){l(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return f(e,[{key:"getBundleMetadata",value:function(e,t){return gp.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:wm(n.createTime)}),gp.resolve()}},{key:"getNamedQuery",value:function(e,t){return gp.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Dg(e.bundledQuery),readTime:wm(e.readTime)}}(t)),gp.resolve()}}]),e}(),jk=function(){function e(){l(this,e),this.overlays=new Op(ip.comparator),this.Xn=new Map}return f(e,[{key:"getOverlay",value:function(e,t){return gp.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Jy();return gp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),gp.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),gp.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Jy(),i=t.length+1,a=new ip(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return gp.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Op((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Jy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Jy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return gp.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new xg(t,n));var a=this.Xn.get(t);void 0===a&&(a=nm(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),qk=function(){function e(){l(this,e),this.Zn=new Fp(Bk.ts),this.es=new Fp(Bk.ns)}return f(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Bk(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Bk(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new ip(new tp([])),r=new Bk(n,e),i=new Bk(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new ip(new tp([])),n=new Bk(t,e),r=new Bk(t,e+1),i=nm();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Bk(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Bk=function(){function e(t,n){l(this,e),this.key=t,this.ls=n}return f(e,null,[{key:"ts",value:function(e,t){return ip.comparator(e.key,t.key)||Yd(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Yd(e.ls,t.ls)||ip.comparator(e.key,t.key)}}]),e}(),zk=function(){function e(t,n){l(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Fp(Bk.ts)}return f(e,[{key:"checkEmpty",value:function(e){return gp.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new _g(i,t,n,r);this.mutationQueue.push(a);var o,u=d(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new Bk(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return gp.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return gp.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return gp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return gp.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return gp.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Bk(t,0),i=new Bk(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),gp.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Fp(Yd);return t.forEach((function(e){var t=new Bk(e,0),i=new Bk(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),gp.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ip.isDocumentKey(i)||(i=i.child(""));var a=new Bk(new ip(i),0),o=new Fp(Yd);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),gp.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Od(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return gp.forEach(t.mutations,(function(i){var a=new Bk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Bk(t,0),r=this.ds.firstAfterOrEqual(n);return gp.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,gp.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Wk=function(){function e(t){l(this,e),this.ps=t,this.docs=new Op(ip.comparator),this.size=0}return f(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return gp.resolve(n?n.document.mutableCopy():xv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Gy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():xv.newInvalidDocument(e))})),gp.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Gy(),i=new ip(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||dp(hp(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return gp.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Dd()}},{key:"Is",value:function(e,t){return gp.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Kk(this)}},{key:"getSize",value:function(e){return gp.resolve(this.size)}}]),e}(),Kk=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this)).zn=e,r}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),gp.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Ck),Hk=function(){function e(t){l(this,e),this.persistence=t,this.Ts=new Ky((function(e){return Tv(e)}),Sv),this.lastRemoteSnapshotVersion=Zd.min(),this.highestTargetId=0,this.Es=0,this.As=new qk,this.targetCount=0,this.Rs=mk.An()}return f(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),gp.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return gp.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return gp.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),gp.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),gp.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new mk(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,gp.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),gp.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,gp.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),gp.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return gp.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return gp.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),gp.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),gp.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),gp.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return gp.resolve(n)}},{key:"containsKey",value:function(e,t){return gp.resolve(this.As.containsKey(t))}}]),e}(),Gk=function(){function e(t,n){var r=this;l(this,e),this.bs={},this.overlays={},this.Ps=new Ap(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Hk(this),this.indexManager=new Zg,this.remoteDocumentCache=new Wk((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new Eg(n),this.Ds=new Vk(this.wt)}return f(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new jk,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new zk(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Nd("MemoryPersistence","Starting transaction:",e);var i=new Qk(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return gp.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Qk=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return f(n)}(vp),Yk=function(){function e(t){l(this,e),this.persistence=t,this.ks=new qk,this.Os=null}return f(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw Dd()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),gp.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),gp.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),gp.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gp.forEach(this.Fs,(function(r){var i=ip.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Zd.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return gp.or([function(){return gp.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),$k=function(){function e(t){l(this,e),this.wt=t}return f(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new kp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$m,{unique:!0}),e.createObjectStore("documentMutations")}(e),Jk(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=gp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Jk(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$m,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return gp.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:hg});t.createIndex("collectionPathOverlayIndex",fg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",dg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:eg});t.createIndex("documentKeyIndex",tg),t.createIndex("collectionGroupIndex",ng)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ug}).createIndex("sequenceNumberIndex",sg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:cg}).createIndex("documentKeyIndex",lg,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=hk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return gp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return gp.forEach(r,(function(r){Od(r.userId===n.userId);var i=Ag(t.wt,r);return lk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new tp(n),o=function(e){return[0,Hm(e)]}(a);r.push(t.get(o).next((function(n){return n?gp.resolve():function(n){return t.put({targetId:0,path:Hm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return gp.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:og});var n=t.store("collectionParents"),r=new ek,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Hm(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new tp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],Ym(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=Pg(r),a=Rg(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ip(tp.fromString(i.document.name).popFirst(5)):i.noDocument?ip.fromSegments(i.noDocument.path):i.unknownDocument?ip.fromSegments(i.unknownDocument.path):Dd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return gp.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=Ak(this.wt),a=new Gk(Yk.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:nm();Ag(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),gp.forEach(r,(function(e,r){var o=new Ed(r),u=jg.se(n.wt,o),s=a.getIndexManager(o),c=fk.se(o,n.wt,s,a.referenceDelegate);return new Uk(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new kg(t,Ap.ot),e).next()}))}))}}]),e}();function Jk(e){e.createObjectStore("targetDocuments",{keyPath:ig}).createIndex("documentTargetsIndex",ag,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rg,{unique:!0}),e.createObjectStore("targetGlobal")}var Xk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Zk=function(){function e(t,n,r,i,a,o,u,s,c,h){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(l(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=h,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new Fd(Md.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tk(this,i),this.ei=n+"main",this.wt=new Eg(s),this.ni=new wp(this.ei,this.Hs,new $k(this.wt)),this.Vs=new gk(this.referenceDelegate,this.wt),this.remoteDocumentCache=Ak(this.wt),this.Ds=new Fg,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===h&&Ad("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return f(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Fd(Md.FAILED_PRECONDITION,Xk);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new Ap(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=_e(me().mark((function n(r){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=_e(me().mark((function t(n){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return tw(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(xp(t))return Nd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Nd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return ew(e).get("owner").next((function(e){return gp.resolve(t.di(e))}))}},{key:"_i",value:function(e){return tw(e).delete(this.clientId)}},{key:"wi",value:function(){var e=_e(me().mark((function e(){var t,n,r,i,a=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=wg(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return gp.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=d(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?gp.resolve(!0):ew(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new Fd(Md.FAILED_PRECONDITION,Xk);return!1}}return!(!t.networkEnabled||!t.inForeground)||tw(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Nd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=_e(me().mark((function e(){var t=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new kg(e,Ap.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return tw(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return fk.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new nk(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return jg.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Nd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?gg:14===i?mg:13===i?yg:12===i?vg:11===i?pg:void Dd();return this.ni.runTransaction(e,o,u,(function(i){return a=new kg(i,r.Ps?r.Ps.next():Ap.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw Ad("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new Fd(Md.FAILED_PRECONDITION,pp);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return ew(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Fd(Md.FAILED_PRECONDITION,Xk)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ew(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=ew(e);return n.get("owner").next((function(e){return t.di(e)?(Nd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):gp.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ad("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Nd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ad("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(Ic){Ad("Failed to set zombie client id.",Ic)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(Ic){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return wp.V()}}]),e}();function ew(e){return wg(e,"owner")}function tw(e){return wg(e,"clientMetadata")}function nw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var rw=function(){function e(t,n,r,i){l(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return f(e,null,[{key:"Vi",value:function(t,n){var r,i=nm(),a=nm(),o=d(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),iw=function(){function e(){l(this,e),this.Si=!1}return f(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return gp.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Zd.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(Cd()<=Te.DEBUG&&Nd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ry(t)),i.Mi(e,o,t,lp(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new Fp(oy(e));return t.forEach((function(t,r){iy(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return Cd()<=Te.DEBUG&&Nd("QueryEngine","Using full collection scan to execute query:",ry(t)),this.Di.getDocumentsMatchingQuery(e,t,fp.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),aw=function(){function e(t,n,r,i){l(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new Op(Yd),this.Bi=new Ky((function(e){return Tv(e)}),Sv),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return f(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uk(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function ow(e,t,n,r){return new aw(e,t,n,r)}function uw(e,t){return sw.apply(this,arguments)}function sw(){return sw=_e(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ld(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=nm(),s=d(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=d(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(w){h.e(w)}finally{h.f()}}}catch(w){s.e(w)}finally{s.f()}var p,v=d(n);try{for(v.s();!(p=v.n()).done;){var y=p.value;o.push(y.batchId);var m,g=d(y.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;u=u.add(k.key)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){v.e(w)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),sw.apply(this,arguments)}function cw(e,t){var n=Ld(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=gp.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Od(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=nm(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function lw(e){var t=Ld(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function hw(e,t){var n=Ld(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(qp.EMPTY_BYTE_STRING,Zd.min()).withLastLimboFreeSnapshotVersion(Zd.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=Gy(),s=nm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(fw(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Zd.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return gp.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function fw(e,t,n){var r=nm(),i=nm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Gy();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Zd.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Nd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function dw(e,t){var n=Ld(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function pw(e,t){var n=Ld(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,gp.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new Ig(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function vw(e,t,n){return yw.apply(this,arguments)}function yw(){return yw=_e(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ld(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),xp(e.t1)){e.next=12;break}throw e.t1;case 12:Nd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),yw.apply(this,arguments)}function mw(e,t,n){var r=Ld(e),i=Zd.min(),a=nm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Ld(e),i=r.Bi.get(n);return void 0!==i?gp.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Zv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Zd.min(),n?a:nm())})).next((function(e){return ww(r,ay(t),e),{documents:e,ji:a}}))}))}function gw(e,t){var n=Ld(e),r=Ld(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function kw(e,t){var n=Ld(e),r=n.Li.get(t)||Zd.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,lp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return ww(n,t,e),e}))}function ww(e,t,n){var r=Zd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function _w(e,t,n,r){return bw.apply(this,arguments)}function bw(){return bw=_e(me().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,p,v;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Ld(t),o=nm(),u=Gy(),s=d(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.Wi(l.metadata.name),l.document&&(o=o.add(h)),(f=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(h,f)}catch(y){s.e(y)}finally{s.f()}return p=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,pw(a,function(e){return Zv(Qv(tp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return fw(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function xw(e,t){return Iw.apply(this,arguments)}function Iw(){return Iw=_e(me().mark((function e(t,n){var r,i,a,o=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:nm(),e.next=3,pw(t,Zv(Dg(n.bundledQuery)));case 3:return i=e.sent,a=Ld(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=wm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(qp.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Iw.apply(this,arguments)}function Ew(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Tw(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Sw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Cw=function(){function e(t,n,r,i){l(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return f(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Fd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ad("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Nw=function(){function e(t,n,r){l(this,e),this.targetId=t,this.state=n,this.error=r}return f(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Fd(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ad("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Aw=function(){function e(t,n){l(this,e),this.clientId=t,this.activeTargetIds=n}return f(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=im(),o=0;i&&o<r.activeTargetIds.length;++o)i=Zp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ad("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Pw=function(){function e(t,n){l(this,e),this.clientId=t,this.onlineState=n}return f(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ad("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Rw=function(){function e(){l(this,e),this.activeTargetIds=im()}return f(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Dw=function(){function e(t,n,r,i,a){l(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Op(Yd),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Ew(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Rw),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return f(e,[{key:"start",value:function(){var e=_e(me().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=d(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Ew(this.persistenceKey,i)))&&(o=Aw.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=d(this.ir);try{for(c.s();!(l=c.n()).done;)h=l.value,this.nr(h)}catch(p){c.e(p)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Sw(this.persistenceKey,e));if(n){var r=Nw.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Sw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Nd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Nd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Nd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Nd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Ad("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(_e(me().mark((function e(){var r,i,a,o,u,s,c;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=Ap.ot;if(null!=e)try{var n=JSON.parse(e);Od("number"==typeof n),t=n}catch(e){Ad("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ap.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Cw(this.currentUser,e,t,n),i=Tw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Tw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Sw(this.persistenceKey,e),i=new Nw(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Aw.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Cw.Ji(new Ed(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Nw.Ji(r,t)}},{key:"wr",value:function(e){return Pw.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:Nd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=im();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Ow=function(){function e(){l(this,e),this.Fr=new Rw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return f(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Rw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Lw=function(){function e(){l(this,e)}return f(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Mw=function(){function e(){var t=this;l(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return f(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Nd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=d(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){Nd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=d(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Fw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Uw=function(){function e(t){l(this,e),this.jr=t.jr,this.Wr=t.Wr}return f(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Vw=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return f(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new xd;o.listenOnce(gd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case md.NO_ERROR:var t=o.getResponseJson();Nd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case md.TIMEOUT:Nd("Connection",'RPC "'+e+'" timed out'),a(new Fd(Md.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:var n=o.getStatus();if(Nd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Md).indexOf(t)>=0?t:Md.UNKNOWN}(r.status);a(new Fd(u,r.message))}else a(new Fd(Md.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Fd(Md.UNAVAILABLE,"Connection failed."));break;default:Dd()}}finally{Nd("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=vd(),a=yd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new _d({})),this.uo(o.initMessageHeaders,t,n),U()||q()||F().indexOf("Electron/")>=0||B()||F().indexOf("MSAppHost/")>=0||j()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Nd("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new Uw({jr:function(e){l?Nd("Connection","Not sending because WebChannel is closed:",e):(c||(Nd("Connection","Opening WebChannel transport."),s.open(),c=!0),Nd("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,bd.EventType.OPEN,(function(){l||Nd("Connection","WebChannel transport opened.")})),f(s,bd.EventType.CLOSE,(function(){l||(l=!0,Nd("Connection","WebChannel transport closed"),h.eo())})),f(s,bd.EventType.ERROR,(function(e){l||(l=!0,Pd("Connection","WebChannel transport errored:",e),h.eo(new Fd(Md.UNAVAILABLE,"The operation could not be completed")))})),f(s,bd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Od(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Nd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Uy[e];if(void 0!==t)return Wy(t)}(a),u=i.message;void 0===o&&(o=Md.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.eo(new Fd(o,u)),s.close()}else Nd("Connection","WebChannel received:",n),h.no(n)}})),f(a,kd.STAT_EVENT,(function(e){e.stat===wd.PROXY?Nd("Connection","Detected buffering proxy"):e.stat===wd.NOPROXY&&Nd("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){l(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return f(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Nd("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return Nd("RestConnection","Received: ",e),e}),(function(t){throw Pd("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Td,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Fw[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function jw(){return"undefined"!=typeof window?window:null}function qw(){return"undefined"!=typeof document?document:null}function Bw(e){return new ym(e,!0)}var zw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;l(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return f(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Nd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),Ww=function(){function e(t,n,r,i,a,o,u,s){l(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new zw(t,n)}return f(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Md.RESOURCE_EXHAUSTED?(Ad(n.toString()),Ad("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Md.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Fd(Md.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(_e(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Nd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(Nd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Kw=function(e){y(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return f(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Dd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(Od(void 0===t||"string"==typeof t),qp.fromBase64String(t||"")):(Od(void 0===t||t instanceof Uint8Array),qp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Md.UNKNOWN:Wy(e.code);return new Fd(t,e.message||"")}(o);n=new cm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Im(e,s.document.name),l=wm(s.document.updateTime),h=new _v({mapValue:{fields:s.document.fields}}),f=xv.newFoundDocument(c,l,h),d=s.targetIds||[],p=s.removedTargetIds||[];n=new um(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Im(e,v.document),m=v.readTime?wm(v.readTime):Zd.min(),g=xv.newNoDocument(y,m),k=v.removedTargetIds||[];n=new um([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Im(e,w.document),b=w.removedTargetIds||[];n=new um([],b,_,null)}else{if(!("filter"in t))return Dd();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new By(I),T=x.targetId;n=new sm(T,E)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Zd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Zd.min():t.readTime?wm(t.readTime):Zd.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Sm(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Cv(r)?{documents:Om(e,r)}:{query:Lm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=gm(e,t.resumeToken):t.snapshotVersion.compareTo(Zd.min())>0&&(n.readTime=mm(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Dd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=Sm(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(Ww),Hw=function(e){y(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return f(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Yt(m(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Od(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Od(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?wm(e.updateTime):wm(t);return n.isEqual(Zd.min())&&(n=wm(t)),new Iy(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=wm(e.commitTime);return this.listener.Jo(n,t)}return Od(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Sm(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Rm(t.wt,e)}))};this.Mo(n)}}]),n}(Ww),Gw=function(e){y(n,e);var t=_(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return f(n,[{key:"tu",value:function(){if(this.Zo)throw new Fd(Md.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Md.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Fd(Md.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.bo.ao(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Md.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Fd(Md.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return f((function e(){l(this,e)}))}()),Qw=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return f(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Ad(t),this.su=!1):Nd("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Yw=f((function e(t,n,r,i,a){var o=this;l(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=o_(o),!e.t0){e.next=5;break}return Nd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ld(t)).lu.add(4),e.next=4,Xw(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,$w(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Qw(r,i)}));function $w(e){return Jw.apply(this,arguments)}function Jw(){return Jw=_e(me().mark((function e(t){var n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o_(t)){e.next=18;break}n=d(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Jw.apply(this,arguments)}function Xw(e){return Zw.apply(this,arguments)}function Zw(){return Zw=_e(me().mark((function e(t){var n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Zw.apply(this,arguments)}function e_(e,t){var n=Ld(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),a_(n)?i_(n):L_(n).Co()&&n_(n,t))}function t_(e,t){var n=Ld(e),r=L_(n);n.hu.delete(t),r.Co()&&r_(n,t),0===n.hu.size&&(r.Co()?r.ko():o_(n)&&n._u.set("Unknown"))}function n_(e,t){e.wu.Nt(t.targetId),L_(e).Qo(t)}function r_(e,t){e.wu.Nt(t),L_(e).jo(t)}function i_(e){e.wu=new hm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),L_(e).start(),e._u.iu()}function a_(e){return o_(e)&&!L_(e).Do()&&e.hu.size>0}function o_(e){return 0===Ld(e).lu.size}function u_(e){e.wu=void 0}function s_(e){return c_.apply(this,arguments)}function c_(){return c_=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){n_(t,e)}));case 1:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(e,t){return h_.apply(this,arguments)}function h_(){return h_=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u_(t),a_(t)?(t._u.uu(n),i_(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function f_(e,t,n){return d_.apply(this,arguments)}function d_(){return d_=_e(me().mark((function e(t,n,r){var i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof cm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=_e(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=d(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Nd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,p_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof um?t.wu.Ut(n):n instanceof sm?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Zd.min())){e.next=29;break}return e.prev=14,e.next=17,lw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(qp.EMPTY_BYTE_STRING,n.snapshotVersion)),r_(e,t);var r=new Ig(n.target,t,1,n.sequenceNumber);n_(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Nd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,p_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),d_.apply(this,arguments)}function p_(e,t,n){return v_.apply(this,arguments)}function v_(){return v_=_e(me().mark((function e(t,n,r){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xp(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Xw(t);case 5:t._u.set("Offline"),r||(r=function(){return lw(t.localStore)}),t.asyncQueue.enqueueRetryable(_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,$w(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function y_(e,t){return t().catch((function(n){return p_(e,n,t)}))}function m_(e){return g_.apply(this,arguments)}function g_(){return g_=_e(me().mark((function e(t){var n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ld(t),r=M_(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!k_(n)){e.next=19;break}return e.prev=3,e.next=6,dw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,w_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,p_(n,e.t0);case 17:e.next=2;break;case 19:__(n)&&b_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),g_.apply(this,arguments)}function k_(e){return o_(e)&&e.au.length<10}function w_(e,t){e.au.push(t);var n=M_(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function __(e){return o_(e)&&!M_(e).Do()&&e.au.length>0}function b_(e){M_(e).start()}function x_(e){return I_.apply(this,arguments)}function I_(){return I_=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M_(t).Xo();case 1:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function E_(e){return T_.apply(this,arguments)}function T_(){return T_=_e(me().mark((function e(t){var n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=M_(t),r=d(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),T_.apply(this,arguments)}function S_(e,t,n){return C_.apply(this,arguments)}function C_(){return C_=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=bg.from(i,n,r),e.next=3,y_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,m_(t);case 5:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}function N_(e,t){return A_.apply(this,arguments)}function A_(){return A_=_e(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&M_(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=_e(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zy(i=n.code)||i===Md.ABORTED){e.next=7;break}return r=t.au.shift(),M_(t).No(),e.next=5,y_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,m_(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:__(t)&&b_(t);case 5:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function P_(e,t){return R_.apply(this,arguments)}function R_(){return R_=_e(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Ld(t)).asyncQueue.verifyOperationInProgress(),Nd("RemoteStore","RemoteStore received new credentials"),i=o_(r),r.lu.add(3),e.next=6,Xw(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,$w(r);case 12:case"end":return e.stop()}}),e)}))),R_.apply(this,arguments)}function D_(e,t){return O_.apply(this,arguments)}function O_(){return O_=_e(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ld(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,$w(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Xw(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function L_(e){return e.mu||(e.mu=function(e,t,n){var r=Ld(e);return r.tu(),new Kw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:s_.bind(null,e),Jr:l_.bind(null,e),Go:f_.bind(null,e)}),e.fu.push(function(){var t=_e(me().mark((function t(n){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),a_(e)?i_(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:u_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function M_(e){return e.gu||(e.gu=function(e,t,n){var r=Ld(e);return r.tu(),new Hw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:x_.bind(null,e),Jr:N_.bind(null,e),Yo:E_.bind(null,e),Jo:S_.bind(null,e)}),e.fu.push(function(){var t=_e(me().mark((function t(n){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,m_(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(Nd("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var F_=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ud,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return f(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fd(Md.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function U_(e,t){if(Ad("AsyncQueue","".concat(t,": ").concat(e)),xp(e))return new Fd(Md.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var V_=function(){function e(t){l(this,e),this.comparator=t?function(e,n){return t(e,n)||ip.comparator(e.key,n.key)}:function(e,t){return ip.comparator(e.key,t.key)},this.keyedMap=Yy(),this.sortedSet=new Op(this.comparator)}return f(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),j_=function(){function e(){l(this,e),this.yu=new Op(ip.comparator)}return f(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Dd():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),q_=function(){function e(t,n,r,i,a,o,u,s){l(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return f(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ty(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,V_.emptySet(n),a,r,i,!0,!1)}}]),e}(),B_=f((function e(){l(this,e),this.Iu=void 0,this.listeners=[]})),z_=f((function e(){l(this,e),this.queries=new Ky((function(e){return ny(e)}),ty),this.onlineState="Unknown",this.Tu=new Set}));function W_(e,t){return K_.apply(this,arguments)}function K_(){return K_=_e(me().mark((function e(t,n){var r,i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ld(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new B_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=U_(e.t0,"Initialization of query '".concat(ry(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&$_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),K_.apply(this,arguments)}function H_(e,t){return G_.apply(this,arguments)}function G_(){return G_=_e(me().mark((function e(t,n){var r,i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ld(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}function Q_(e,t){var n,r=Ld(e),i=!1,a=d(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=d(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&$_(r)}function Y_(e,t,n){var r=Ld(e),i=r.queries.get(t);if(i){var a,o=d(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function $_(e){e.Tu.forEach((function(e){e.next()}))}var J_=function(){function e(t,n,r){l(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return f(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=d(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new q_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=q_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),X_=function(){function e(t,n){l(this,e),this.payload=t,this.byteLength=n}return f(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),Z_=function(){function e(t){l(this,e),this.wt=t}return f(e,[{key:"Wi",value:function(e){return Im(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?Am(this.wt,e.document,!1):xv.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return wm(e)}}]),e}(),eb=function(){function e(t,n,r){l(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tb(t)}return f(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=tp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new Z_(this.wt),i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=d(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||nm()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=_e(me().mark((function e(){var t,n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_w(this.localStore,new Z_(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=d(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,xw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function tb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var nb=f((function e(t){l(this,e),this.key=t})),rb=f((function e(t){l(this,e),this.key=t})),ib=function(){function e(t,n){l(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=nm(),this.mutatedKeys=nm(),this.Lu=oy(t),this.Uu=new V_(this.Lu)}return f(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new j_,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=iy(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Lu(h,s)>0||c&&n.Lu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dd()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new q_(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new j_,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=nm(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new rb(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new nb(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=nm();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return q_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),ab=f((function e(t,n,r){l(this,e),this.query=t,this.targetId=n,this.view=r})),ob=f((function e(t){l(this,e),this.key=t,this.Xu=!1})),ub=function(){function e(t,n,r,i,a,o){l(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Ky((function(e){return ny(e)}),ty),this.ec=new Map,this.nc=new Set,this.sc=new Op(ip.comparator),this.ic=new Map,this.rc=new qk,this.oc={},this.uc=new Map,this.cc=mk.Rn(),this.onlineState="Unknown",this.ac=void 0}return f(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function sb(e,t){return cb.apply(this,arguments)}function cb(){return cb=_e(me().mark((function e(t,n){var r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=tx(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,pw(r.localStore,Zv(n));case 8:return u=e.sent,r.isPrimaryClient&&e_(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,lb(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function lb(e,t,n,r){return hb.apply(this,arguments)}function hb(){return hb=_e(me().mark((function e(t,n,r,i){var a,o,u,s,c,l;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=_e(me().mark((function e(t,n,r,i){var a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,mw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Pb(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,mw(t.localStore,n,!0);case 3:return a=e.sent,o=new ib(n,a.ji),u=o.Ku(a.documents),s=om.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Pb(t,r,c.zu),l=new ab(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),hb.apply(this,arguments)}function fb(e,t){return db.apply(this,arguments)}function db(){return db=_e(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ld(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!ty(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,vw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),t_(r.remoteStore,i.targetId),Nb(r,i.targetId)})).catch(yp);case 9:e.next=14;break;case 11:return Nb(r,i.targetId),e.next=14,vw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function pb(e,t,n){return vb.apply(this,arguments)}function vb(){return vb=_e(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nx(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Ld(e),a=Xd.now(),o=t.reduce((function(e,t){return e.add(t.key)}),nm());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Gy(),s=nm();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=d(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Py(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Oy(c.key,l,bv(l.value.mapValue),Ey.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:$y(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new Op(Yd)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Ob(i,a.changes);case 9:return e.next=11,m_(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=U_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),vb.apply(this,arguments)}function yb(e,t){return mb.apply(this,arguments)}function mb(){return mb=_e(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ld(t),e.prev=1,e.next=4,hw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(Od(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Od(n.Xu):e.removedDocuments.size>0&&(Od(n.Xu),n.Xu=!1))})),e.next=8,Ob(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,yp(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),mb.apply(this,arguments)}function gb(e,t,n){var r=Ld(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Ld(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=d(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&$_(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function kb(e,t,n){return wb.apply(this,arguments)}function wb(){return wb=_e(me().mark((function e(t,n,r){var i,a,o,u,s,c;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Ld(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Op(ip.comparator)).insert(o,xv.newNoDocument(o,Zd.min())),s=nm().add(o),c=new am(Zd.min(),new Map,new Fp(Yd),u,s),e.next=9,yb(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),Db(i),e.next=16;break;case 14:return e.next=16,vw(i.localStore,n,!1).then((function(){return Nb(i,n,r)})).catch(yp);case 16:case"end":return e.stop()}}),e)}))),wb.apply(this,arguments)}function _b(e,t){return bb.apply(this,arguments)}function bb(){return bb=_e(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ld(t),i=n.batch.batchId,e.prev=1,e.next=4,cw(r.localStore,n);case 4:return a=e.sent,Cb(r,i,null),Sb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Ob(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,yp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),bb.apply(this,arguments)}function xb(e,t,n){return Ib.apply(this,arguments)}function Ib(){return Ib=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ld(t),e.prev=1,e.next=4,function(e,t){var n=Ld(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Od(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Cb(i,n,r),Sb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Ob(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,yp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Ib.apply(this,arguments)}function Eb(e,t){return Tb.apply(this,arguments)}function Tb(){return Tb=_e(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o_((r=Ld(t)).remoteStore)||Nd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Ld(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=U_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Tb.apply(this,arguments)}function Sb(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function Cb(e,t,n){var r=Ld(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function Nb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=d(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||Ab(e,t)}))}function Ab(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(t_(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),Db(e))}function Pb(e,t,n){var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof nb?(e.rc.addReference(a.key,t),Rb(e,a)):a instanceof rb?(Nd("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||Ab(e,a.key)):Dd()}}catch(o){i.e(o)}finally{i.f()}}function Rb(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(Nd("SyncEngine","New document in limbo: "+n),e.nc.add(r),Db(e))}function Db(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new ip(tp.fromString(t)),r=e.cc.next();e.ic.set(r,new ob(n)),e.sc=e.sc.insert(n,r),e_(e.remoteStore,new Ig(Zv(Qv(n.path)),r,2,Ap.ot))}}function Ob(e,t,n){return Lb.apply(this,arguments)}function Lb(){return Lb=_e(me().mark((function e(t,n,r){var i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ld(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=rw.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=_e(me().mark((function e(t,n){var r,i,a,o,u,s,c,l;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ld(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return gp.forEach(n,(function(t){return gp.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return gp.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),xp(e.t0)){e.next=10;break}throw e.t0;case 10:Nd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=d(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}function Mb(e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=_e(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Ld(t)).currentUser.isEqual(n)){e.next=11;break}return Nd("SyncEngine","User change. New user:",n.toKey()),e.next=5,uw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new Fd(Md.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Ob(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}function Ub(e,t){var n=Ld(e),r=n.ic.get(t);if(r&&r.Xu)return nm().add(r.key);var i=nm(),a=n.ec.get(t);if(!a)return i;var o,u=d(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function Vb(e,t){return jb.apply(this,arguments)}function jb(){return jb=_e(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ld(t),e.next=3,mw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&Pb(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),jb.apply(this,arguments)}function qb(e,t){return Bb.apply(this,arguments)}function Bb(){return Bb=_e(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ld(t),e.abrupt("return",kw(r.localStore,n).then((function(e){return Ob(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function zb(e,t,n,r){return Wb.apply(this,arguments)}function Wb(){return Wb=_e(me().mark((function e(t,n,r,i){var a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ld(t),e.next=3,function(e,t){var n=Ld(e),r=Ld(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):gp.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,m_(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Cb(a,n,i||null),Sb(a,n),function(e,t){Ld(Ld(e).mutationQueue).In(t)}(a.localStore,n)):Dd();case 11:return e.next=13,Ob(a,o);case 13:e.next=16;break;case 15:Nd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Kb(e,t){return Hb.apply(this,arguments)}function Hb(){return Hb=_e(me().mark((function e(t,n){var r,i,a,o,u,s,c,l;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tx(r=Ld(t)),nx(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Gb(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,D_(r.remoteStore,!0);case 9:o=d(a);try{for(o.s();!(u=o.n()).done;)s=u.value,e_(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Nb(r,t),vw(r.localStore,t,!0)})),t_(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Gb(r,c);case 21:return function(e){var t=Ld(e);t.ic.forEach((function(e,n){t_(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new Op(ip.comparator)}(r),r.ac=!1,e.next=25,D_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Hb.apply(this,arguments)}function Gb(e,t,n){return Qb.apply(this,arguments)}function Qb(){return Qb=_e(me().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,p,v,y,m,g;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Ld(t),a=[],o=[],u=d(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.ec.get(c))||0===h.length){e.next=34;break}return e.next=11,pw(i.localStore,Zv(h[0]));case 11:l=e.sent,f=d(h),e.prev=13,f.s();case 15:if((p=f.n()).done){e.next=24;break}return v=p.value,y=i.tc.get(v),e.next=20,Vb(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,gw(i.localStore,c);case 36:return g=e.sent,e.next=39,pw(i.localStore,g);case 39:return l=e.sent,e.next=42,lb(i,Yb(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Qb.apply(this,arguments)}function Yb(e){return Gv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function $b(e){var t=Ld(e);return Ld(Ld(t.localStore).persistence).Ri()}function Jb(e,t,n,r){return Xb.apply(this,arguments)}function Xb(){return Xb=_e(me().mark((function e(t,n,r,i){var a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Ld(t)).ac){e.next=3;break}return e.abrupt("return",void Nd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,kw(a.localStore,ay(o[0]));case 10:return u=e.sent,s=am.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Ob(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,vw(a.localStore,n,!0);case 17:return Nb(a,n,i),e.abrupt("break",20);case 19:Dd();case 20:case"end":return e.stop()}}),e)}))),Xb.apply(this,arguments)}function Zb(e,t,n){return ex.apply(this,arguments)}function ex(){return ex=_e(me().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=tx(t)).ac){e.next=45;break}a=d(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return Nd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,gw(i.localStore,u);case 12:return s=e.sent,e.next=15,pw(i.localStore,s);case 15:return c=e.sent,e.next=18,lb(i,Yb(s),c.targetId,!1);case 18:e_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=d(r),e.prev=30,f=me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,vw(i.localStore,t,!1).then((function(){t_(i.remoteStore,t),Nb(i,t)})).catch(yp);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),ex.apply(this,arguments)}function tx(e){var t=Ld(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ub.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=kb.bind(null,t),t.Zu.Go=Q_.bind(null,t.eventManager),t.Zu.lc=Y_.bind(null,t.eventManager),t}function nx(e){var t=Ld(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_b.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xb.bind(null,t),t}function rx(e,t,n){var r=Ld(e);(function(){var e=_e(me().mark((function e(t,n,r){var i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Ld(e),r=wm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(tb(i)),a=new eb(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Ob(t,s.Mu,void 0);case 31:return e.next=33,function(e,t){var n=Ld(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Pd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var ix=function(){function e(){l(this,e),this.synchronizeTabs=!1}return f(e,[{key:"initialize",value:function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=Bw(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return ow(this.persistence,new iw,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Gk(Yk.Ms,this.wt)}},{key:"dc",value:function(e){return new Ow}},{key:"terminate",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ax=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return f(n,[{key:"initialize",value:function(){var e=_e(me().mark((function e(t){var r=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt(m(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,nx(this.yc.syncEngine);case 6:return e.next=8,m_(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return ow(this.persistence,new iw,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Ik(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new Np(t,this.persistence);return new Cp(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=nw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ck.withCacheSize(this.cacheSizeBytes):ck.DEFAULT;return new Zk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,jw(),qw(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new Ow}}]),n}(ix),ox=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return f(n,[{key:"initialize",value:function(){var e=_e(me().mark((function e(t){var r,i=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt(m(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof Dw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:zb.bind(null,r),Or:Jb.bind(null,r),Mr:Zb.bind(null,r),Ri:$b.bind(null,r),Nr:qb.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kb(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=jw();if(!Dw.V(t))throw new Fd(Md.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=nw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(ax),ux=function(){function e(){l(this,e)}return f(e,[{key:"initialize",value:function(){var e=_e(me().mark((function e(t,n){var r=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return gb(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Mb.bind(null,this.syncEngine),e.next=12,D_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new z_}},{key:"createDatastore",value:function(e){var t,n=Bw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Vw(t));return function(e,t,n,r){return new Gw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return gb(o.syncEngine,e,0)},a=Mw.V()?new Mw:new Lw,new Yw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new ub(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ld(t),Nd("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Xw(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function sx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return _e(me().mark((function r(){var i;return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return _e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var cx=function(){function e(t){l(this,e),this.observer=t,this.muted=!1}return f(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),lx=function(){function e(t,n){var r=this;l(this,e),this.Ec=t,this.wt=n,this.metadata=new Ud,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return f(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=_e(me().mark((function e(){var t,n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new X_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=_e(me().mark((function e(){var t,n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=_e(me().mark((function e(){var t,n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),hx=function(){function e(t){l(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return f(e,[{key:"lookup",value:function(){var e=_e(me().mark((function e(t){var n,r=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Fd(Md.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=_e(me().mark((function e(t,n){var r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ld(t),i=Sm(r.wt)+"/documents",a={documents:n.map((function(e){return xm(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Pm(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Od(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new jy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=_e(me().mark((function e(){var t,n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ip.fromPath(t);n.mutations.push(new qy(r,n.precondition(r)))})),e.next=7,function(){var e=_e(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ld(t),i=Sm(r.wt)+"/documents",a={writes:n.map((function(e){return Rm(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Dd();t=Zd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Fd(Md.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ey.updateTime(t):Ey.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zd.min()))throw new Fd(Md.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ey.updateTime(t)}return Ey.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),fx=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new zw(this.asyncQueue,"transaction_retry")}return f(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(_e(me().mark((function t(){var n,r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new hx(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!Jp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!zy(t)}return!1}}]),e}(),dx=function(){function e(t,n,r,i){var a=this;l(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ed.UNAUTHENTICATED,this.clientId=Qd.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Nd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return f(e,[{key:"getConfiguration",value:function(){var e=_e(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Fd(Md.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ud;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_e(me().mark((function n(){var r;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=U_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function px(e,t){return vx.apply(this,arguments)}function vx(){return vx=_e(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Nd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,uw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}function yx(e,t){return mx.apply(this,arguments)}function mx(){return mx=_e(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,gx(t);case 3:return r=e.sent,Nd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return P_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return P_(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function gx(e){return kx.apply(this,arguments)}function kx(){return kx=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Nd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,px(t,new ix);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function wx(e){return _x.apply(this,arguments)}function _x(){return _x=_e(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Nd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,yx(t,new ux);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),_x.apply(this,arguments)}function bx(e){return gx(e).then((function(e){return e.persistence}))}function xx(e){return gx(e).then((function(e){return e.localStore}))}function Ix(e){return wx(e).then((function(e){return e.remoteStore}))}function Ex(e){return wx(e).then((function(e){return e.syncEngine}))}function Tx(e){return Sx.apply(this,arguments)}function Sx(){return Sx=_e(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=sb.bind(null,n.syncEngine),r.onUnlisten=fb.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Cx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ud;return e.asyncQueue.enqueueAndForget(_e(me().mark((function i(){return me().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new cx({next:function(a){t.enqueueAndForget((function(){return H_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Fd(Md.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Fd(Md.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new J_(Qv(n.path),a,{includeMetadataChanges:!0,Du:!0});return W_(e,o)},i.next=3,Tx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Nx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ud;return e.asyncQueue.enqueueAndForget(_e(me().mark((function i(){return me().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new cx({next:function(n){t.enqueueAndForget((function(){return H_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Fd(Md.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new J_(n,a,{includeMetadataChanges:!0,Du:!0});return W_(e,o)},i.next=3,Tx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Ax=new Map;function Px(e,t,n){if(!n)throw new Fd(Md.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Rx(e,t,n,r){if(!0===t&&!0===r)throw new Fd(Md.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Dx(e){if(!ip.isDocumentKey(e))throw new Fd(Md.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ox(e){if(ip.isDocumentKey(e))throw new Fd(Md.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Lx(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Dd()}function Mx(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Fd(Md.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Lx(e);throw new Fd(Md.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Fx(e,t){if(t<=0)throw new Fd(Md.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Ux=function(){function e(t){var n;if(l(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Fd(Md.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Fd(Md.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Rx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return f(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Vx=function(){function e(t,n,r){l(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ux({}),this._settingsFrozen=!1,t instanceof $p?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Fd(Md.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $p(e.options.projectId)}(t))}return f(e,[{key:"app",get:function(){if(!this._app)throw new Fd(Md.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Fd(Md.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ux(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new jd;switch(e.type){case"gapi":var t=e.client;return Od(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Wd(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Fd(Md.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Ax.get(e);t&&(Nd("ComponentProvider","Removing Datastore"),Ax.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function jx(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Mx(e,Vx))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Pd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ed.MOCK_USER;else{o=M(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Fd(Md.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ed(s)}e._authCredentials=new qd(new Vd(o,u))}}var qx=function(){function e(t,n,r){l(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return f(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new zx(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Bx=function(){function e(t,n,r){l(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return f(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),zx=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,Qv(i)))._path=i,a.type="collection",a}return f(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new qx(this.firestore,null,new ip(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Bx);function Wx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ye(e),Px("collection","path",t),e instanceof Vx){var a=tp.fromString.apply(tp,[t].concat(r));return Ox(a),new zx(e,null,a)}if(!(e instanceof qx||e instanceof zx))throw new Fd(Md.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(tp.fromString.apply(tp,[t].concat(r)));return Ox(o),new zx(e.firestore,null,o)}function Kx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ye(e),1===arguments.length&&(t=Qd.I()),Px("doc","path",t),e instanceof Vx){var a=tp.fromString.apply(tp,[t].concat(r));return Dx(a),new qx(e,null,new ip(a))}if(!(e instanceof qx||e instanceof zx))throw new Fd(Md.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(tp.fromString.apply(tp,[t].concat(r)));return Dx(o),new qx(e.firestore,e instanceof zx?e.converter:null,new ip(o))}function Hx(e,t){return e=ye(e),t=ye(t),(e instanceof qx||e instanceof zx)&&(t instanceof qx||t instanceof zx)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Gx(e,t){return e=ye(e),t=ye(t),e instanceof Bx&&t instanceof Bx&&e.firestore===t.firestore&&ty(e._query,t._query)&&e.converter===t.converter}var Qx=function(){function e(){var t=this;l(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new zw(this,"async_queue_retry"),this.Kc=function(){var e=qw();e&&Nd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=qw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return f(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=qw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new Ud;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=_e(me().mark((function e(){var t=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),xp(e.t0)){e.next=12;break}throw e.t0;case 12:Nd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ad("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=F_.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&Dd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=_e(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=d(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=d(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function Yx(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=d(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var $x=function(){function e(){l(this,e),this._progressObserver={},this._taskCompletionResolver=new Ud,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return f(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Jx=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Qx,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return f(n,[{key:"_terminate",value:function(){return this._firestoreClient||Zx(this),this._firestoreClient.terminate()}}]),n}(Vx);function Xx(e){return e._firestoreClient||Zx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Zx(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Yp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new dx(e._authCredentials,e._appCheckCredentials,e._queue,r)}function eI(e,t,n){var r=new Ud;return e.asyncQueue.enqueue(_e(me().mark((function i(){var a;return me().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,px(e,n);case 3:return i.next=5,yx(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Md.FAILED_PRECONDITION||e.code===Md.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function tI(e){return function(e){return e.asyncQueue.enqueue(_e(me().mark((function t(){var n,r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bx(e);case 2:return n=t.sent,t.next=5,Ix(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Ld(e);return t.lu.delete(0),$w(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Xx(e=Mx(e,Jx)))}function nI(e){return function(e){return e.asyncQueue.enqueue(_e(me().mark((function t(){var n,r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bx(e);case 2:return n=t.sent,t.next=5,Ix(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ld(t)).lu.add(0),e.next=4,Xw(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Xx(e=Mx(e,Jx)))}function rI(e,t){var n=Xx(e=Mx(e,Jx)),r=new $x;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new lx(e,t)}(function(e,t){if(e instanceof Uint8Array)return sx(e,t);if(e instanceof ArrayBuffer)return sx(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Bw(t));e.asyncQueue.enqueueAndForget(_e(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=rx,t.next=3,Ex(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function iI(e,t){return function(e,t){return e.asyncQueue.enqueue(_e(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Ld(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,xx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Xx(e=Mx(e,Jx)),t).then((function(t){return t?new Bx(e,null,t.query):null}))}function aI(e){if(e._initialized||e._terminated)throw new Fd(Md.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var oI=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Fd(Md.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rp(n)}return f(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var uI=function(){function e(t){l(this,e),this._byteString=t}return f(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(qp.fromBase64String(t))}catch(t){throw new Fd(Md.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(qp.fromUint8Array(t))}}]),e}(),sI=f((function e(t){l(this,e),this._methodName=t})),cI=function(){function e(t,n){if(l(this,e),!isFinite(t)||t<-90||t>90)throw new Fd(Md.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Fd(Md.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return f(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Yd(this._lat,e._lat)||Yd(this._long,e._long)}}]),e}(),lI=/^__.*__$/,hI=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Oy(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dy(e,this.data,t,this.fieldTransforms)}}]),e}(),fI=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return new Oy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function dI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dd()}}var pI=function(){function e(t,n,r,i,a,o){l(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return f(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return OI(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(dI(this.Zc)&&lI.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),vI=function(){function e(t,n,r){l(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||Bw(t)}return f(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pI({Zc:e,methodName:t,ca:n,path:rp.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function yI(e){var t=e._freezeSettings(),n=Bw(e._databaseId);return new vI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);AI("Data must be an object, but it was:",o,r);var u,s,c=CI(r,o);if(a.merge)u=new jp(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=d(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var p=l.value,v=PI(t,p,n);if(!o.contains(v))throw new Fd(Md.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));LI(h,v)||h.push(v)}}catch(y){f.e(y)}finally{f.f()}u=new jp(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new hI(new _v(c),u,s)}var gI=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(sI);function kI(e,t,n){return new pI({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var wI=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){return new xy(e.path,new vy)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(sI),_I=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).ha=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=kI(this,e,!0),n=this.ha.map((function(e){return SI(e,t)})),r=new yy(n);return new xy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sI),bI=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).ha=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=kI(this,e,!0),n=this.ha.map((function(e){return SI(e,t)})),r=new gy(n);return new xy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sI),xI=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).la=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=new wy(e.wt,ly(e.wt,this.la));return new xy(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sI);function II(e,t,n,r){var i=e.aa(1,t,n);AI("Data must be an object, but it was:",i,r);var a=[],o=_v.empty();Rp(r,(function(e,r){var u=DI(t,e,n);r=ye(r);var s=i.ia(u);if(r instanceof gI)a.push(u);else{var c=SI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new jp(a);return new fI(o,u,i.fieldTransforms)}function EI(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[PI(t,r,n)],s=[i];if(a.length%2!=0)throw new Fd(Md.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(PI(t,a[c])),s.push(a[c+1]);for(var l=[],h=_v.empty(),f=u.length-1;f>=0;--f)if(!LI(l,u[f])){var d=u[f],p=s[f];p=ye(p);var v=o.ia(d);if(p instanceof gI)l.push(d);else{var y=SI(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new jp(l);return new fI(h,m,o.fieldTransforms)}function TI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return SI(n,e.aa(r?4:3,t))}function SI(e,t){if(NI(e=ye(e)))return AI("Unsupported field value:",t,e),CI(e,t);if(e instanceof sI)return function(e,t){if(!dI(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=d(e);try{for(a.s();!(n=a.n()).done;){var o=SI(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ye(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ly(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Xd.fromDate(e);return{timestampValue:mm(t.wt,n)}}if(e instanceof Xd){var r=new Xd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mm(t.wt,r)}}if(e instanceof cI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof uI)return{bytesValue:gm(t.wt,e._byteString)};if(e instanceof qx){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:_m(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(Lx(e)))}(e,t)}function CI(e,t){var n={};return Dp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rp(e,(function(e,r){var i=SI(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function NI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xd||e instanceof cI||e instanceof uI||e instanceof qx||e instanceof sI)}function AI(e,t,n){if(!NI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Lx(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function PI(e,t,n){if((t=ye(t))instanceof oI)return t._internalPath;if("string"==typeof t)return DI(e,t);throw OI("Field path arguments must be of type string or ",e,!1,void 0,n)}var RI=new RegExp("[~\\*/\\[\\]]");function DI(e,t,n){if(t.search(RI)>=0)throw OI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return b(oI,ke(t.split(".")))._internalPath}catch(r){throw OI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function OI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Fd(Md.INVALID_ARGUMENT,u+e+s)}function LI(e,t){return e.some((function(e){return e.isEqual(t)}))}var MI=function(){function e(t,n,r,i,a){l(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return f(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new qx(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new FI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),FI=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){return Yt(m(n.prototype),"data",this).call(this)}}]),n}(MI);function UI(e,t){return"string"==typeof t?DI(e,t):t instanceof oI?t._internalPath:t._delegate._internalPath}var VI=function(){function e(t,n){l(this,e),this.hasPendingWrites=t,this.fromCache=n}return f(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),jI=function(e){y(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return f(n,[{key:"exists",value:function(){return Yt(m(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new qI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(MI),qI=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Yt(m(n.prototype),"data",this).call(this,e)}}]),n}(jI),BI=function(){function e(t,n,r,i){l(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new VI(i.hasPendingWrites,i.fromCache),this.query=r}return f(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new qI(n._firestore,n._userDataWriter,r.key,r,new VI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fd(Md.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new qI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new VI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new qI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new VI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:zI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function zI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dd()}}function WI(e,t){return e instanceof jI&&t instanceof jI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof BI&&t instanceof BI&&e._firestore===t._firestore&&Gx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function KI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Fd(Md.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var HI=f((function e(){l(this,e)}));function GI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var QI=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return f(n,[{key:"_apply",value:function(e){var t=yI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Fd(Md.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){aE(o,a);var s,c=[],l=d(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(iE(r,e,h))}}catch(p){l.e(p)}finally{l.f()}u={arrayValue:{values:c}}}else u=iE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||aE(o,a),u=TI(n,"where",o,"in"===a||"not-in"===a);var f=Rv.create(i,a,u);return function(e,t){if(t.ht()){var n=$v(e);if(null!==n&&!n.isEqual(t.field))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Yv(e);null!==r&&oE(e,t.field,r)}var i=function(e,t){var n,r=d(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Fd(Md.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Fd(Md.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Bx(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Hv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(HI);var YI=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return f(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bv(t,n);return function(e,t){if(null===Yv(e)){var n=$v(e);null!==n&&oE(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new Bx(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Hv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(HI);var $I=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return f(n,[{key:"_apply",value:function(e){return new Bx(e.firestore,e.converter,ey(e._query,this.ma,this.ga))}}]),n}(HI);var JI=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return f(n,[{key:"_apply",value:function(e){var t=rE(e,this.type,this.ya,this.pa);return new Bx(e.firestore,e.converter,function(e,t){return new Hv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(HI);function XI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new JI("startAt",t,!0)}function ZI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new JI("startAfter",t,!1)}var eE=function(e){y(n,e);var t=_(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return f(n,[{key:"_apply",value:function(e){var t=rE(e,this.type,this.ya,this.pa);return new Bx(e.firestore,e.converter,function(e,t){return new Hv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(HI);function tE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eE("endBefore",t,!1)}function nE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eE("endAt",t,!0)}function rE(e,t,n,r){if(n[0]=ye(n[0]),n[0]instanceof MI)return function(e,t,n,r,i){if(!r)throw new Fd(Md.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=d(Xv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(cv(t,r.key));else{var c=r.data.field(s.field);if(Hp(c))throw new Fd(Md.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new qv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=yI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Fd(Md.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Jv(e)&&-1!==c.indexOf("/"))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(tp.fromString(c));if(!ip.isDocumentKey(l))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new ip(l);u.push(cv(t,h))}else{var f=TI(n,r,c);u.push(f)}}return new qv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function iE(e,t,n){if("string"==typeof(n=ye(n))){if(""===n)throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jv(t)&&-1!==n.indexOf("/"))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(tp.fromString(n));if(!ip.isDocumentKey(r))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return cv(e,new ip(r))}if(n instanceof qx)return cv(e,n._key);throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Lx(n),"."))}function aE(e,t){if(!Array.isArray(e)||0===e.length)throw new Fd(Md.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Fd(Md.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function oE(e,t,n){if(!n.isEqual(t))throw new Fd(Md.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var uE={maxAttempts:5},sE=function(){function e(){l(this,e)}return f(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(nv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Dd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Rp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new cI(Wp(e.latitude),Wp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Gp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Qp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=zp(e);return new Xd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=tp.fromString(e);Od(Km(n));var r=new $p(n.get(1),n.get(3)),i=new ip(n.popFirst(5));return r.isEqual(t)||Ad("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function cE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var lE=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new uI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new qx(this.firestore,null,t)}}]),n}(sE),hE=function(){function e(t,n){l(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yI(t)}return f(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=fE(e,this._firestore),i=cE(r.converter,t,n),a=mI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ey.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=fE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ye(t))||t instanceof oI?EI(this._dataReader,"WriteBatch.update",i._key,t,n,o):II(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ey.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=fE(e,this._firestore);return this._mutations=this._mutations.concat(new jy(t._key,Ey.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Fd(Md.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function fE(e,t){if((e=ye(e)).firestore!==t)throw new Fd(Md.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var dE=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new uI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new qx(this.firestore,null,t)}}]),n}(sE);function pE(e){e=Mx(e,qx);var t=Mx(e.firestore,Jx),n=Xx(t),r=new dE(t);return function(e,t){var n=new Ud;return e.asyncQueue.enqueueAndForget(_e(me().mark((function r(){return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=_e(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Ld(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Fd(Md.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=U_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new jI(t,r,e._key,n,new VI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function vE(e){e=Mx(e,Bx);var t=Mx(e.firestore,Jx),n=Xx(t),r=new dE(t);return function(e,t){var n=new Ud;return e.asyncQueue.enqueueAndForget(_e(me().mark((function r(){return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=_e(me().mark((function e(t,n,r){var i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mw(t,n,!0);case 3:i=e.sent,a=new ib(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=U_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new BI(t,r,e,n)}))}function yE(e,t,n){e=Mx(e,qx);var r=Mx(e.firestore,Jx),i=cE(e.converter,t,n);return wE(r,[mI(yI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ey.none())])}function mE(e,t,n){e=Mx(e,qx);for(var r=Mx(e.firestore,Jx),i=yI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return wE(r,[("string"==typeof(t=ye(t))||t instanceof oI?EI(i,"updateDoc",e._key,t,n,o):II(i,"updateDoc",e._key,t)).toMutation(e._key,Ey.exists(!0))])}function gE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ye(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Yx(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(Yx(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof qx)l=Mx(e.firestore,Jx),h=Qv(e._key.path),c={next:function(t){n[s]&&n[s](_E(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Mx(e,Bx);l=Mx(p.firestore,Jx),h=p._query;var v=new dE(l);c={next:function(e){n[s]&&n[s](new BI(l,v,p,e))},error:n[s+1],complete:n[s+2]},KI(e._query)}return function(e,t,n,r){var i=new cx(r),a=new J_(t,i,n);return e.asyncQueue.enqueueAndForget(_e(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=W_,t.next=3,Tx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(_e(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=H_,t.next=3,Tx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Xx(l),h,f,c)}function kE(e,t){return function(e,t){var n=new cx(t);return e.asyncQueue.enqueueAndForget(_e(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ld(e).Tu.add(t),t.next()},t.next=3,Tx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(_e(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ld(e).Tu.delete(t)},t.next=3,Tx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Xx(e=Mx(e,Jx)),Yx(t)?t:{next:t})}function wE(e,t){return function(e,t){var n=new Ud;return e.asyncQueue.enqueueAndForget(_e(me().mark((function r(){return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=pb,r.next=3,Ex(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Xx(e),t)}function _E(e,t,n){var r=n.docs.get(t._key),i=new dE(e);return new jI(e,i,t._key,r,new VI(n.hasPendingWrites,n.fromCache),t.converter)}var bE=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r))._firestore=e,i}return f(n,[{key:"get",value:function(e){var t=this,r=fE(e,this._firestore),i=new dE(this._firestore);return Yt(m(n.prototype),"get",this).call(this,e).then((function(e){return new jI(t._firestore,i,r._key,e._document,new VI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){l(this,e),this._firestore=t,this._transaction=n,this._dataReader=yI(t)}return f(e,[{key:"get",value:function(e){var t=this,n=fE(e,this._firestore),r=new lE(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Dd();var i=e[0];if(i.isFoundDocument())return new MI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new MI(t._firestore,r,n._key,null,n.converter);throw Dd()}))}},{key:"set",value:function(e,t,n){var r=fE(e,this._firestore),i=cE(r.converter,t,n),a=mI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=fE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ye(t))||t instanceof oI?EI(this._dataReader,"Transaction.update",i._key,t,n,o):II(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=fE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function xE(e,t,n){e=Mx(e,Jx);var r=Object.assign(Object.assign({},uE),n);return function(e){if(e.maxAttempts<1)throw new Fd(Md.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Ud;return e.asyncQueue.enqueueAndForget(_e(me().mark((function i(){var a;return me().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return wx(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new fx(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Xx(e),(function(n){return t(new bE(e,n))}),r)}function IE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _I("arrayUnion",t)}function EE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Td=e}(mt),lt(new be("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Jx(i,new Bd(e.getProvider("auth-internal")),new Hd(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),xt(Id,"3.4.12",e),xt(Id,"3.4.12","esm2017")}();function TE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Fd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function SE(){if("undefined"===typeof Uint8Array)throw new Fd("unimplemented","Uint8Arrays are not available in this environment.")}function CE(){if("undefined"==typeof atob)throw new Fd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var NE=function(){function e(t){l(this,e),this._delegate=t}return f(e,[{key:"toBase64",value:function(){return CE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return SE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return CE(),new e(uI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return SE(),new e(uI.fromUint8Array(t))}}]),e}();function AE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=d(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var PE=function(){function e(){l(this,e)}return f(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){aI(e=Mx(e,Jx));var n=Xx(e),r=e._freezeSettings(),i=new ux;return eI(n,i,new ax(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){aI(e=Mx(e,Jx));var t=Xx(e),n=e._freezeSettings(),r=new ux;return eI(t,r,new ox(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Fd(Md.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ud;return e._queue.enqueueAndForgetEvenWhileRestricted(_e(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=_e(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wp.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,wp.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(nw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),RE=function(){function e(t,n,r){var i=this;l(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof $p||(this._appCompat=t)}return f(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Pd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jx(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return tI(this._delegate)}},{key:"disableNetwork",value:function(){return nI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Rx("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Ud;return e.asyncQueue.enqueueAndForget(_e(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Eb,n.next=3,Ex(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Xx(e=Mx(e,Jx)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return kE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Fd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new HE(this,Wx(this._delegate,e))}catch(t){throw UE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new FE(this,Kx(this._delegate,e))}catch(t){throw UE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new zE(this,function(e,t){if(e=Mx(e,Vx),Px("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Fd(Md.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Bx(e,null,function(e){return new Hv(tp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw UE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return xE(this._delegate,(function(n){return e(new OE(t,n))}))}},{key:"batch",value:function(){var e=this;return Xx(this._delegate),new LE(new hE(this._delegate,(function(t){return wE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return rI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return iI(this._delegate,e).then((function(e){return e?new zE(t,e):null}))}}]),e}(),DE=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new NE(new uI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return FE.forKey(t,this.firestore,null)}}]),n}(sE);var OE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new DE(t)}return f(e,[{key:"get",value:function(e){var t=this,n=GE(e);return this._delegate.get(n).then((function(e){return new qE(t._firestore,new jI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=GE(e);return n?(TE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=GE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=GE(e);return this._delegate.delete(t),this}}]),e}(),LE=function(){function e(t){l(this,e),this._delegate=t}return f(e,[{key:"set",value:function(e,t,n){var r=GE(e);return n?(TE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=GE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=GE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),ME=function(){function e(t,n,r){l(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return f(e,[{key:"fromFirestore",value:function(e,t){var n=new qI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new BE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new DE(t),n),i.set(n,a)),a}}]),e}();ME.INSTANCES=new WeakMap;var FE=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DE(t)}return f(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new HE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new HE(this.firestore,Wx(this._delegate,e))}catch(t){throw UE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ye(e))instanceof qx&&Hx(this._delegate,e)}},{key:"set",value:function(e,t){t=TE("DocumentReference.set",t);try{return t?yE(this._delegate,e,t):yE(this._delegate,e)}catch(n){throw UE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?mE(this._delegate,e):mE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw UE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return wE(Mx(e.firestore,Jx),[new jy(e._key,Ey.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=VE(n),a=jE(n,(function(t){return new qE(e.firestore,new jI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return gE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?pE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Mx(e,qx);var t=Mx(e.firestore,Jx);return Cx(Xx(t),e._key,{source:"server"}).then((function(n){return _E(t,e,n)}))}(this._delegate):function(e){e=Mx(e,qx);var t=Mx(e.firestore,Jx);return Cx(Xx(t),e._key).then((function(n){return _E(t,e,n)}))}(this._delegate),t.then((function(e){return new qE(n.firestore,new jI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ME.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Fd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new qx(n._delegate,r,new ip(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new qx(n._delegate,r,t))}}]),e}();function UE(e,t,n){return e.message=e.message.replace(t,n),e}function VE(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!AE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function jE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=AE(e[0])?e[0]:AE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var qE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"ref",get:function(){return new FE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return WI(this._delegate,e._delegate)}}]),e}(),BE=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Dd()}(void 0!==t),t}}]),n}(qE),zE=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new DE(t)}return f(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,GI(this._delegate,function(e,t,n){var r=t,i=UI("where",e);return new QI(i,r,n)}(t,n,r)))}catch(i){throw UE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,GI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=UI("orderBy",e);return new YI(n,t)}(t,n)))}catch(r){throw UE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,GI(this._delegate,function(e){return Fx("limit",e),new $I("limit",e,"F")}(t)))}catch(n){throw UE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,GI(this._delegate,function(e){return Fx("limitToLast",e),new $I("limitToLast",e,"L")}(t)))}catch(n){throw UE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,GI(this._delegate,XI.apply(void 0,arguments)))}catch(t){throw UE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,GI(this._delegate,ZI.apply(void 0,arguments)))}catch(t){throw UE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,GI(this._delegate,tE.apply(void 0,arguments)))}catch(t){throw UE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,GI(this._delegate,nE.apply(void 0,arguments)))}catch(t){throw UE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Gx(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?vE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Mx(e,Bx);var t=Mx(e.firestore,Jx),n=Xx(t),r=new dE(t);return Nx(n,e._query,{source:"server"}).then((function(n){return new BI(t,r,e,n)}))}(this._delegate):function(e){e=Mx(e,Bx);var t=Mx(e.firestore,Jx),n=Xx(t),r=new dE(t);return KI(e._query),Nx(n,e._query).then((function(n){return new BI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new KE(n.firestore,new BI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=VE(n),a=jE(n,(function(t){return new KE(e.firestore,new BI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return gE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ME.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),WE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new BE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),KE=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"query",get:function(){return new zE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new BE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new WE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new BE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return WI(this._delegate,e._delegate)}}]),e}(),HE=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return f(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new FE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new FE(this.firestore,void 0===e?Kx(this._delegate):Kx(this._delegate,e))}catch(t){throw UE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Mx(e.firestore,Jx),r=Kx(e),i=cE(e.converter,t);return wE(n,[mI(yI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ey.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new FE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Hx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(ME.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(zE);function GE(e){return Mx(e,qx)}var QE=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=b(oI,n)}return f(e,[{key:"isEqual",value:function(e){return(e=ye(e))instanceof oI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(rp.keyField().canonicalString())}}]),e}(),YE=function(){function e(t){l(this,e),this._delegate=t}return f(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new wI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new gI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=IE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=EE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new xI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),$E={Firestore:RE,GeoPoint:cI,Timestamp:Xd,Blob:NE,Transaction:OE,WriteBatch:LE,DocumentReference:FE,DocumentSnapshot:qE,Query:zE,QueryDocumentSnapshot:BE,QuerySnapshot:KE,CollectionReference:HE,FieldPath:QE,FieldValue:YE,setLogLevel:function(e){!function(e){Sd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new be("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},$E)))}(e,(function(e,t){return new RE(e,t,new PE)})),e.registerVersion("@firebase/firestore-compat","0.1.21")}(Gt);var JE,XE=Gt.initializeApp({apiKey:"AIzaSyB9xr3cIkJAXjeBvXxntoWzjc-hAE2AU5I",authDomain:"task-matcher-53e8d.firebaseapp.com",projectId:"task-matcher-53e8d",storageBucket:"task-matcher-53e8d.appspot.com",messagingSenderId:"1006567663822",appId:"1:1006567663822:web:aed90c4b5caccb44b4889f"}),ZE=n(184),eT=function(e){var t=e.email,n=e.setEmail,r=e.password,i=e.setPassword,a=e.handleLogin,o=e.handleSignup,u=e.hasAccount,s=e.setHasAccount,c=e.emailError,l=e.passwordError;return(0,ZE.jsx)("section",{className:"login",children:(0,ZE.jsxs)("div",{className:"loginContainer",children:[(0,ZE.jsx)("label",{children:"Username"}),(0,ZE.jsx)("input",{type:"text",autoFocus:!0,required:!0,value:t,onChange:function(e){return n(e.target.value)}}),(0,ZE.jsx)("p",{className:"errorMsg",children:c}),(0,ZE.jsx)("label",{children:"Password"}),(0,ZE.jsx)("input",{type:"password",required:!0,value:r,onChange:function(e){return i(e.target.value)}}),(0,ZE.jsx)("p",{className:"errorMsg",children:l}),(0,ZE.jsx)("div",{className:"btnContainer",children:u?(0,ZE.jsxs)(ZE.Fragment,{children:[(0,ZE.jsx)("button",{onClick:a,children:"Sign in"}),(0,ZE.jsxs)("p",{children:["Don't have an account ?",(0,ZE.jsx)("span",{onClick:function(){return s(!u)},children:"Sign up"})]})]}):(0,ZE.jsxs)(ZE.Fragment,{children:[(0,ZE.jsx)("button",{onClick:o,children:"Sign up"}),(0,ZE.jsxs)("p",{children:["Have an account ?",(0,ZE.jsx)("span",{onClick:function(){return s(!u)},children:"Sign in"})]})]})})]})})};function tT(){return tT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tT.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(JE||(JE={}));var nT=function(e){return e};var rT="beforeunload",iT="popstate";function aT(e){e.preventDefault(),e.returnValue=""}function oT(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function uT(){return Math.random().toString(36).substr(2,8)}function sT(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function cT(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var lT=(0,t.createContext)(null);var hT=(0,t.createContext)(null);var fT=(0,t.createContext)({outlet:null,matches:[]});function dT(e,t){if(!e)throw new Error(t)}function pT(e,t,n){void 0===n&&(n="/");var r=bT(("string"===typeof t?cT(t):t).pathname||"/",n);if(null==r)return null;var i=vT(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=kT(i[o],r);return a}function vT(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||dT(!1),a.relativePath=a.relativePath.slice(r.length));var o=xT([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&dT(!1),vT(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:gT(o,e.index),routesMeta:u})})),t}var yT=/^:\w+$/,mT=function(e){return"*"===e};function gT(e,t){var n=e.split("/"),r=n.length;return n.some(mT)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!mT(e)})).reduce((function(e,t){return e+(yT.test(t)?3:""===t?1:10)}),r)}function kT(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=wT({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var h=u.route;a.push({params:r,pathname:xT([i,l.pathname]),pathnameBase:IT(xT([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=xT([i,l.pathnameBase]))}return a}function wT(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(uS){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function _T(e,t,n){var r,i="string"===typeof e?cT(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?cT(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ET(a),hash:TT(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function bT(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var xT=function(e){return e.join("/").replace(/\/\/+/g,"/")},IT=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ET=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},TT=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function ST(e){CT()||dT(!1);var n=(0,t.useContext)(lT),r=n.basename,i=n.navigator,a=RT(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?cT(e).pathname:e.pathname}(e),h=null!=l&&l.endsWith("/");c="/"===u?r+(h?"/":""):xT([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function CT(){return null!=(0,t.useContext)(hT)}function NT(){return CT()||dT(!1),(0,t.useContext)(hT).location}function AT(){CT()||dT(!1);var e=(0,t.useContext)(lT),n=e.basename,r=e.navigator,i=(0,t.useContext)(fT).matches,a=NT().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=_T(e,JSON.parse(o),a);"/"!==n&&(i.pathname=xT([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function PT(){var e=(0,t.useContext)(fT).matches,n=e[e.length-1];return n?n.params:{}}function RT(e){var n=(0,t.useContext)(fT).matches,r=NT().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return _T(e,JSON.parse(i),r)}),[e,i,r])}function DT(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(fT.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function OT(e){dT(!1)}function LT(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?JE.Pop:u,c=e.navigator,l=e.static,h=void 0!==l&&l;CT()&&dT(!1);var f=IT(r),d=(0,t.useMemo)((function(){return{basename:f,navigator:c,static:h}}),[f,c,h]);"string"===typeof o&&(o=cT(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,w=void 0===k?"":k,_=p.state,b=void 0===_?null:_,x=p.key,I=void 0===x?"default":x,E=(0,t.useMemo)((function(){var e=bT(y,f);return null==e?null:{pathname:e,search:g,hash:w,state:b,key:I}}),[f,y,g,w,b,I]);return null==E?null:(0,t.createElement)(lT.Provider,{value:d},(0,t.createElement)(hT.Provider,{children:a,value:{location:E,navigationType:s}}))}function MT(e){var n=e.children,r=e.location;return function(e,n){CT()||dT(!1);var r,i=(0,t.useContext)(fT).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,NT());if(n){var c,l="string"===typeof n?cT(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||dT(!1),r=l}else r=s;var h=r.pathname||"/",f=pT(e,{pathname:"/"===u?h:h.slice(u.length)||"/"});return DT(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:xT([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:xT([u,e.pathnameBase])})})),i)}(FT(n),r)}function FT(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==OT&&dT(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=FT(e.props.children)),n.push(r)}else n.push.apply(n,FT(e.props.children))})),n}function UT(){return UT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UT.apply(this,arguments)}function VT(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var jT=["onClick","reloadDocument","replace","state","target","to"];function qT(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,nT({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(iT,(function(){if(a)h.call(a),a=null;else{var e=JE.Pop,t=i(),n=t[0],r=t[1];if(h.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){m(-1*o)}},m(o))}}else y(e)}}));var o=JE.Pop,u=i(),s=u[0],c=u[1],l=oT(),h=oT();function f(e){return"string"===typeof e?e:sT(e)}function d(e,t){return void 0===t&&(t=null),nT(tT({pathname:c.pathname,hash:"",search:""},"string"===typeof e?cT(e):e,{state:t,key:uT()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},f(e)]}function v(e,t,n){return!h.length||(h.call({action:e,location:t,retry:n}),!1)}function y(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function m(e){r.go(e)}null==s&&(s=0,r.replaceState(tT({},r.state,{idx:s}),""));var g={get action(){return o},get location(){return c},createHref:f,push:function e(t,i){var a=JE.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var u=p(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(uS){n.location.assign(l)}y(a)}},replace:function e(t,n){var i=JE.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),y(i)}},go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(e){return l.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&n.addEventListener(rT,aT),function(){t(),h.length||n.removeEventListener(rT,aT)}}};return g}({window:i}));var o=a.current,u=s((0,t.useState)({action:o.action,location:o.location}),2),c=u[0],l=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(l)}),[o]),(0,t.createElement)(LT,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:o})}var BT=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=VT(e,jT),h=ST(c),f=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=AT(),s=NT(),c=RT(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||sT(s)===sT(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",UT({},l,{href:h,onClick:function(e){r&&r(e),e.defaultPrevented||i||f(e)},ref:n,target:s}))}));var zT="@firebase/database",WT="0.13.3",KT="";function HT(e){KT=e}var GT=function(){function e(t){l(this,e),this.domStorage_=t,this.prefix_="firebase:"}return f(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Y(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),QT=function(){function e(){l(this,e),this.cache_={},this.isInMemoryStorage=!0}return f(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return X(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),YT=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new GT(t)}}catch(n){}return new QT},$T=YT("localStorage"),JT=YT("sessionStorage"),XT=new De("@firebase/database"),ZT=function(){var e=1;return function(){return e++}}(),eS=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,S(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ue;n.update(t);var r=n.digest();return A.encodeByteArray(r)},tS=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?$(r):r,t+=" "}return t},nS=null,rS=!0,iS=function(e,t){S(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(XT.logLevel=Te.VERBOSE,nS=XT.log.bind(XT),t&&JT.set("logging_enabled",!0)):"function"===typeof e?nS=e:(nS=null,JT.remove("logging_enabled"))},aS=function(){if(!0===rS&&(rS=!1,null===nS&&!0===JT.get("logging_enabled")&&iS(!0)),nS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=tS.apply(null,t);nS(r)}},oS=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];aS.apply(void 0,[e].concat(n))}},uS=function(){var e="FIREBASE INTERNAL ERROR: "+tS.apply(void 0,arguments);XT.error(e)},sS=function(){var e="FIREBASE FATAL ERROR: ".concat(tS.apply(void 0,arguments));throw XT.error(e),new Error(e)},cS=function(){var e="FIREBASE WARNING: "+tS.apply(void 0,arguments);XT.warn(e)},lS=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},hS="[MIN_NAME]",fS="[MAX_NAME]",dS=function(e,t){if(e===t)return 0;if(e===hS||t===fS)return-1;if(t===hS||e===fS)return 1;var n=xS(e),r=xS(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},pS=function(e,t){return e===t?0:e<t?-1:1},vS=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+$(t))},yS=function e(t){if("object"!==typeof t||null===t)return $(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=$(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},mS=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function gS(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var kS=function(e){S(!lS(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var wS=new RegExp("^-?(0*)\\d{1,10}$"),_S=-2147483648,bS=2147483647,xS=function(e){if(wS.test(e)){var t=Number(e);if(t>=_S&&t<=bS)return t}return null},IS=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw cS("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ES=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},TS=function(){function e(t,n){var r=this;l(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){cS('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),SS=function(){function e(t,n,r){var i=this;l(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(aS("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',cS(e)}}]),e}(),CS=function(){function e(t){l(this,e),this.accessToken=t}return f(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();CS.OWNER="owner";var NS="5",AS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PS="websocket",RS="long_polling",DS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];l(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$T.get("host:"+t)||this._host}return f(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$T.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function OS(e,t,n){var r;if(S("string"===typeof t,"typeof type must == string"),S("object"===typeof n,"typeof params must == object"),t===PS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==RS)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return gS(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var LS=function(){function e(){l(this,e),this.counters_={}}return f(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;X(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return O(void 0,this.counters_)}}]),e}(),MS={},FS={};function US(e){var t=e.toString();return MS[t]||(MS[t]=new LS),MS[t]}var VS=function(){function e(t){l(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return f(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&IS((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),jS="start",qS="close",BS=function(){function e(t,n,r,i,a,o,u){var s=this;l(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oS(t),this.stats_=US(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),OS(n,RS,e)}}return f(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new VS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(z()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new zS((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===jS)n.id=a,n.password=o;else{if(i!==qS)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=NS,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&AS.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=$(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=P(t),r=mS(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!z()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=$(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!z()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),zS=function(){function e(t,n,r,i){if(l(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,z())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ZT(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){aS("frame writing exception"),u.stack&&aS(u.stack),aS(u)}}}return f(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;z()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){aS("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||aS("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),WS=null;"undefined"!==typeof MozWebSocket?WS=MozWebSocket:"undefined"!==typeof WebSocket&&(WS=WebSocket);var KS=function(){function e(t,n,r,i,a,o,u){l(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oS(this.connId),this.stats_=US(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return f(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$T.set("previous_websocket_failure",!0);try{var r;if(z()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(NS,"/").concat(KT,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/task-management-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new WS(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){$T.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Y(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(S(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=$(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=mS(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=NS,!z()&&"undefined"!==typeof location&&location.hostname&&AS.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),OS(e,PS,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==WS&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return $T.isInMemoryStorage||!0===$T.get("previous_websocket_failure")}}]),e}();KS.responsesRequiredToBeHealthy=2,KS.healthyTimeout=3e4;var HS=function(){function e(t){l(this,e),this.initTransports_(t)}return f(e,[{key:"initTransports_",value:function(t){var n=KS&&KS.isAvailable(),r=n&&!KS.previouslyFailed();if(t.webSocketOnly&&(n||cS("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[KS];else{var i,a=this.transports_=[],o=d(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[BS,KS]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();HS.globalTransportInitialized_=!1;var GS=function(){function e(t,n,r,i,a,o,u,s,c,h){l(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oS("c:"+this.id+":"),this.transportManager_=new HS(n),this.log_("Connection created"),this.start_()}return f(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=ES((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=vS("t",e),n=vS("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=vS("t",e),n=vS("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=vS("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?uS("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uS("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),NS!==n&&cS("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ES((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ES((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($T.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),QS=function(){function e(){l(this,e)}return f(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),YS=function(){function e(t){l(this,e),this.allowedEvents_=t,this.listeners_={},S(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return f(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=ke(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){S(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),$S=function(e){y(n,e);var t=_(n);function n(){var e;return l(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||U()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return f(n,[{key:"getInitialEvent",value:function(e){return S("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(YS),JS=function(){function e(t,n){if(l(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return f(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function XS(){return new JS("")}function ZS(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function eC(e){return e.pieces_.length-e.pieceNum_}function tC(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new JS(e.pieces_,t)}function nC(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function rC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function iC(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new JS(t,0)}function aC(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof JS)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new JS(n,0)}function oC(e){return e.pieceNum_>=e.pieces_.length}function uC(e,t){var n=ZS(e),r=ZS(t);if(null===n)return t;if(n===r)return uC(tC(e),tC(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function sC(e,t){for(var n=rC(e,0),r=rC(t,0),i=0;i<n.length&&i<r.length;i++){var a=dS(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function cC(e,t){if(eC(e)!==eC(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function lC(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(eC(e)>eC(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var hC=f((function e(t,n){l(this,e),this.errorPrefix_=n,this.parts_=rC(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ve(this.parts_[r]);fC(this)}));function fC(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+dC(e))}function dC(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var pC=function(e){y(n,e);var t=_(n);function n(){var e,r,i;return l(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return f(n,[{key:"getInitialEvent",value:function(e){return S("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(YS),vC=1e3,yC=function(e){y(n,e);var t=_(n);function n(e,r,i,a,o,u,s,c){var h;if(l(this,n),(h=t.call(this)).repoInfo_=e,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=o,h.authTokenProvider_=u,h.appCheckTokenProvider_=s,h.authOverride_=c,h.id=n.nextPersistentConnectionId_++,h.log_=oS("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=vC,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,c&&!z())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return pC.getInstance().on("visible",h.onVisible_,p(h)),-1===e.host.indexOf("fblocal")&&$S.getInstance().on("online",h.onOnline_,p(h)),h}return f(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_($(i)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new L,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=J(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=J(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+$(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):uS("Unrecognized action received from server: "+$(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=vC),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=_e(me().mark((function e(){var t,r,i,a,o,u,c,l,h,f,d,p,v,y,m=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},h=function(e){S(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=s(d,2),v=p[0],y=p[1],u?aS("getToken() completed but was canceled"):(aS("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,c=new GS(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){cS(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&cS(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){aS("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){aS("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ee(this.interruptReasons_)&&(this.reconnectDelay_=vC,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return yS(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new JS(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){aS("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){aS("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=d(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=d(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";z()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+KT.replace(/\./g,"-")]=1,U()?e["framework.cordova"]=1:q()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=$S.getInstance().currentlyOnline();return ee(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&X(e,"w")){var n=Z(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();cS("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(QS);yC.nextPersistentConnectionId_=0,yC.nextConnectionId_=0;var mC,gC=function(){function e(t,n){l(this,e),this.name=t,this.node=n}return f(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),kC=function(){function e(){l(this,e)}return f(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new gC(hS,e),r=new gC(hS,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return gC.MIN}}]),e}(),wC=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){return dS(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw C("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return gC.MIN}},{key:"maxPost",value:function(){return new gC(fS,mC)}},{key:"makePost",value:function(e,t){return S("string"===typeof e,"KeyIndex indexValue must always be a string."),new gC(e,mC)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return mC},set:function(e){mC=e}}]),n}(kC),_C=new wC,bC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;l(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return f(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),xC=function(){function e(t,n,r,i,a){l(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:TC.EMPTY_NODE,this.right=null!=a?a:TC.EMPTY_NODE}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return TC.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return TC.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();xC.RED=!0,xC.BLACK=!1;var IC,EC=function(){function e(){l(this,e)}return f(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new xC(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),TC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;l(this,e),this.comparator_=t,this.root_=n}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,xC.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,xC.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new bC(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new bC(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new bC(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new bC(this.root_,null,this.comparator_,!0,e)}}]),e}();function SC(e,t){return dS(e.name,t.name)}function CC(e,t){return dS(e,t)}TC.EMPTY_NODE=new EC;var NC,AC,PC,RC=function(e){return"number"===typeof e?"number:"+kS(e):"string:"+e},DC=function(e){if(e.isLeafNode()){var t=e.val();S("string"===typeof t||"number"===typeof t||"object"===typeof t&&X(t,".sv"),"Priority must be a string or number.")}else S(e===IC||e.isEmpty(),"priority of unexpected type.");S(e===IC||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},OC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;l(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,S(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),DC(this.priorityNode_)}return f(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return oC(t)?this:".priority"===ZS(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=ZS(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(S(".priority"!==r||1===eC(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(tC(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+RC(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?kS(this.value_):this.value_,this.lazyHash_=eS(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(S(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return S(i>=0,"Unknown leaf type: "+n),S(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return NC},set:function(e){NC=e}}]),e}();OC.VALUE_TYPE_ORDER=["object","boolean","number","string"];var LC,MC,FC=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?dS(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return gC.MIN}},{key:"maxPost",value:function(){return new gC(fS,new OC("[PRIORITY-POST]",PC))}},{key:"makePost",value:function(e,t){var n=AC(e);return new gC(t,new OC("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(kC),UC=new FC,VC=Math.log(2),jC=function(){function e(t){l(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/VC,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return f(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),qC=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new xC(o,a.node,xC.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new xC(o,a.node,xC.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new xC(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,xC.BLACK):(u(h,xC.BLACK),u(h,xC.RED))}return a}(new jC(e.length));return new TC(r||t,a)},BC={},zC=function(){function e(t,n){l(this,e),this.indexes_=t,this.indexSet_=n}return f(e,[{key:"get",value:function(e){var t=Z(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof TC?t:null}},{key:"hasIndex",value:function(e){return X(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){S(t!==_C,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(gC.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?qC(i,t.getCompare()):BC;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(te(this.indexes_,(function(e,i){var a=Z(r.indexSet_,i);if(S(a,"Missing index implementation for "+i),e===BC){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(gC.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),qC(o,a.getCompare())}return BC}var c=n.get(t.name),l=e;return c&&(l=l.remove(new gC(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(te(this.indexes_,(function(e){if(e===BC)return e;var r=n.get(t.name);return r?e.remove(new gC(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return S(BC&&UC,"ChildrenNode.ts has not been loaded"),LC=LC||new e({".priority":BC},{".priority":UC})}}]),e}(),WC=function(){function e(t,n,r){l(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&DC(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return f(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||MC}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?MC:t}},{key:"getChild",value:function(e){var t=ZS(e);return null===t?this:this.getImmediateChild(t).getChild(tC(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(S(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new gC(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?MC:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=ZS(e);if(null===n)return t;S(".priority"!==ZS(e)||1===eC(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(tC(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(UC,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+RC(this.getPriority().val())+":"),this.forEachChild(UC,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":eS(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new gC(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new gC(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new gC(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,gC.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,gC.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===KC?-1:0}},{key:"withIndex",value:function(t){if(t===_C||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===_C||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(UC),r=t.getIterator(UC),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===_C?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return MC||(MC=new e(new TC(CC),null,zC.Default))}}]),e}();WC.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var KC=new(function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.call(this,new TC(CC),WC.EMPTY_NODE,zC.Default)}return f(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return WC.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(WC));Object.defineProperties(gC,{MIN:{value:new gC(hS,WC.EMPTY_NODE)},MAX:{value:new gC(fS,KC)}}),wC.__EMPTY_NODE=WC.EMPTY_NODE,OC.__childrenNodeConstructor=WC,IC=KC,function(e){PC=e}(KC);function HC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return WC.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),S(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new OC(n,HC(t))}if(e instanceof Array){var r=WC.EMPTY_NODE;return gS(e,(function(t,n){if(X(e,t)&&"."!==t.substring(0,1)){var i=HC(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(HC(t))}var i=[],a=!1,o=e;if(gS(o,(function(e,t){if("."!==e.substring(0,1)){var n=HC(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new gC(e,n)))}})),0===i.length)return WC.EMPTY_NODE;var u=qC(i,SC,(function(e){return e.name}),CC);if(a){var s=qC(i,UC.getCompare());return new WC(u,HC(t),new zC({".priority":s},{".priority":UC}))}return new WC(u,HC(t),zC.Default)}!function(e){AC=e}(HC);var GC=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this)).indexPath_=e,S(!oC(e)&&".priority"!==ZS(e),"Can't create PathIndex with empty path or .priority key"),r}return f(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?dS(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=HC(e),r=WC.EMPTY_NODE.updateChild(this.indexPath_,n);return new gC(t,r)}},{key:"maxPost",value:function(){var e=WC.EMPTY_NODE.updateChild(this.indexPath_,KC);return new gC(fS,e)}},{key:"toString",value:function(){return rC(this.indexPath_,0).join("/")}}]),n}(kC),QC=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?dS(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return gC.MIN}},{key:"maxPost",value:function(){return gC.MAX}},{key:"makePost",value:function(e,t){var n=HC(e);return new gC(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(kC),YC=new QC,$C="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",JC=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=$C.charAt(n%64),n=Math.floor(n/64);S(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=$C.charAt(t[r]);return S(20===o.length,"nextPushId: Length should be 20."),o}}(),XC=function(e){if("2147483647"===e)return"-";var t=xS(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return fS;var a=n[i],o=$C.charAt($C.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},ZC=function(e){if("-2147483648"===e)return hS;var t=xS(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=$C.charAt($C.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function eN(e){return{type:"value",snapshotNode:e}}function tN(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function nN(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function rN(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var iN=function(){function e(t){l(this,e),this.index_=t}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){S(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(nN(t,o)):S(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(tN(t,n)):a.trackChildChange(rN(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(UC,(function(e,r){t.hasChild(e)||n.trackChildChange(nN(e,r))})),t.isLeafNode()||t.forEachChild(UC,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(rN(t,r,i))}else n.trackChildChange(tN(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?WC.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),aN=function(){function e(t){l(this,e),this.indexedFilter_=new iN(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return f(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new gC(t,n))||(n=WC.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=WC.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(WC.EMPTY_NODE);var i=this;return t.forEachChild(UC,(function(e,t){i.matches(new gC(e,t))||(r=r.updateImmediateChild(e,WC.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),oN=function(){function e(t){l(this,e),this.rangedFilter_=new aN(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new gC(t,n))||(n=WC.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=WC.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=WC.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(WC.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,s)<=0?f++:r=r.updateImmediateChild(p.name,WC.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;S(u.numChildren()===this.limit_,"");var s=new gC(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(rN(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(nN(t,h));var p=u.updateImmediateChild(t,WC.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(tN(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(nN(c.name,c.node)),i.trackChildChange(tN(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,WC.EMPTY_NODE)):e}}]),e}(),uN=function(){function e(){l(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=UC}return f(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hS}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fS}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===UC}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function sN(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function cN(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function lN(e,t){var n=e.copy();return n.index_=t,n}function hN(e){var t,n={};return e.isDefault()||(e.index_===UC?t="$priority":e.index_===YC?t="$value":e.index_===_C?t="$key":(S(e.index_ instanceof GC,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=$(t),e.startSet_&&(n.startAt=$(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+$(e.indexStartName_))),e.endSet_&&(n.endAt=$(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+$(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function fN(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==UC&&(t.i=e.index_.toString()),t}var dN=function(e){y(n,e);var t=_(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=oS("p:rest:"),o.listens_={},o}return f(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=hN(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Z(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=hN(e._queryParams),r=e._path.toString(),i=new L;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=s(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+ie(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Y(l.responseText)}catch(n){cS("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&cS("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(S(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(QS),pN=function(){function e(){l(this,e),this.rootNode_=WC.EMPTY_NODE}return f(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function vN(){return{value:null,children:new Map}}function yN(e,t,n){if(oC(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ZS(t);e.children.has(r)||e.children.set(r,vN()),yN(e.children.get(r),t=tC(t),n)}}function mN(e,t){if(oC(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(UC,(function(t,n){yN(e,new JS(t),n)})),mN(e,t)}if(e.children.size>0){var r=ZS(t);if(t=tC(t),e.children.has(r))mN(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function gN(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){gN(r,new JS(t.toString()+"/"+e),n)}))}var kN,wN=function(){function e(t){l(this,e),this.collection_=t,this.last_=null}return f(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&gS(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),_N=function(){function e(t,n){l(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new wN(t);var r=1e4+2e4*Math.random();ES(this.reportStats_.bind(this),Math.floor(r))}return f(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;gS(t,(function(t,i){i>0&&X(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),ES(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function bN(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(kN||(kN={}));var xN,IN=function(){function e(t,n,r){l(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=kN.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return f(e,[{key:"operationForChild",value:function(t){if(oC(this.path)){if(null!=this.affectedTree.value)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new JS(t));return new e(XS(),n,this.revert)}return S(ZS(this.path)===t,"operationForChild called for unrelated child."),new e(tC(this.path),this.affectedTree,this.revert)}}]),e}(),EN=function(){function e(t,n){l(this,e),this.source=t,this.path=n,this.type=kN.LISTEN_COMPLETE}return f(e,[{key:"operationForChild",value:function(t){return oC(this.path)?new e(this.source,XS()):new e(this.source,tC(this.path))}}]),e}(),TN=function(){function e(t,n,r){l(this,e),this.source=t,this.path=n,this.snap=r,this.type=kN.OVERWRITE}return f(e,[{key:"operationForChild",value:function(t){return oC(this.path)?new e(this.source,XS(),this.snap.getImmediateChild(t)):new e(this.source,tC(this.path),this.snap)}}]),e}(),SN=function(){function e(t,n,r){l(this,e),this.source=t,this.path=n,this.children=r,this.type=kN.MERGE}return f(e,[{key:"operationForChild",value:function(t){if(oC(this.path)){var n=this.children.subtree(new JS(t));return n.isEmpty()?null:n.value?new TN(this.source,XS(),n.value):new e(this.source,XS(),n)}return S(ZS(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,tC(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),CN=function(){function e(t,n,r){l(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return f(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(oC(e))return this.isFullyInitialized()&&!this.filtered_;var t=ZS(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),NN=f((function e(t){l(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function AN(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw C("Should only compare child_ events.");var r=new gC(t.childName,t.snapshotNode),i=new gC(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function PN(e,t){return{eventCache:e,serverCache:t}}function RN(e,t,n,r){return PN(new CN(t,n,r),e.serverCache)}function DN(e,t,n,r){return PN(e.eventCache,new CN(t,n,r))}function ON(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function LN(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var MN=function(){return xN||(xN=new TC(pS)),xN},FN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MN();l(this,e),this.value=t,this.children=n}return f(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:XS(),value:this.value};if(oC(e))return null;var n=ZS(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(tC(e),t);return null!=i?{path:aC(new JS(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(oC(t))return this;var n=ZS(t),r=this.children.get(n);return null!==r?r.subtree(tC(t)):new e(null)}},{key:"set",value:function(t,n){if(oC(t))return new e(n,this.children);var r=ZS(t),i=(this.children.get(r)||new e(null)).set(tC(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(oC(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ZS(t),r=this.children.get(n);if(r){var i,a=r.remove(tC(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(oC(e))return this.value;var t=ZS(e),n=this.children.get(t);return n?n.get(tC(e)):null}},{key:"setTree",value:function(t,n){if(oC(t))return n;var r,i=ZS(t),a=(this.children.get(i)||new e(null)).setTree(tC(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(XS(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(aC(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,XS(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(oC(e))return null;var i=ZS(e),a=this.children.get(i);return a?a.findOnPath_(tC(e),aC(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,XS(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(oC(t))return this;this.value&&r(n,this.value);var i=ZS(t),a=this.children.get(i);return a?a.foreachOnPath_(tC(t),aC(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(XS(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(aC(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return gS(t,(function(e,t){n=n.set(new JS(e),t)})),n}}]),e}(),UN=function(){function e(t){l(this,e),this.writeTree_=t}return f(e,null,[{key:"empty",value:function(){return new e(new FN(null))}}]),e}();function VN(e,t,n){if(oC(t))return new UN(new FN(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=uC(i,t);return a=a.updateChild(o,n),new UN(e.writeTree_.set(i,a))}var u=new FN(n),s=e.writeTree_.setTree(t,u);return new UN(s)}function jN(e,t,n){var r=e;return gS(n,(function(e,n){r=VN(r,aC(t,e),n)})),r}function qN(e,t){if(oC(t))return UN.empty();var n=e.writeTree_.setTree(t,new FN(null));return new UN(n)}function BN(e,t){return null!=zN(e,t)}function zN(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(uC(n.path,t)):null}function WN(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(UC,(function(e,n){t.push(new gC(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new gC(e,n.value))})),t}function KN(e,t){if(oC(t))return e;var n=zN(e,t);return new UN(null!=n?new FN(n):e.writeTree_.subtree(t))}function HN(e){return e.writeTree_.isEmpty()}function GN(e,t){return QN(XS(),e.writeTree_,t)}function QN(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(S(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=QN(aC(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(aC(e,".priority"),r)),n}function YN(e,t){return cA(t,e)}function $N(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function JN(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));S(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&XN(u,r.path)?i=!1:lC(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=eA(e.allWrites,ZN,XS()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=qN(e.visibleWrites,r.path):gS(r.children,(function(t){e.visibleWrites=qN(e.visibleWrites,aC(r.path,t))}));return!0}return!1}function XN(e,t){if(e.snap)return lC(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&lC(aC(e.path,n),t))return!0;return!1}function ZN(e){return e.visible}function eA(e,t,n){for(var r=UN.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)lC(n,o)?r=VN(r,u=uC(n,o),a.snap):lC(o,n)&&(u=uC(o,n),r=VN(r,XS(),a.snap.getChild(u)));else{if(!a.children)throw C("WriteRecord should have .snap or .children");if(lC(n,o))r=jN(r,u=uC(n,o),a.children);else if(lC(o,n))if(oC(u=uC(o,n)))r=jN(r,XS(),a.children);else{var s=Z(a.children,ZS(u));if(s){var c=s.getChild(tC(u));r=VN(r,XS(),c)}}}}}return r}function tA(e,t,n,r,i){if(r||i){var a=KN(e.visibleWrites,t);if(!i&&HN(a))return n;if(i||null!=n||BN(a,XS())){return GN(eA(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(lC(e.path,t)||lC(t,e.path))}),t),n||WC.EMPTY_NODE)}return null}var o=zN(e.visibleWrites,t);if(null!=o)return o;var u=KN(e.visibleWrites,t);return HN(u)?n:null!=n||BN(u,XS())?GN(u,n||WC.EMPTY_NODE):null}function nA(e,t,n,r){return tA(e.writeTree,e.treePath,t,n,r)}function rA(e,t){return function(e,t,n){var r=WC.EMPTY_NODE,i=zN(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(UC,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=KN(e.visibleWrites,t);return n.forEachChild(UC,(function(e,t){var n=GN(KN(a,new JS(e)),t);r=r.updateImmediateChild(e,n)})),WN(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return WN(KN(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function iA(e,t,n,r){return function(e,t,n,r,i){S(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=aC(t,n);if(BN(e.visibleWrites,a))return null;var o=KN(e.visibleWrites,a);return HN(o)?i.getChild(n):GN(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function aA(e,t){return function(e,t){return zN(e.visibleWrites,t)}(e.writeTree,aC(e.treePath,t))}function oA(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=KN(e.visibleWrites,t),c=zN(s,XS());if(null!=c)u=c;else{if(null==n)return[];u=GN(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function uA(e,t,n){return function(e,t,n,r){var i=aC(t,n),a=zN(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?GN(KN(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function sA(e,t){return cA(aC(e.treePath,t),e.writeTree)}function cA(e,t){return{treePath:e,writeTree:t}}var lA=function(){function e(){l(this,e),this.changeMap=new Map}return f(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;S("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),S(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,rN(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,nN(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,tN(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw C("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,rN(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),hA=new(function(){function e(){l(this,e)}return f(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),fA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return f(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new CN(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uA(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:LN(this.viewCache_),i=oA(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function dA(e,t,n,r,i){var a,o,u=new lA;if(n.type===kN.OVERWRITE){var s=n;s.source.fromUser?a=yA(e,t,s.path,s.snap,r,i,u):(S(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!oC(s.path),a=vA(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===kN.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=aC(n,r);mA(t,ZS(c))&&(u=yA(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=aC(n,r);mA(t,ZS(c))||(u=yA(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(S(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=kA(e,t,c.path,c.children,r,i,o,u))}else if(n.type===kN.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=aA(r,n))return t;var u,s=new fA(r,t,i),c=t.eventCache.getNode();if(oC(n)||".priority"===ZS(n)){var l;if(t.serverCache.isFullyInitialized())l=nA(r,LN(t));else{var h=t.serverCache.getNode();S(h instanceof WC,"serverChildren would be complete if leaf node"),l=rA(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=ZS(n),d=uA(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,tC(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,WC.EMPTY_NODE,tC(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=nA(r,LN(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=aA(r,XS()),RN(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=aA(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(oC(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return vA(e,t,n,s.getNode().getChild(n),i,a,u,o);if(oC(n)){var c=new FN(null);return s.getNode().forEachChild(_C,(function(e,t){c=c.set(new JS(e),t)})),kA(e,t,n,c,i,a,u,o)}return t}var l=new FN(null);return r.foreach((function(e,t){var r=aC(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),kA(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==kN.LISTEN_COMPLETE)throw C("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=DN(t,a.getNode(),a.isFullyInitialized()||oC(n),a.isFiltered());return pA(e,o,n,r,hA,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ON(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(eN(ON(t)))}}(t,a,h),{viewCache:a,changes:h}}function pA(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=aA(r,n))return t;if(oC(n))if(S(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=LN(t),l=rA(r,c instanceof WC?c:WC.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=nA(r,LN(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=ZS(n);if(".priority"===f){S(1===eC(n),"Can't have a priority with additional path components");var d=s.getNode(),p=iA(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=tC(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=iA(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=uA(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return RN(t,o,s.isFullyInitialized()||oC(n),e.filter.filtersNodes())}function vA(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(oC(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=ZS(n);if(!c.isCompleteForPath(n)&&eC(n)>1)return t;var d=tC(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,hA,null)}var v=DN(t,s,c.isFullyInitialized()||oC(n),l.filtersNodes());return pA(e,v,n,i,new fA(i,v,a),u)}function yA(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new fA(i,t,a);if(oC(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=RN(t,s,!0,e.filter.filtersNodes());else{var h=ZS(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=RN(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=tC(n),p=c.getNode().getImmediateChild(h);if(oC(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===nC(d)&&v.getChild(iC(d)).isEmpty()?v:v.updateChild(d,r):WC.EMPTY_NODE}if(p.equals(f))u=t;else u=RN(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function mA(e,t){return e.eventCache.isCompleteForChild(t)}function gA(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function kA(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=oC(n)?r:new FN(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=gA(0,t.serverCache.getNode().getImmediateChild(n),r);c=vA(e,c,new JS(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var h=gA(0,t.serverCache.getNode().getImmediateChild(n),r);c=vA(e,c,new JS(n),h,i,a,o,u)}})),c}var wA,_A=function(){function e(t,n){l(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new iN(i.getIndex()),o=(r=i).loadsAllData()?new iN(r.getIndex()):r.hasLimit()?new oN(r):new aN(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(WC.EMPTY_NODE,u.getNode(),null),h=o.updateFullNode(WC.EMPTY_NODE,s.getNode(),null),f=new CN(c,u.isFullyInitialized(),a.filtersNodes()),d=new CN(h,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=PN(d,f),this.eventGenerator_=new NN(this.query_)}return f(e,[{key:"query",get:function(){return this.query_}}]),e}();function bA(e,t){var n=LN(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!oC(t)&&!n.getImmediateChild(ZS(t)).isEmpty())?n.getChild(t):null}function xA(e){return 0===e.eventRegistrations_.length}function IA(e,t,n){var r=[];if(n){S(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function EA(e,t,n,r){t.type===kN.MERGE&&null!==t.source.queryId&&(S(LN(e.viewCache_),"We should always have a full cache before handling merges"),S(ON(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=dA(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,S(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),S(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),S(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,TA(e,u.changes,u.viewCache.eventCache.getNode(),null)}function TA(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),AN(e,i,"child_removed",t,r,n),AN(e,i,"child_added",t,r,n),AN(e,i,"child_moved",a,r,n),AN(e,i,"child_changed",t,r,n),AN(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var SA,CA=f((function e(){l(this,e),this.views=new Map}));function NA(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return S(null!=a,"SyncTree gave us an op for an invalid query."),EA(a,t,n,r)}var o,u=[],s=d(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(EA(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function AA(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=nA(n,i?r:null),s=!1;u?s=!0:r instanceof WC?(u=rA(n,r),s=!1):(u=WC.EMPTY_NODE,s=!1);var c=PN(new CN(u,s,!1),new CN(r,i,!1));return new _A(t,c)}return o}function PA(e,t,n,r,i,a){var o=AA(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(UC,(function(e,t){r.push(tN(e,t))})),n.isFullyInitialized()&&r.push(eN(n.getNode())),TA(e,r,n.getNode(),t)}(o,n)}function RA(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=FA(e);if("default"===i){var c,l=d(e.views.entries());try{for(l.s();!(c=l.n()).done;){var h=s(c.value,2),f=h[0],p=h[1];o=o.concat(IA(p,n,r)),xA(p)&&(e.views.delete(f),p.query._queryParams.loadsAllData()||a.push(p.query))}}catch(y){l.e(y)}finally{l.f()}}else{var v=e.views.get(i);v&&(o=o.concat(IA(v,n,r)),xA(v)&&(e.views.delete(i),v.query._queryParams.loadsAllData()||a.push(v.query)))}return u&&!FA(e)&&a.push(new(S(wA,"Reference.ts has not been loaded"),wA)(t._repo,t._path)),{removed:a,events:o}}function DA(e){var t,n=[],r=d(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function OA(e,t){var n,r=null,i=d(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||bA(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function LA(e,t){if(t._queryParams.loadsAllData())return UA(e);var n=t._queryIdentifier;return e.views.get(n)}function MA(e,t){return null!=LA(e,t)}function FA(e){return null!=UA(e)}function UA(e){var t,n=d(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var VA=1,jA=f((function e(t){l(this,e),this.listenProvider_=t,this.syncPointTree_=new FN(null),this.pendingWriteTree_={visibleWrites:UN.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function qA(e,t,n,r,i){return function(e,t,n,r,i){S(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=VN(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?JA(e,new TN({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function BA(e,t,n,r){!function(e,t,n,r){S(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=jN(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=FN.fromObject(n);return JA(e,new SN({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function zA(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$N(e.pendingWriteTree_,t),i=JN(e.pendingWriteTree_,t);if(i){var a=new FN(null);return null!=r.snap?a=a.set(XS(),!0):gS(r.children,(function(e){a=a.set(new JS(e),!0)})),JA(e,new IN(r.path,a,n))}return[]}function WA(e,t,n){return JA(e,new TN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function KA(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||MA(a,t))){var u=RA(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var s=u.removed;o=u.events;var c=-1!==s.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return FA(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&FA(t))return[UA(t)];var r=[];return t&&(r=DA(t)),gS(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,y=eP(e,p);e.listenProvider_.startListening(oP(v),tP(e,v),y.hashFn,y.onComplete)}}if(!l&&s.length>0&&!r)if(c){e.listenProvider_.stopListening(oP(t),null)}else s.forEach((function(t){var n=e.queryToTagMap.get(nP(t));e.listenProvider_.stopListening(oP(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=nP(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,s)}return o}function HA(e,t,n,r){var i=rP(e,r);if(null!=i){var a=iP(i),o=a.path,u=a.queryId,s=uC(o,t);return aP(e,o,new TN(bN(u),s,n))}return[]}function GA(e,t){var n=e._path,r=null,i=!1;t.syncPointTree_.foreachOnPath(n,(function(e,t){var a=uC(e,n);r=r||OA(t,a),i=i||FA(t)}));var a,o=t.syncPointTree_.get(n);(o?(i=i||FA(o),r=r||OA(o,XS())):(o=new CA,t.syncPointTree_=t.syncPointTree_.set(n,o)),null!=r)?a=!0:(a=!1,r=WC.EMPTY_NODE,t.syncPointTree_.subtree(n).foreachChild((function(e,t){var n=OA(t,XS());n&&(r=r.updateImmediateChild(e,n))})));var u=MA(o,e);if(!u&&!e._queryParams.loadsAllData()){var s=nP(e);S(!t.queryToTagMap.has(s),"View does not exist, but we have a tag");var c=VA++;t.queryToTagMap.set(s,c),t.tagToQueryMap.set(c,s)}return{syncPoint:o,writesCache:YN(t.pendingWriteTree_,n),serverCache:r,serverCacheComplete:a,foundAncestorDefaultView:i,viewAlreadyExists:u}}function QA(e,t,n){var r=GA(t,e),i=r.syncPoint,a=r.serverCache,o=r.writesCache,u=r.serverCacheComplete,s=r.viewAlreadyExists,c=r.foundAncestorDefaultView,l=PA(i,t,n,o,a,u);if(!s&&!c){var h=LA(i,t);l=l.concat(function(e,t,n){var r=t._path,i=tP(e,t),a=eP(e,n),o=e.listenProvider_.startListening(oP(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)S(!FA(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!oC(e)&&t&&FA(t))return[UA(t).query];var r=[];return t&&(r=r.concat(DA(t).map((function(e){return e.query})))),gS(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(oP(l),tP(e,l))}return o}(e,t,h))}return l}function YA(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=OA(n,uC(e,t));if(r)return r}));return tA(r,t,i,n,!0)}function $A(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=uC(e,n);r=r||OA(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||OA(i,XS()):(i=new CA,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new CN(r,!0,!1):null;return function(e){return ON(e.viewCache_)}(AA(i,t,YN(e.pendingWriteTree_,t._path),a?o.getNode():WC.EMPTY_NODE,a))}function JA(e,t){return XA(t,e.syncPointTree_,null,YN(e.pendingWriteTree_,XS()))}function XA(e,t,n,r){if(oC(e.path))return ZA(e,t,n,r);var i=t.get(XS());null==n&&null!=i&&(n=OA(i,XS()));var a=[],o=ZS(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=sA(r,o);a=a.concat(XA(u,s,c,l))}return i&&(a=a.concat(NA(i,e,r,n))),a}function ZA(e,t,n,r){var i=t.get(XS());null==n&&null!=i&&(n=OA(i,XS()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=sA(r,t),s=e.operationForChild(t);s&&(a=a.concat(ZA(s,i,o,u)))})),i&&(a=a.concat(NA(i,e,r,n))),a}function eP(e,t){var n=t.query,r=tP(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||WC.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=rP(e,n);if(r){var i=iP(r),a=i.path,o=i.queryId,u=uC(a,t);return aP(e,a,new EN(bN(o),u))}return[]}(e,n._path,r):function(e,t){return JA(e,new EN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return KA(e,n,null,i)}}}function tP(e,t){var n=nP(t);return e.queryToTagMap.get(n)}function nP(e){return e._path.toString()+"$"+e._queryIdentifier}function rP(e,t){return e.tagToQueryMap.get(t)}function iP(e){var t=e.indexOf("$");return S(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new JS(e.substr(0,t))}}function aP(e,t,n){var r=e.syncPointTree_.get(t);return S(r,"Missing sync point for query tag that we're tracking"),NA(r,n,YN(e.pendingWriteTree_,t),null)}function oP(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(S(SA,"Reference.ts has not been loaded"),SA)(e._repo,e._path):e}var uP=function(){function e(t){l(this,e),this.node_=t}return f(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),sP=function(){function e(t,n){l(this,e),this.syncTree_=t,this.path_=n}return f(e,[{key:"getImmediateChild",value:function(t){var n=aC(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return YA(this.syncTree_,this.path_)}}]),e}(),cP=function(e,t,n){return e&&"object"===typeof e?(S(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?lP(e[".sv"],t,n):"object"===typeof e[".sv"]?hP(e[".sv"],t):void S(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},lP=function(e,t,n){if("timestamp"===e)return n.timestamp;S(!1,"Unexpected server value: "+e)},hP=function(e,t,n){e.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&S(!1,"Unexpected increment value: "+r);var i=t.node();if(S(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},fP=function(e,t,n,r){return pP(t,new sP(n,e),r)},dP=function(e,t,n){return pP(e,new uP(t),n)};function pP(e,t,n){var r,i=e.getPriority().val(),a=cP(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=cP(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new OC(u,HC(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new OC(a))),s.forEachChild(UC,(function(e,i){var a=pP(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var vP=f((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};l(this,e),this.name=t,this.parent=n,this.node=r}));function yP(e,t){for(var n=t instanceof JS?t:new JS(t),r=e,i=ZS(n);null!==i;){var a=Z(r.node.children,i)||{children:{},childCount:0};r=new vP(i,r,a),i=ZS(n=tC(n))}return r}function mP(e){return e.node.value}function gP(e,t){e.node.value=t,xP(e)}function kP(e){return e.node.childCount>0}function wP(e,t){gS(e.node.children,(function(n,r){t(new vP(n,e,r))}))}function _P(e,t,n,r){n&&!r&&t(e),wP(e,(function(e){_P(e,t,!0,r)})),n&&r&&t(e)}function bP(e){return new JS(null===e.parent?e.name:bP(e.parent)+"/"+e.name)}function xP(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===mP(e)&&!kP(e)}(n),i=X(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,xP(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,xP(e))}(e.parent,e.name,e)}var IP=/[\[\].#$\/\u0000-\u001F\u007F]/,EP=/[\[\].#$\u0000-\u001F\u007F]/,TP=10485760,SP=function(e){return"string"===typeof e&&0!==e.length&&!IP.test(e)},CP=function(e){return"string"===typeof e&&0!==e.length&&!EP.test(e)},NP=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!lS(e)||e&&"object"===typeof e&&X(e,".sv")},AP=function(e,t,n,r){r&&void 0===t||PP(fe(e,"value"),t,n)},PP=function e(t,n,r){var i=r instanceof JS?new hC(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+dC(i));if("function"===typeof n)throw new Error(t+"contains a function "+dC(i)+" with contents = "+n.toString());if(lS(n))throw new Error(t+"contains "+n.toString()+" "+dC(i));if("string"===typeof n&&n.length>TP/3&&ve(n)>TP)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+dC(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(gS(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!SP(n)))throw new Error(t+" contains an invalid key ("+n+") "+dC(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=ve(s),fC(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ve(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+dC(i)+" in addition to actual children.")}},RP=function(e,t,n,r){if(!r||void 0!==t){var i=fe(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];gS(t,(function(e,t){var r=new JS(e);if(PP(i,t,aC(n,r)),".priority"===nC(r)&&!NP(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=rC(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!SP(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(sC);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&lC(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},DP=function(e,t,n){if(!n||void 0!==t){if(lS(t))throw new Error(fe(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!NP(t))throw new Error(fe(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},OP=function(e,t,n,r){if((!r||void 0!==n)&&!SP(n))throw new Error(fe(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},LP=function(e,t,n,r){if((!r||void 0!==n)&&!CP(n))throw new Error(fe(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},MP=function(e,t){if(".info"===ZS(t))throw new Error(e+" failed = Can't modify data under /.info/")},FP=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!SP(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),CP(e)}(n))throw new Error(fe(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},UP=f((function e(){l(this,e),this.eventLists_=[],this.recursionDepth_=0}));function VP(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||cC(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function jP(e,t,n){VP(e,n),BP(e,(function(e){return cC(e,t)}))}function qP(e,t,n){VP(e,n),BP(e,(function(e){return lC(e,t)||lC(t,e)}))}function BP(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(zP(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function zP(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();nS&&aS("event: "+n.toString()),IS(r)}}}var WP="repo_interrupt",KP=function(){function e(t,n,r,i){l(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new UP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vN(),this.transactionQueueTree_=new vP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return f(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function HP(e,t,n){if(e.stats_=US(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new dN(e.repoInfo_,(function(t,n,r,i){YP(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return $P(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new yC(e.repoInfo_,t,(function(t,n,r,i){YP(e,t,n,r,i)}),(function(t){$P(e,t)}),(function(t){!function(e,t){gS(t,(function(t,n){JP(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return FS[n]||(FS[n]=t()),FS[n]}(e.repoInfo_,(function(){return new _N(e.stats_,e.server_)})),e.infoData_=new pN,e.infoSyncTree_=new jA({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=WA(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),JP(e,"connected",!1),e.serverSyncTree_=new jA({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);qP(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function GP(e){var t=e.infoData_.getNode(new JS(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function QP(e){return(t=(t={timestamp:GP(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function YP(e,t,n,r,i){e.dataUpdateCount++;var a=new JS(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=te(n,(function(e){return HC(e)}));o=function(e,t,n,r){var i=rP(e,r);if(i){var a=iP(i),o=a.path,u=a.queryId,s=uC(o,t),c=FN.fromObject(n);return aP(e,o,new SN(bN(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=HC(n);o=HA(e.serverSyncTree_,a,s,i)}else if(r){var c=te(n,(function(e){return HC(e)}));o=function(e,t,n){var r=FN.fromObject(n);return JA(e,new SN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=HC(n);o=WA(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=lR(e,a)),qP(e.eventQueue_,h,o)}function $P(e,t){JP(e,"connected",t),!1===t&&function(e){aR(e,"onDisconnectEvents");var t=QP(e),n=vN();gN(e.onDisconnect_,XS(),(function(r,i){var a=fP(r,i,e.serverSyncTree_,t);yN(n,r,a)}));var r=[];gN(n,XS(),(function(t,n){r=r.concat(WA(e.serverSyncTree_,t,n));var i=vR(e,t);lR(e,i)})),e.onDisconnect_=vN(),qP(e.eventQueue_,XS(),r)}(e)}function JP(e,t,n){var r=new JS("/.info/"+t),i=HC(n);e.infoData_.updateSnapshot(r,i);var a=WA(e.infoSyncTree_,r,i);qP(e.eventQueue_,r,a)}function XP(e){return e.nextWriteId_++}function ZP(e,t){var n=$A(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=HC(n).withIndex(t._queryParams.getIndex());if(t._queryParams.loadsAllData())WA(e.serverSyncTree_,t._path,r);else{var i=function(e,t){var n=GA(t,e),r=n.syncPoint,i=n.serverCache,a=AA(r,t,n.writesCache,i,n.serverCacheComplete);return r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,a),t._queryParams.loadsAllData()?null:tP(e,t)}(e.serverSyncTree_,t);HA(e.serverSyncTree_,t._path,r,i)}return KA(e.serverSyncTree_,t,null).length>0&&aR(e,"unexpected cancel events in repoGetValue"),r}),(function(n){return aR(e,"get for query "+$(t)+" failed: "+n),Promise.reject(new Error(n))}))}function eR(e,t,n,r,i){aR(e,"set",{path:t.toString(),value:n,priority:r});var a=QP(e),o=HC(n,r),u=YA(e.serverSyncTree_,t),s=dP(o,u,a),c=XP(e),l=qA(e.serverSyncTree_,t,s,c,!0);VP(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||cS("set at "+t+" failed: "+n);var o=zA(e.serverSyncTree_,c,!a);qP(e.eventQueue_,t,o),oR(e,i,n,r)}));var h=vR(e,t);lR(e,h),qP(e.eventQueue_,h,[])}function tR(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&mN(e.onDisconnect_,t),oR(e,n,r,i)}))}function nR(e,t,n,r){var i=HC(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&yN(e.onDisconnect_,t,i),oR(e,r,n,a)}))}function rR(e,t,n){var r;r=".info"===ZS(t._path)?KA(e.infoSyncTree_,t,n):KA(e.serverSyncTree_,t,n),jP(e.eventQueue_,t._path,r)}function iR(e){e.persistentConnection_&&e.persistentConnection_.interrupt(WP)}function aR(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];aS.apply(void 0,[t].concat(r))}function oR(e,t,n,r){t&&IS((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function uR(e,t,n){return YA(e.serverSyncTree_,t,n)||WC.EMPTY_NODE}function sR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||pR(e,t),mP(t)){var n=fR(e,t);S(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&cR(e,bP(t),n)}else kP(t)&&wP(t,(function(t){sR(e,t)}))}function cR(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=uR(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];S(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=uC(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){aR(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(zA(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);pR(e,yP(e.transactionQueueTree_,t)),sR(e,e.transactionQueueTree_),qP(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)IS(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{cS("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}lR(e,t)}}),o)}function lR(e,t){var n=hR(e,t),r=bP(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=uC(n,s.path),l=!1,h=void 0;if(S(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(zA(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,h="maxretry",i=i.concat(zA(e.serverSyncTree_,s.currentWriteId,!0));else{var f=uR(e,s.path,o);s.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){PP("transaction failed: Data returned ",d,s.path);var p=HC(d);"object"===typeof d&&null!=d&&X(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=s.currentWriteId,y=QP(e),m=dP(p,f,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=XP(e),o.splice(o.indexOf(v),1),i=(i=i.concat(qA(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(zA(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(zA(e.serverSyncTree_,s.currentWriteId,!0))}qP(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},s=0;s<t.length;s++)u(s);pR(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)IS(r[c]);sR(e,e.transactionQueueTree_)}(e,fR(e,n),r),r}function hR(e,t){var n,r=e.transactionQueueTree_;for(n=ZS(t);null!==n&&void 0===mP(r);)r=yP(r,n),n=ZS(t=tC(t));return r}function fR(e,t){var n=[];return dR(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function dR(e,t,n){var r=mP(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);wP(t,(function(t){dR(e,t,n)}))}function pR(e,t){var n=mP(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,gP(t,n.length>0?n:void 0)}wP(t,(function(t){pR(e,t)}))}function vR(e,t){var n=bP(hR(e,t)),r=yP(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){yR(e,t)})),yR(e,r),_P(r,(function(t){yR(e,t)})),n}function yR(e,t){var n=mP(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(S(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(S(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(zA(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?gP(t,void 0):n.length=a+1,qP(e.eventQueue_,bP(t),i);for(var u=0;u<r.length;u++)IS(r[u])}}var mR=function(e,t){var n=gR(e),r=n.namespace;"firebase.com"===n.domain&&sS(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||sS("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&cS("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new DS(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new JS(n.pathString)}},gR=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=d(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):cS("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},kR=function(){function e(t,n,r,i){l(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return f(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+$(this.snapshot.exportVal())}}]),e}(),wR=function(){function e(t,n,r){l(this,e),this.eventRegistration=t,this.error=n,this.path=r}return f(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),_R=function(){function e(t,n){l(this,e),this.snapshotCallback=t,this.cancelCallback=n}return f(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),bR=function(){function e(t,n){l(this,e),this._repo=t,this._path=n}return f(e,[{key:"cancel",value:function(){var e=new L;return tR(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){MP("OnDisconnect.remove",this._path);var e=new L;return nR(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){MP("OnDisconnect.set",this._path),AP("OnDisconnect.set",e,this._path,!1);var t=new L;return nR(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){MP("OnDisconnect.setWithPriority",this._path),AP("OnDisconnect.setWithPriority",e,this._path,!1),DP("OnDisconnect.setWithPriority",t,!1);var n=new L;return function(e,t,n,r,i){var a=HC(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&yN(e.onDisconnect_,t,a),oR(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){MP("OnDisconnect.update",this._path),RP("OnDisconnect.update",e,this._path,!1);var t=new L;return function(e,t,n,r){if(ee(n))return aS("onDisconnect().update() called with empty data.  Don't do anything."),void oR(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&gS(n,(function(n,r){var i=HC(r);yN(e.onDisconnect_,aC(t,n),i)})),oR(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),xR=function(){function e(t,n,r,i){l(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return f(e,[{key:"key",get:function(){return oC(this._path)?null:nC(this._path)}},{key:"ref",get:function(){return new SR(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=fN(this._queryParams),t=yS(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return fN(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ye(t))instanceof e))return!1;var n=this._repo===t._repo,r=cC(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function IR(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function ER(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===_C){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==hS)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==fS)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===UC){if(null!=t&&!NP(t)||null!=n&&!NP(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(S(e.getIndex()instanceof GC||e.getIndex()===YC,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function TR(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var SR=function(e){y(n,e);var t=_(n);function n(e,r){return l(this,n),t.call(this,e,r,new uN,!1)}return f(n,[{key:"parent",get:function(){var e=iC(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(xR),CR=function(){function e(t,n,r){l(this,e),this._node=t,this.ref=n,this._index=r}return f(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new JS(t),r=PR(this.ref,t);return new e(this._node.getChild(n),r,UC)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,PR(n.ref,r),UC))}))}},{key:"hasChild",value:function(e){var t=new JS(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function NR(e,t){return(e=ye(e))._checkNotDeleted("ref"),void 0!==t?PR(e._root,t):e._root}function AR(e,t){(e=ye(e))._checkNotDeleted("refFromURL");var n=mR(t,e._repo.repoInfo_.nodeAdmin);FP("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||sS("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),NR(e,n.path.toString())}function PR(e,t){var n,r,i,a;return null===ZS((e=ye(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),LP(n,r,i,a)):LP("child","path",t,!1),new SR(e._repo,aC(e._path,t))}function RR(e,t){e=ye(e),MP("push",e._path),AP("push",t,e._path,!0);var n,r=GP(e._repo),i=JC(r),a=PR(e,i),o=PR(e,i);return n=null!=t?OR(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function DR(e){return MP("remove",e._path),OR(e,null)}function OR(e,t){e=ye(e),MP("set",e._path),AP("set",t,e._path,!1);var n=new L;return eR(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function LR(e,t){e=ye(e),MP("setPriority",e._path),DP("setPriority",t,!1);var n=new L;return eR(e._repo,aC(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function MR(e,t,n){if(MP("setWithPriority",e._path),AP("setWithPriority",t,e._path,!1),DP("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new L;return eR(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function FR(e,t){RP("update",t,e._path,!1);var n=new L;return function(e,t,n,r){aR(e,"update",{path:t.toString(),value:n});var i=!0,a=QP(e),o={};if(gS(n,(function(n,r){i=!1,o[n]=fP(aC(t,n),HC(r),e.serverSyncTree_,a)})),i)aS("update() called with empty data.  Don't do anything."),oR(0,r,"ok",void 0);else{var u=XP(e),s=BA(e.serverSyncTree_,t,o,u);VP(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||cS("update at "+t+" failed: "+n);var o=zA(e.serverSyncTree_,u,!a),s=o.length>0?lR(e,t):t;qP(e.eventQueue_,s,o),oR(0,r,n,i)})),gS(n,(function(n){var r=vR(e,aC(t,n));lR(e,r)})),qP(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}var UR=function(){function e(t){l(this,e),this.callbackContext=t}return f(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new kR("value",this,new CR(e.snapshotNode,new SR(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new wR(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),VR=function(){function e(t,n){l(this,e),this.eventType=t,this.callbackContext=n}return f(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new wR(this,e,t):null}},{key:"createEvent",value:function(e,t){S(null!=e.childName,"Child events should have a childName.");var n=PR(new SR(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new kR(e.type,this,new CR(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function jR(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){rR(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new _R(n,a||void 0),c="value"===t?new UR(s):new VR(t,s);return function(e,t,n){var r;r=".info"===ZS(t._path)?QA(e.infoSyncTree_,t,n):QA(e.serverSyncTree_,t,n),jP(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return rR(e._repo,e,c)}}function qR(e,t,n,r){return jR(e,"value",t,n,r)}function BR(e,t,n,r){return jR(e,"child_added",t,n,r)}function zR(e,t,n,r){return jR(e,"child_changed",t,n,r)}function WR(e,t,n,r){return jR(e,"child_moved",t,n,r)}function KR(e,t,n,r){return jR(e,"child_removed",t,n,r)}function HR(e,t,n){var r=null,i=n?new _R(n):null;"value"===t?r=new UR(i):t&&(r=new VR(t,i)),rR(e._repo,e,r)}var GR=f((function e(){l(this,e)})),QR=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){AP("endAt",this._value,e._path,!0);var t=cN(e._queryParams,this._value,this._key);if(TR(t),ER(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xR(e._repo,e._path,t,e._orderByCalled)}}]),n}(GR);function YR(e,t){return OP("endAt","key",t,!0),new QR(e,t)}var $R=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){AP("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===_C?("string"===typeof t&&(t=ZC(t)),r=cN(e,t,n)):r=cN(e,t,null==n?hS:ZC(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(TR(t),ER(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xR(e._repo,e._path,t,e._orderByCalled)}}]),n}(GR);function JR(e,t){return OP("endBefore","key",t,!0),new $R(e,t)}var XR=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){AP("startAt",this._value,e._path,!0);var t=sN(e._queryParams,this._value,this._key);if(TR(t),ER(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xR(e._repo,e._path,t,e._orderByCalled)}}]),n}(GR);function ZR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return OP("startAt","key",t,!0),new XR(e,t)}var eD=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){AP("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===_C?("string"===typeof t&&(t=XC(t)),r=sN(e,t,n)):r=sN(e,t,null==n?fS:XC(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(TR(t),ER(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xR(e._repo,e._path,t,e._orderByCalled)}}]),n}(GR);function tD(e,t){return OP("startAfter","key",t,!0),new eD(e,t)}var nD=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this))._limit=e,r}return f(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xR(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(GR);function rD(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new nD(e)}var iD=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this))._limit=e,r}return f(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xR(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(GR);function aD(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new iD(e)}var oD=function(e){y(n,e);var t=_(n);function n(e){var r;return l(this,n),(r=t.call(this))._path=e,r}return f(n,[{key:"_apply",value:function(e){IR(e,"orderByChild");var t=new JS(this._path);if(oC(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new GC(t),r=lN(e._queryParams,n);return ER(r),new xR(e._repo,e._path,r,!0)}}]),n}(GR);function uD(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return LP("orderByChild","path",e,!1),new oD(e)}var sD=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){IR(e,"orderByKey");var t=lN(e._queryParams,_C);return ER(t),new xR(e._repo,e._path,t,!0)}}]),n}(GR);function cD(){return new sD}var lD=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){IR(e,"orderByPriority");var t=lN(e._queryParams,UC);return ER(t),new xR(e._repo,e._path,t,!0)}}]),n}(GR);function hD(){return new lD}var fD=function(e){y(n,e);var t=_(n);function n(){return l(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){IR(e,"orderByValue");var t=lN(e._queryParams,YC);return ER(t),new xR(e._repo,e._path,t,!0)}}]),n}(GR);function dD(){return new fD}var pD=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){if(AP("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new QR(this._value,this._key)._apply(new XR(this._value,this._key)._apply(e))}}]),n}(GR);function vD(e,t){return OP("equalTo","key",t,!0),new pD(e,t)}function yD(e){for(var t=ye(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){S(!wA,"__referenceConstructor has already been defined"),wA=e}(SR),function(e){S(!SA,"__referenceConstructor has already been defined"),SA=e}(SR);var mD={},gD=!1;function kD(e,t,n,r){e.repoInfo_=new DS("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function wD(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||sS("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),aS("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=mR(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/task-management-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=mR(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new CS(CS.OWNER):new SS(e.name,e.options,t);FP("Invalid Firebase Database URL",u),oC(u.path)||sS("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=mD[t.name];i||(i={},mD[t.name]=i);var a=i[e.toURLString()];a&&sS("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new KP(e,gD,n,r),i[e.toURLString()]=a,a}(s,e,l,new TS(e.name,n));return new _D(h,e)}var _D=function(){function e(t,n){l(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return f(e,[{key:"_repo",get:function(){return this._instanceStarted||(HP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new SR(this._repo,XS())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=mD[t];n&&n[e.key]===e||sS("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),iR(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&sS("Cannot call "+e+" on a deleted database.")}}]),e}();function bD(){HS.IS_TRANSPORT_INITIALIZED&&cS("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function xD(){bD(),BS.forceDisallow()}function ID(){bD(),KS.forceDisallow(),BS.forceAllow()}function ED(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=ye(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&sS("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&sS('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new CS(CS.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:M(r.mockUserToken,e.app.options.projectId);a=new CS(o)}kD(i,t,n,a)}function TD(e){(e=ye(e))._checkNotDeleted("goOffline"),iR(e._repo)}function SD(e){var t;(e=ye(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(WP)}function CD(e,t){iS(e,t)}var ND={".sv":"timestamp"};var AD=function(){function e(t,n){l(this,e),this.committed=t,this.snapshot=n}return f(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function PD(e,t,n){var r;if(e=ye(e),MP("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new L,o=qR(e,(function(){}));return function(e,t,n,r,i,a){aR(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:ZT(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=uR(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{PP("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=yP(e.transactionQueueTree_,t),h=mP(l)||[];h.push(o),gP(l,h),"object"===typeof s&&null!==s&&X(s,".priority")?(c=Z(s,".priority"),S(NP(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(YA(e.serverSyncTree_,t)||WC.EMPTY_NODE).getPriority().val();var f=QP(e),d=HC(s,c),p=dP(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=XP(e);var v=qA(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);qP(e.eventQueue_,t,v),sR(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new CR(r,new SR(e._repo,e._path),UC),a.resolve(new AD(n,i)))}),o,i),a.promise}yC.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},yC.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){HT(mt),lt(new be("database",(function(e,t){var n=t.instanceIdentifier;return wD(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),xt(zT,WT,e),xt(zT,WT,"esm2017")}();var RD=new De("@firebase/database-compat"),DD=function(e){var t="FIREBASE WARNING: "+e;RD.warn(t)},OD=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(fe(e,t)+"must be a boolean.")},LD=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(fe(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},MD=function(){function e(t){l(this,e),this._delegate=t}return f(e,[{key:"cancel",value:function(e){he("OnDisconnect.cancel",0,1,arguments.length),de("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){he("OnDisconnect.remove",0,1,arguments.length),de("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){he("OnDisconnect.set",1,2,arguments.length),de("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){he("OnDisconnect.setWithPriority",2,3,arguments.length),de("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(he("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,DD("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}de("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),FD=function(){function e(t,n){l(this,e),this.committed=t,this.snapshot=n}return f(e,[{key:"toJSON",value:function(){return he("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),UD=function(){function e(t,n){l(this,e),this._database=t,this._delegate=n}return f(e,[{key:"val",value:function(){return he("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return he("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return he("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return he("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return he("DataSnapshot.child",0,1,arguments.length),t=String(t),LP("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return he("DataSnapshot.hasChild",1,1,arguments.length),LP("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return he("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return he("DataSnapshot.forEach",1,1,arguments.length),de("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return he("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return he("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return he("DataSnapshot.ref",0,0,arguments.length),new jD(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),VD=function(){function e(t,n){l(this,e),this.database=t,this._delegate=n}return f(e,[{key:"on",value:function(t,n,r,i){var a,o=this;he("Query.on",2,4,arguments.length),de("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new UD(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return qR(this._delegate,s,c),n;case"child_added":return BR(this._delegate,s,c),n;case"child_removed":return KR(this._delegate,s,c),n;case"child_changed":return zR(this._delegate,s,c),n;case"child_moved":return WR(this._delegate,s,c),n;default:throw new Error(fe("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(he("Query.off",0,3,arguments.length),LD("Query.off",e,!0),de("Query.off","callback",t,!0),pe("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,HR(this._delegate,e,r)}else HR(this._delegate,e)}},{key:"get",value:function(){var e=this;return function(e){return ZP((e=ye(e))._repo,e).then((function(t){return new CR(t,new SR(e._repo,e._path),e._queryParams.getIndex())}))}(this._delegate).then((function(t){return new UD(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;he("Query.once",1,4,arguments.length),de("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new L,s=function(e,t){var r=new UD(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":qR(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":BR(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":KR(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":zR(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":WR(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(fe("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return he("Query.limitToFirst",1,1,arguments.length),new e(this.database,yD(this._delegate,rD(t)))}},{key:"limitToLast",value:function(t){return he("Query.limitToLast",1,1,arguments.length),new e(this.database,yD(this._delegate,aD(t)))}},{key:"orderByChild",value:function(t){return he("Query.orderByChild",1,1,arguments.length),new e(this.database,yD(this._delegate,uD(t)))}},{key:"orderByKey",value:function(){return he("Query.orderByKey",0,0,arguments.length),new e(this.database,yD(this._delegate,cD()))}},{key:"orderByPriority",value:function(){return he("Query.orderByPriority",0,0,arguments.length),new e(this.database,yD(this._delegate,hD()))}},{key:"orderByValue",value:function(){return he("Query.orderByValue",0,0,arguments.length),new e(this.database,yD(this._delegate,dD()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return he("Query.startAt",0,2,arguments.length),new e(this.database,yD(this._delegate,ZR(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return he("Query.startAfter",0,2,arguments.length),new e(this.database,yD(this._delegate,tD(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return he("Query.endAt",0,2,arguments.length),new e(this.database,yD(this._delegate,YR(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return he("Query.endBefore",0,2,arguments.length),new e(this.database,yD(this._delegate,JR(t,n)))}},{key:"equalTo",value:function(t,n){return he("Query.equalTo",1,2,arguments.length),new e(this.database,yD(this._delegate,vD(t,n)))}},{key:"toString",value:function(){return he("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return he("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(he("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new jD(this.database,new SR(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,de(e,"cancel",r.cancel,!0),r.context=n,pe(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(fe(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),jD=function(e){y(n,e);var t=_(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,new xR(r._repo,r._path,new uN,!1))).database=e,i._delegate=r,i}return f(n,[{key:"getKey",value:function(){return he("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return he("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,PR(this._delegate,e))}},{key:"getParent",value:function(){he("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return he("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){he("Reference.set",1,2,arguments.length),de("Reference.set","onComplete",t,!0);var n=OR(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(he("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,DD("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}MP("Reference.update",this._delegate._path),de("Reference.update","onComplete",t,!0);var i=FR(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){he("Reference.setWithPriority",2,3,arguments.length),de("Reference.setWithPriority","onComplete",n,!0);var r=MR(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){he("Reference.remove",0,1,arguments.length),de("Reference.remove","onComplete",e,!0);var t=DR(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;he("Reference.transaction",1,3,arguments.length),de("Reference.transaction","transactionUpdate",e,!1),de("Reference.transaction","onComplete",t,!0),OD("Reference.transaction","applyLocally",n,!0);var i=PD(this._delegate,e,{applyLocally:n}).then((function(e){return new FD(e.committed,new UD(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){he("Reference.setPriority",1,2,arguments.length),de("Reference.setPriority","onComplete",t,!0);var n=LR(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;he("Reference.push",0,2,arguments.length),de("Reference.push","onComplete",t,!0);var i=RR(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return MP("Reference.onDisconnect",this._delegate._path),new MD(new bR(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(VD),qD=function(){function e(t,n){var r=this;l(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:xD,forceLongPolling:ID}}return f(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ED(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(he("database.ref",0,1,arguments.length),e instanceof jD){var t=AR(this._delegate,e.toString());return new jD(this,t)}var n=NR(this._delegate,e);return new jD(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";he(t,1,1,arguments.length);var n=AR(this._delegate,e);return new jD(this,n)}},{key:"goOffline",value:function(){return he("database.goOffline",0,0,arguments.length),TD(this._delegate)}},{key:"goOnline",value:function(){return he("database.goOnline",0,0,arguments.length),SD(this._delegate)}}]),e}();qD.ServerValue={TIMESTAMP:ND,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var BD=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;HT(r);var s=new Ie("auth-internal",new Se("database-standalone"));return s.setComponent(new be("auth-internal",(function(){return i}),"PRIVATE")),{instance:new qD(wD(t,s,void 0,n,u),t),namespace:a}}}),zD=qD.ServerValue;function WD(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function KD(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=KD(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}!function(e){e.INTERNAL.registerComponent(new be("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new qD(i,r)}),"PUBLIC").setServiceProps({Reference:jD,Query:VD,Database:qD,DataSnapshot:UD,enableLogging:CD,INTERNAL:BD,ServerValue:zD}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.3")}(Gt);var HD=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=KD(e))&&(r&&(r+=" "),r+=t);return r},GD=["theme","type"],QD=["delay","staleId"];function YD(e){return"number"==typeof e&&!isNaN(e)}function $D(e){return"boolean"==typeof e}function JD(e){return"string"==typeof e}function XD(e){return"function"==typeof e}function ZD(e){return JD(e)||XD(e)?e:null}function eO(e){return 0===e||e}function tO(e){return(0,t.isValidElement)(e)||JD(e)||XD(e)||YD(e)}var nO={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},rO={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function iO(e){var n=e.enter,r=e.exit,i=e.appendPosition,a=void 0!==i&&i,o=e.collapse,u=void 0===o||o,s=e.collapseDuration,c=void 0===s?300:s;return function(e){var i=e.children,o=e.position,s=e.preventExitTransition,l=e.done,h=e.nodeRef,f=e.isIn,d=a?n+"--"+o:n,p=a?r+"--"+o:r,v=(0,t.useRef)(),y=(0,t.useRef)(0);function m(e){if(e.target===h.current){var t=h.current;t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",m),t.removeEventListener("animationcancel",m),0===y.current&&"animationcancel"!==e.type&&(t.className=v.current)}}function g(){var e=h.current;e.removeEventListener("animationend",g),u?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all "+n+"ms",requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,l,c):l()}return(0,t.useLayoutEffect)((function(){!function(){var e=h.current;v.current=e.className,e.className+=" "+d,e.addEventListener("animationend",m),e.addEventListener("animationcancel",m)}()}),[]),(0,t.useEffect)((function(){f||(s?g():function(){y.current=1;var e=h.current;e.className+=" "+p,e.addEventListener("animationend",g)}())}),[f]),t.createElement(t.Fragment,null,i)}}function aO(e,t){return{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}}var oO={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var t=arguments,n=this;this.list.has(e)&&this.list.get(e).forEach((function(r){var i=setTimeout((function(){r.apply(void 0,ke([].slice.call(t,1)))}),0);n.emitQueue.has(e)||n.emitQueue.set(e,[]),n.emitQueue.get(e).push(i)}))}},uO=function(e){var n=e.theme,r=e.type,i=WD(e,GD);return t.createElement("svg",Le({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-"+r+")"},i))},sO={info:function(e){return t.createElement(uO,Le({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return t.createElement(uO,Le({},e),t.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return t.createElement(uO,Le({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return t.createElement(uO,Le({},e),t.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return t.createElement("div",{className:"Toastify__spinner"})}};function cO(e){var n=(0,t.useReducer)((function(e){return e+1}),0),r=s(n,2)[1],i=s((0,t.useState)([]),2),a=i[0],o=i[1],u=(0,t.useRef)(null),c=(0,t.useRef)(new Map).current,l=function(e){return-1!==a.indexOf(e)},h=(0,t.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:l,getToast:function(e){return c.get(e)}}).current;function f(e){var t=e.containerId;!h.props.limit||t&&h.containerId!==t||(h.count-=h.queue.length,h.queue=[])}function d(e){o((function(t){return eO(e)?t.filter((function(t){return t!==e})):[]}))}function p(){var e=h.queue.shift();y(e.toastContent,e.toastProps,e.staleId)}function v(e,n){var i=n.delay,a=n.staleId,o=WD(n,QD);if(tO(e)&&!function(e){return!u.current||h.props.enableMultiContainer&&e.containerId!==h.props.containerId||c.has(e.toastId)&&null==e.updateId}(o)){var s=o.toastId,l=o.updateId,f=o.data,v=h.props,m=function(){return d(s)},g=null==l;g&&h.count++;var k,w,_={toastId:s,updateId:l,data:f,containerId:o.containerId,isLoading:o.isLoading,theme:o.theme||v.theme,icon:null!=o.icon?o.icon:v.icon,isIn:!1,key:o.key||h.toastKey++,type:o.type,closeToast:m,closeButton:o.closeButton,rtl:v.rtl,position:o.position||v.position,transition:o.transition||v.transition,className:ZD(o.className||v.toastClassName),bodyClassName:ZD(o.bodyClassName||v.bodyClassName),style:o.style||v.toastStyle,bodyStyle:o.bodyStyle||v.bodyStyle,onClick:o.onClick||v.onClick,pauseOnHover:$D(o.pauseOnHover)?o.pauseOnHover:v.pauseOnHover,pauseOnFocusLoss:$D(o.pauseOnFocusLoss)?o.pauseOnFocusLoss:v.pauseOnFocusLoss,draggable:$D(o.draggable)?o.draggable:v.draggable,draggablePercent:o.draggablePercent||v.draggablePercent,draggableDirection:o.draggableDirection||v.draggableDirection,closeOnClick:$D(o.closeOnClick)?o.closeOnClick:v.closeOnClick,progressClassName:ZD(o.progressClassName||v.progressClassName),progressStyle:o.progressStyle||v.progressStyle,autoClose:!o.isLoading&&(k=o.autoClose,w=v.autoClose,!1===k||YD(k)&&k>0?k:w),hideProgressBar:$D(o.hideProgressBar)?o.hideProgressBar:v.hideProgressBar,progress:o.progress,role:o.role||v.role,deleteToast:function(){var e=aO(c.get(s),"removed");c.delete(s),oO.emit(4,e);var t=h.queue.length;if(h.count=eO(s)?h.count-1:h.count-h.displayedToast,h.count<0&&(h.count=0),t>0){var n=eO(s)?1:h.props.limit;if(1===t||1===n)h.displayedToast++,p();else{var i=n>t?t:n;h.displayedToast=i;for(var a=0;a<i;a++)p()}}else r()}};_.iconOut=function(e){var n=e.theme,r=e.type,i=e.isLoading,a=e.icon,o=null,u={theme:n,type:r};return!1===a||(XD(a)?o=a(u):(0,t.isValidElement)(a)?o=(0,t.cloneElement)(a,u):JD(a)||YD(a)?o=a:i?o=sO.spinner():function(e){return e in sO}(r)&&(o=sO[r](u))),o}(_),XD(o.onOpen)&&(_.onOpen=o.onOpen),XD(o.onClose)&&(_.onClose=o.onClose),_.closeButton=v.closeButton,!1===o.closeButton||tO(o.closeButton)?_.closeButton=o.closeButton:!0===o.closeButton&&(_.closeButton=!tO(v.closeButton)||v.closeButton);var b=e;(0,t.isValidElement)(e)&&!JD(e.type)?b=(0,t.cloneElement)(e,{closeToast:m,toastProps:_,data:f}):XD(e)&&(b=e({closeToast:m,toastProps:_,data:f})),v.limit&&v.limit>0&&h.count>v.limit&&g?h.queue.push({toastContent:b,toastProps:_,staleId:a}):YD(i)?setTimeout((function(){y(b,_,a)}),i):y(b,_,a)}}function y(e,t,n){var r=t.toastId;n&&c.delete(n);var i={content:e,props:t};c.set(r,i),o((function(e){return[].concat(ke(e),[r]).filter((function(e){return e!==n}))})),oO.emit(4,aO(i,null==i.props.updateId?"added":"updated"))}return(0,t.useEffect)((function(){return h.containerId=e.containerId,oO.cancelEmit(3).on(0,v).on(1,(function(e){return u.current&&d(e)})).on(5,f).emit(2,h),function(){return oO.emit(3,h)}}),[]),(0,t.useEffect)((function(){h.props=e,h.isToastActive=l,h.displayedToast=a.length})),{getToastToRender:function(t){var n=new Map,r=Array.from(c.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:u,isToastActive:l}}function lO(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function hO(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function fO(e){var n=e.closeToast,r=e.theme,i=e.ariaLabel,a=void 0===i?"close":i;return t.createElement("button",{className:"Toastify__close-button Toastify__close-button--"+r,type:"button",onClick:function(e){e.stopPropagation(),n(e)},"aria-label":a},t.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},t.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function dO(e){var n=e.delay,r=e.isRunning,i=e.closeToast,a=e.type,o=e.hide,u=e.className,s=e.style,l=e.controlledProgress,h=e.progress,f=e.rtl,d=e.isIn,p=e.theme,v=Le(Le({},s),{},{animationDuration:n+"ms",animationPlayState:r?"running":"paused",opacity:o?0:1});l&&(v.transform="scaleX("+h+")");var y=HD("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+p,"Toastify__progress-bar--"+a,{"Toastify__progress-bar--rtl":f}),m=XD(u)?u({rtl:f,type:a,defaultClassName:y}):HD(y,u);return t.createElement("div",c({role:"progressbar","aria-hidden":o?"true":"false","aria-label":"notification timer",className:m,style:v},l&&h>=1?"onTransitionEnd":"onAnimationEnd",l&&h<1?null:function(){d&&i()}))}dO.defaultProps={type:rO.DEFAULT,hide:!1};var pO=function(e){var n=function(e){var n=s((0,t.useState)(!1),2),r=n[0],i=n[1],a=s((0,t.useState)(!1),2),o=a[0],u=a[1],c=(0,t.useRef)(null),l=(0,t.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,h=(0,t.useRef)(e),f=e.autoClose,d=e.pauseOnHover,p=e.closeToast,v=e.onClick,y=e.closeOnClick;function m(t){if(e.draggable){l.didMove=!1,document.addEventListener("mousemove",_),document.addEventListener("mouseup",b),document.addEventListener("touchmove",_),document.addEventListener("touchend",b);var n=c.current;l.canCloseOnClick=!0,l.canDrag=!0,l.boundingRect=n.getBoundingClientRect(),n.style.transition="",l.x=lO(t.nativeEvent),l.y=hO(t.nativeEvent),"x"===e.draggableDirection?(l.start=l.x,l.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(l.start=l.y,l.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function g(){if(l.boundingRect){var t=l.boundingRect,n=t.top,r=t.bottom,i=t.left,a=t.right;e.pauseOnHover&&l.x>=i&&l.x<=a&&l.y>=n&&l.y<=r?w():k()}}function k(){i(!0)}function w(){i(!1)}function _(t){var n=c.current;l.canDrag&&n&&(l.didMove=!0,r&&w(),l.x=lO(t),l.y=hO(t),l.delta="x"===e.draggableDirection?l.x-l.start:l.y-l.start,l.start!==l.x&&(l.canCloseOnClick=!1),n.style.transform="translate"+e.draggableDirection+"("+l.delta+"px)",n.style.opacity=""+(1-Math.abs(l.delta/l.removalDistance)))}function b(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",b);var t=c.current;if(l.canDrag&&l.didMove&&t){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance)return u(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,t.useEffect)((function(){h.current=e})),(0,t.useEffect)((function(){return c.current&&c.current.addEventListener("d",k,{once:!0}),XD(e.onOpen)&&e.onOpen((0,t.isValidElement)(e.children)&&e.children.props),function(){var e=h.current;XD(e.onClose)&&e.onClose((0,t.isValidElement)(e.children)&&e.children.props)}}),[]),(0,t.useEffect)((function(){return e.pauseOnFocusLoss&&(document.hasFocus()||w(),window.addEventListener("focus",k),window.addEventListener("blur",w)),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",k),window.removeEventListener("blur",w))}}),[e.pauseOnFocusLoss]);var x={onMouseDown:m,onTouchStart:m,onMouseUp:g,onTouchEnd:g};return f&&d&&(x.onMouseEnter=w,x.onMouseLeave=k),y&&(x.onClick=function(e){v&&v(e),l.canCloseOnClick&&p()}),{playToast:k,pauseToast:w,isRunning:r,preventExitTransition:o,toastRef:c,eventHandlers:x}}(e),r=n.isRunning,i=n.preventExitTransition,a=n.toastRef,o=n.eventHandlers,u=e.closeButton,c=e.children,l=e.autoClose,h=e.onClick,f=e.type,d=e.hideProgressBar,p=e.closeToast,v=e.transition,y=e.position,m=e.className,g=e.style,k=e.bodyClassName,w=e.bodyStyle,_=e.progressClassName,b=e.progressStyle,x=e.updateId,I=e.role,E=e.progress,T=e.rtl,S=e.toastId,C=e.deleteToast,N=e.isIn,A=e.isLoading,P=e.iconOut,R=e.theme,D=HD("Toastify__toast","Toastify__toast-theme--"+R,"Toastify__toast--"+f,{"Toastify__toast--rtl":T}),O=XD(m)?m({rtl:T,position:y,type:f,defaultClassName:D}):HD(D,m),L=!!E,M={closeToast:p,type:f,theme:R},F=null;return!1===u||(F=XD(u)?u(M):t.isValidElement(u)?t.cloneElement(u,M):fO(M)),t.createElement(v,{isIn:N,done:C,position:y,preventExitTransition:i,nodeRef:a},t.createElement("div",Le(Le({id:S,onClick:h,className:O},o),{},{style:g,ref:a}),t.createElement("div",Le(Le({},N&&{role:I}),{},{className:XD(k)?k({type:f}):HD("Toastify__toast-body",k),style:w}),null!=P&&t.createElement("div",{className:HD("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},P),t.createElement("div",null,c)),F,(l||L)&&t.createElement(dO,Le(Le({},x&&!L?{key:"pb-"+x}:{}),{},{rtl:T,theme:R,delay:l,isRunning:r,isIn:N,closeToast:p,hide:d,type:f,style:b,className:_,controlledProgress:L,progress:E}))))},vO=iO({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),yO=(iO({enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0}),iO({enter:"Toastify--animate Toastify__zoom-enter",exit:"Toastify--animate Toastify__zoom-exit"}),iO({enter:"Toastify--animate Toastify__flip-enter",exit:"Toastify--animate Toastify__flip-exit"}),(0,t.forwardRef)((function(e,n){var r=cO(e),i=r.getToastToRender,a=r.containerRef,o=r.isToastActive,u=e.className,s=e.style,c=e.rtl,l=e.containerId;function h(e){var t=HD("Toastify__toast-container","Toastify__toast-container--"+e,{"Toastify__toast-container--rtl":c});return XD(u)?u({position:e,rtl:c,defaultClassName:t}):HD(t,ZD(u))}return(0,t.useEffect)((function(){n&&(n.current=a.current)}),[]),t.createElement("div",{ref:a,className:"Toastify",id:l},i((function(e,n){var r=n.length?Le({},s):Le(Le({},s),{},{pointerEvents:"none"});return t.createElement("div",{className:h(e),style:r,key:"container-"+e},n.map((function(e,r){var i=e.content,a=e.props;return t.createElement(pO,Le(Le({},a),{},{isIn:o(a.toastId),style:Le(Le({},a.style),{},{"--nth":r+1,"--len":n.length}),key:"toast-"+a.key}),i)})))})))})));yO.displayName="ToastContainer",yO.defaultProps={position:nO.TOP_RIGHT,transition:vO,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:fO,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var mO,gO=new Map,kO=[];function wO(){return Math.random().toString(36).substring(2,9)}function _O(e){return e&&(JD(e.toastId)||YD(e.toastId))?e.toastId:wO()}function bO(e,t){return gO.size>0?oO.emit(0,e,t):kO.push({content:e,options:t}),t.toastId}function xO(e,t){return Le(Le({},t),{},{type:t&&t.type||e,toastId:_O(t)})}function IO(e){return function(t,n){return bO(t,xO(e,n))}}function EO(e,t){return bO(e,xO(rO.DEFAULT,t))}EO.loading=function(e,t){return bO(e,xO(rO.DEFAULT,Le({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},EO.promise=function(e,t,n){var r,i=t.pending,a=t.error,o=t.success;i&&(r=JD(i)?EO.loading(i,n):EO.loading(i.render,Le(Le({},n),i)));var u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null,delay:100},s=function(e,t,i){if(null!=t){var a=Le(Le(Le({type:e},u),n),{},{data:i}),o=JD(t)?{render:t}:t;return r?EO.update(r,Le(Le({},a),o)):EO(o.render,Le(Le({},a),o)),i}EO.dismiss(r)},c=XD(e)?e():e;return c.then((function(e){return s("success",o,e)})).catch((function(e){return s("error",a,e)})),c},EO.success=IO(rO.SUCCESS),EO.info=IO(rO.INFO),EO.error=IO(rO.ERROR),EO.warning=IO(rO.WARNING),EO.warn=EO.warning,EO.dark=function(e,t){return bO(e,xO(rO.DEFAULT,Le({theme:"dark"},t)))},EO.dismiss=function(e){return oO.emit(1,e)},EO.clearWaitingQueue=function(e){return void 0===e&&(e={}),oO.emit(5,e)},EO.isActive=function(e){var t=!1;return gO.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},EO.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=gO.get(n||mO);return r?r.getToast(e):null}(e,t);if(n){var r=n.props,i=n.content,a=Le(Le(Le({},r),t),{},{toastId:t.toastId||e,updateId:wO()});a.toastId!==e&&(a.staleId=e);var o=a.render||i;delete a.render,bO(o,a)}}),0)},EO.done=function(e){EO.update(e,{progress:1})},EO.onChange=function(e){return oO.on(4,e),function(){oO.off(4,e)}},EO.POSITION=nO,EO.TYPE=rO,oO.on(2,(function(e){mO=e.containerId||e,gO.set(mO,e),kO.forEach((function(e){oO.emit(0,e.content,e.options)})),kO=[]})).on(3,(function(e){gO.delete(e.containerId||e),0===gO.size&&oO.off(0).off(1).off(5)}));var TO=function(e){var n=e.handleLogout,r=s((0,t.useState)({}),2),i=r[0],a=r[1];(0,t.useEffect)((function(){return XE.database().ref().child("contacts").on("value",(function(e){null!==e.val()?a(Le({},e.val())):a({})})),function(){a({})}}),[]);return(0,ZE.jsxs)("section",{className:"hero",children:[(0,ZE.jsx)("nav",{}),(0,ZE.jsx)("div",{style:{marginTop:"100px",marginBottom:"100px"},children:(0,ZE.jsxs)("table",{className:"styled-table",children:[(0,ZE.jsx)("thead",{children:(0,ZE.jsxs)("tr",{children:[(0,ZE.jsx)("th",{style:{textAlign:"center"},children:"No."}),(0,ZE.jsx)("th",{style:{textAlign:"center"},children:"Task"}),(0,ZE.jsx)("th",{style:{textAlign:"center"},children:"Description"}),(0,ZE.jsx)("th",{style:{textAlign:"center"},children:"Link"}),(0,ZE.jsx)("th",{style:{textAlign:"center"},children:"Action"})]})}),(0,ZE.jsx)("tbody",{children:Object.keys(i).map((function(e,t){return(0,ZE.jsxs)("tr",{children:[(0,ZE.jsx)("th",{scope:"row",children:t+1}),(0,ZE.jsx)("td",{children:i[e].name}),(0,ZE.jsx)("td",{children:i[e].email}),(0,ZE.jsx)("td",{children:i[e].contact}),(0,ZE.jsxs)("td",{children:[(0,ZE.jsx)(BT,{to:"/update/".concat(e),children:(0,ZE.jsx)("button",{className:"btn btn-edit",children:"Edit"})}),(0,ZE.jsx)("button",{className:"btn btn-delete",onClick:function(){return function(e){window.confirm("Are you sure you want to delete this contact?")&&XE.database().ref().child("contacts/".concat(e)).remove((function(e){e?EO.error(e):EO.success("Contact deleted successfully")}))}(e)},children:"Complete"}),(0,ZE.jsx)(BT,{to:"/view/".concat(e),children:(0,ZE.jsx)("button",{className:"btn btn-view",children:"View"})})]})]},e)}))})]})}),(0,ZE.jsx)("button",{onClick:n,children:"Logout"})]})},SO=XE.database().ref(),CO={name:"",email:"",contact:""},NO=function(){var e=s((0,t.useState)(CO),2),n=e[0],r=e[1],i=s((0,t.useState)({}),2),a=i[0],o=i[1],u=n.name,l=n.email,h=n.contact,f=AT(),d=PT().id;(0,t.useEffect)((function(){return XE.database().ref().child("contacts").on("value",(function(e){null!==e.val()?o(Le({},e.val())):o({})})),function(){o({})}}),[d]),(0,t.useEffect)((function(){return r(Le({},d?a[d]:CO)),function(){r(Le({},CO))}}),[d,a]);var p=function(e){var t=e.target,i=t.name,a=t.value;r(Le(Le({},n),{},c({},i,a)))};return(0,ZE.jsx)("div",{className:"form",style:{marginTop:"100px"},children:(0,ZE.jsxs)("form",{style:{amrgin:"auto",padding:"15px",maxWidth:"400px",alignContent:"center"},onSubmit:function(e){e.preventDefault(),u&&l&&h?(d?SO.child("contacts/".concat(d)).set(n,(function(e){e?EO.error(e):EO.success("Contact updated successfully")})):SO.child("contacts").push(n,(function(e){e?EO.error(e):EO.success("Contact added successfully")})),setTimeout((function(){return f("/")}),500)):EO.error("Please fill in all fields")},children:[(0,ZE.jsx)("label",{htmlFor:"name",children:"Task"}),(0,ZE.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"Enter your task",value:u||"",onChange:p}),(0,ZE.jsx)("label",{htmlFor:"email",children:"Description"}),(0,ZE.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"Enter your Description",value:l||"",onChange:p}),(0,ZE.jsx)("label",{htmlFor:"contact",children:"Link"}),(0,ZE.jsx)("input",{type:"number",id:"contact",name:"contact",placeholder:"Enter your link",value:h||"",onChange:p}),(0,ZE.jsx)("input",{type:"submit",value:d?"Update":"Save"})]})})},AO=function(){var e=s((0,t.useState)({}),2),n=e[0],r=e[1],i=PT().id;return(0,t.useEffect)((function(){XE.database().ref().child("contacts/".concat(i)).get().then((function(e){e.exists()?r(Le({},e.val())):r({})}))}),[i]),(0,ZE.jsx)("div",{style:{marginTop:"150px"},children:(0,ZE.jsxs)("div",{className:"card",children:[(0,ZE.jsx)("div",{className:"card-header",children:(0,ZE.jsx)("p",{children:"User Contact Detail"})}),(0,ZE.jsxs)("div",{className:"container",children:[(0,ZE.jsx)("strong",{children:"ID: "}),(0,ZE.jsx)("span",{children:i}),(0,ZE.jsx)("br",{}),(0,ZE.jsx)("br",{}),(0,ZE.jsx)("strong",{children:"Name: "}),(0,ZE.jsx)("span",{children:n.name}),(0,ZE.jsx)("br",{}),(0,ZE.jsx)("br",{}),(0,ZE.jsx)("strong",{children:"Email: "}),(0,ZE.jsx)("span",{children:n.email}),(0,ZE.jsx)("br",{}),(0,ZE.jsx)("br",{}),(0,ZE.jsx)("strong",{children:"Contact: "}),(0,ZE.jsx)("span",{children:n.contact}),(0,ZE.jsx)("br",{}),(0,ZE.jsx)("br",{}),(0,ZE.jsx)(BT,{to:"/",children:(0,ZE.jsx)("button",{className:"btn btn-edit",children:"Back"})})]})]})})},PO=function(){return(0,ZE.jsxs)("div",{style:{marginTop:"150px",textAlign:"center"},children:[(0,ZE.jsxs)("h2",{children:["","Task Management System using React and Firebase"]}),(0,ZE.jsx)(BT,{to:{pathname:"https://https://ishansandhu.ca/"},target:"_blank",children:"Made by Ishan Sandhu \ud83d\udc68\u200d\ud83d\udcbb"})]})},RO=function(){var e=s((0,t.useState)("Home"),2),n=e[0],r=e[1],i=NT();return(0,t.useEffect)((function(){"/"===i.pathname?r("Home"):"/add"===i.pathname?r("AddContact"):"/about"===i.pathname&&r("About")}),[i]),(0,ZE.jsxs)("div",{className:"header",children:[(0,ZE.jsx)("p",{className:"logo",children:"Task Manager"}),(0,ZE.jsxs)("div",{className:"header-right",children:[(0,ZE.jsx)(BT,{to:"/",children:(0,ZE.jsx)("p",{className:"".concat("Home"===n?"active":""),onClick:function(){return r("Home")},children:"Home"})}),(0,ZE.jsx)(BT,{to:"/add",children:(0,ZE.jsx)("p",{className:"".concat("AddContact"===n?"active":""),onClick:function(){return r("AddContact")},children:"Add Task"})}),(0,ZE.jsx)(BT,{to:"/about",children:(0,ZE.jsx)("p",{className:"".concat("About"===n?"active":""),onClick:function(){return r("About")},children:"About"})})]})]})};var DO=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(""),2),c=u[0],l=u[1],h=s((0,t.useState)(""),2),f=h[0],d=h[1],p=s((0,t.useState)(""),2),v=p[0],y=p[1],m=s((0,t.useState)(!1),2),g=m[0],k=m[1],w=function(){d(""),y("")},_=function(){XE.auth().onAuthStateChanged((function(e){e?(o(""),l(""),r(e)):r("")}))};return(0,t.useEffect)((function(){_()}),[]),(0,ZE.jsx)(qT,{children:(0,ZE.jsx)("div",{className:"App",children:n?(0,ZE.jsxs)(ZE.Fragment,{children:[(0,ZE.jsx)(RO,{}),(0,ZE.jsx)(yO,{position:"top-center"}),(0,ZE.jsxs)(MT,{children:[(0,ZE.jsx)(OT,{path:"/",element:(0,ZE.jsx)(TO,{handleLogout:function(){XE.auth().signOut()}})}),(0,ZE.jsx)(OT,{path:"/add",element:(0,ZE.jsx)(NO,{})}),(0,ZE.jsx)(OT,{path:"/update/:id",element:(0,ZE.jsx)(NO,{})}),(0,ZE.jsx)(OT,{path:"/view/:id",element:(0,ZE.jsx)(AO,{})}),(0,ZE.jsx)(OT,{path:"/about",element:(0,ZE.jsx)(PO,{})})]})]}):(0,ZE.jsx)(eT,{email:a,setEmail:o,password:c,setPassword:l,handleLogin:function(){w(),XE.auth().signInWithEmailAndPassword(a,c).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-not-found":case"auth/user-disabled":d(e.message);break;case"auth/wrong-password":y(e.message)}}))},handleSignup:function(){w(),XE.auth().createUserWithEmailAndPassword(a,c).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-email":d(e.message);break;case"auth/weak-password":y(e.message)}}))},hasAccount:g,setHasAccount:k,emailError:f,passwordError:v})})})};r.createRoot(document.getElementById("root")).render((0,ZE.jsx)(t.StrictMode,{children:(0,ZE.jsx)(DO,{})}))}()}();
//# sourceMappingURL=main.7afcfac7.js.map